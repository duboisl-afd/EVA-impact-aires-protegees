<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Antoine Vuillot" />

<meta name="date" content="2023-07-13" />

<title>Matching</title>

<script src="site_libs/header-attrs-2.23/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="00_data_build.html">Building the datasets</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Descriptive statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_stat_project.html">Project</a>
    </li>
    <li>
      <a href="01_stat_biodiv.html">Biodiversity</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Impact Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="02_matching.html">Matching</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/vuillota/EVA-impact-aires-protegees.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="mailto:vuillota@afd.fr">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Matching</h1>
<h4 class="author">Antoine Vuillot</h4>
<h4 class="date">2023-07-13</h4>

</div>


<div id="outline" class="section level1" number="1">
<h1><span class="header-section-number">1</span> 1. Outline</h1>
<p>In this R Markdown are performed the different steps to obtain a
matched dataset, i.e a dataset with control and treated observational
units to compute the Average Treatment on the Treated (ATT). The
treatment here is to be under protected area status, and we look at the
impact on deforestation.</p>
<p>The steps are the following</p>
<ol style="list-style-type: decimal">
<li><p>Pre-processing : in a loop for each country</p>
<ol style="list-style-type: decimal">
<li><p>Create a grid of a given country</p></li>
<li><p>Import geospatial data on PAs from the WDPA dataset, and assign
each observation unit/pixel to a group : PA funded by the AFD (treated),
PA non-funded by the AFD, buffer (closed to but not a PA), other (so
potential control).</p></li>
<li><p>Compute the covariates and outcome of interest for all pixels
thanks to the mapme.biodiversity package</p></li>
<li><p>Build the matching data frame</p></li>
</ol></li>
<li><p>Post-processing</p>
<ol style="list-style-type: decimal">
<li><p>Load the matching dataframe of the given country</p></li>
<li><p>Perform the matching</p></li>
<li><p>Plot covariate balance and density plots to ensure relevant
matching</p></li>
<li><p>Panelize the dataframe</p></li>
<li><p>Perform regressions</p></li>
</ol></li>
</ol>
</div>
<div id="initial-settings" class="section level1" number="2">
<h1><span class="header-section-number">2</span> 2. Initial
settings</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#Install some libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;tictoc&quot;</span>, <span class="st">&quot;geodata&quot;</span>, <span class="st">&quot;wdpar&quot;</span>, <span class="st">&quot;exactextractr&quot;</span>, <span class="st">&quot;MatchIt&quot;</span>, <span class="st">&quot;fixest&quot;</span>, <span class="st">&quot;cobalt&quot;</span>))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;mapme-initiative/mapme.biodiversity&quot;</span>, <span class="at">upgrade=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#Install the river to download wdpa data directly</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>webdriver<span class="sc">::</span><span class="fu">install_phantomjs</span>()</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># Load Libraries</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="fu">library</span>(xtable)</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># For plotting</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="fu">library</span>(sf) <span class="co"># For handling vector data</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="fu">library</span>(terra) <span class="co"># For handling raster data</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="fu">library</span>(raster) <span class="co"># For handling raster data</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="fu">library</span>(rgeos)</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="fu">library</span>(geodata) <span class="co"># For getting country files</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="fu">library</span>(wdpar) <span class="co"># For getting protected areas</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="fu">library</span>(exactextractr) <span class="co"># For zonal statistics</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="fu">library</span>(mapme.biodiversity)</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="fu">library</span>(aws.s3)</span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="fu">library</span>(MatchIt) <span class="co">#For matching</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="fu">library</span>(fixest) <span class="co">#For estimating the models</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="fu">library</span>(cobalt) <span class="co">#To visualize density plots and covariate balance from MatchIt outcomes</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">#Import functions</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;scripts/ImpactAnalysis/fns_matching.R&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Define the path to a working directory</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#wdir_s3 = file.path(&quot;data_tidy/mapme_bio_data/matching&quot;)</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>tmp_pre <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;matching_pre&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>tmp_post <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;matching_post&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co"># Define the file name of the matching frame</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>name_output <span class="ot">=</span> name_input <span class="ot">=</span> <span class="st">&quot;matching_frame_10km&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>ext_output <span class="ot">=</span> ext_input <span class="ot">=</span> <span class="st">&quot;.gpkg&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="do">###Pre-processing</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="do">##Buffer and gridsize : make it depends on the country ? For instance, a typical size of grid such that the smaller PA is sampled with at least N pixels ?</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co"># Specify buffer width in meter</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>buffer_m <span class="ot">=</span> <span class="dv">10000</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co"># Specify the grid cell size in meter</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>gridSize <span class="ot">=</span> <span class="dv">10000</span> </span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co">#Load data </span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>data_pa_full <span class="ot">=</span> </span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/BDD_DesStat_nofund_nodupl.csv&quot; , encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/BDD_DesStat_nofund_nodupl.csv&quot;</span>,</span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="co">#List of countries in the sample</span></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a><span class="co">#list_iso = unique(data_pa_full$iso3)</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a>list_iso <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;COM&quot;</span>, <span class="st">&quot;MMR&quot;</span>)</span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a><span class="co"># Specify a list of WDPA IDs of funded protected areas (treated areas)</span></span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a><span class="co"># paid = data_stat_nodupl[data_stat_nodupl$iso3 == country,]$wdpaid</span></span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a><span class="co"># Start year</span></span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a>y_first <span class="ot">=</span> <span class="dv">2000</span></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="co"># End year</span></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a>y_last <span class="ot">=</span> <span class="dv">2021</span></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="do">###Post-processing</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co"># Define Column Names of Covariates</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a>colname.travelTime <span class="ot">=</span> <span class="st">&quot;minutes_median_5k_110mio&quot;</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a>colname.clayContent <span class="ot">=</span> <span class="st">&quot;clay_0.5cm_mean&quot;</span></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a><span class="co"># colname.elevation = &quot;elevation_mean&quot;</span></span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a><span class="co"># colname.tri = &quot;tri_mean&quot;</span></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a>colname.fcIni <span class="ot">=</span> <span class="st">&quot;treecover_2000&quot;</span></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a></span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a><span class="co"># Prefix of columns for forest cover</span></span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a>colfc.prefix <span class="ot">=</span> <span class="st">&quot;treecover&quot;</span></span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a><span class="co"># Separation between prefix and year</span></span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a>colfc.bind <span class="ot">=</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb3-59"><a href="#cb3-59" tabindex="-1"></a><span class="co"># Prefix of columns for forest loss</span></span>
<span id="cb3-60"><a href="#cb3-60" tabindex="-1"></a>colfl.prefix <span class="ot">=</span> <span class="st">&quot;treeloss&quot;</span></span>
<span id="cb3-61"><a href="#cb3-61" tabindex="-1"></a><span class="co">#Prefix of columns for average forest loss pre-funding</span></span>
<span id="cb3-62"><a href="#cb3-62" tabindex="-1"></a>colname.flAvg <span class="ot">=</span> <span class="st">&quot;avgLoss_pre_fund&quot;</span></span>
<span id="cb3-63"><a href="#cb3-63" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" tabindex="-1"></a><span class="co"># Year of Funding Start</span></span>
<span id="cb3-65"><a href="#cb3-65" tabindex="-1"></a>funding.start <span class="ot">=</span> <span class="dv">2014</span></span></code></pre></div>
</div>
<div id="matching" class="section level1" number="3">
<h1><span class="header-section-number">3</span> 3. Matching</h1>
<div id="pre-processing" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> 3.1
Pre-processing</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">#For each country in the list, the different steps of the pre-processing are performed</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>max_i <span class="ot">=</span> <span class="fu">length</span>(list_iso)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>tic_pre <span class="ot">=</span> <span class="fu">tic</span>()</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> list_iso)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>{</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; : country &quot;</span>, count, <span class="st">&quot;/&quot;</span>, max_i))</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>  </span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>  <span class="co">#Generate observation units</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Generating observation units&quot;</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>  output_pre_grid <span class="ot">=</span> <span class="fu">fn_pre_grid</span>(<span class="at">iso =</span> i, <span class="at">path_tmp =</span> tmp_pre, <span class="at">gridSize =</span> gridSize)</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>  </span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>  <span class="co">#Load the outputs </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>  utm_code <span class="ot">=</span> output_pre_grid<span class="sc">$</span>utm_code</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>  gadm_prj <span class="ot">=</span> output_pre_grid<span class="sc">$</span>ctry_shp_prj</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>  grid <span class="ot">=</span> output_pre_grid<span class="sc">$</span>grid</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>  </span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>  <span class="co">#Determining Group IDs and WDPA IDs for all observation units</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Determining Group IDs and WDPA IDs&quot;</span>)</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>  grid_param <span class="ot">=</span> <span class="fu">fn_pre_group</span>(<span class="at">iso =</span> i, <span class="at">path_tmp =</span> tmp_pre, <span class="at">utm_code =</span> utm_code,</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>                            <span class="at">buffer_m =</span> buffer_m, <span class="at">data =</span> data_pa_full,</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>                            <span class="at">gadm_prj =</span> gadm_prj, <span class="at">grid =</span> grid, </span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>                            <span class="at">gridSize =</span> gridSize)</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>  </span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>  <span class="co">#Calculating outcome and other covariates for all observation units</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--#Calculating outcome and other covariates&quot;</span>)</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>  <span class="fu">fn_pre_mf</span>(<span class="at">grid.param =</span> grid_param, <span class="at">path_tmp =</span> tmp_pre, <span class="at">iso =</span> i,</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>            <span class="at">name_output =</span> name_output, <span class="at">ext_output =</span> ext_output)</span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a>  </span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a>  </span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a>}</span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a>toc_pre <span class="ot">=</span> <span class="fu">toc</span>()</span></code></pre></div>
</div>
<div id="post-processing" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> 3.2
Post-processing</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">#For each country in the list, the different steps of the post-processing are performed</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>max_i <span class="ot">=</span> <span class="fu">length</span>(list_iso)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>tic_post <span class="ot">=</span> <span class="fu">tic</span>()</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> list_iso)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>{</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; : country &quot;</span>, count, <span class="st">&quot;/&quot;</span>, max_i))</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  </span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="co">#Load the matching frame</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Loading the matching frame&quot;</span>)</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  mf_ini <span class="ot">=</span> <span class="fu">fn_post_load_mf</span>(<span class="at">iso =</span> i)</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  </span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  </span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="co">#Add average pre-loss</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Add covariate : average tree loss pre-funding&quot;</span>)</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  mf <span class="ot">=</span> <span class="fu">fn_post_avgLoss_prefund</span>(<span class="at">mf =</span> mf_ini, <span class="at">yr_start =</span> funding.start <span class="sc">-</span> <span class="dv">5</span>,</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>                               <span class="at">yr_end =</span> funding.start <span class="sc">-</span> <span class="dv">1</span>, <span class="at">colfl.prefix =</span> colfl.prefix)</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  </span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>  <span class="co">#Define cut-offs</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Define cutoffs&quot;</span>)</span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>  <span class="do">##CAREFUL : ADD elevation and TRI when available</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>  lst_cutoffs <span class="ot">=</span> <span class="fu">fn_post_cutoff</span>(<span class="at">mf =</span> mf, </span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>                               <span class="at">colname.travelTime =</span> colname.travelTime, </span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>                               <span class="at">colname.clayContent =</span> colname.clayContent,</span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>                               <span class="at">colname.fcIni =</span> colname.fcIni, </span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>                               <span class="at">colname.flAvg =</span> colname.flAvg</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>                               )</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>  </span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>  <span class="co">#Run Coarsened Exact Matching</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Run CEM&quot;</span>)</span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a>  out.cem <span class="ot">=</span> <span class="fu">fn_post_cem</span>(<span class="at">mf =</span> mf, <span class="at">iso =</span> i, <span class="at">path_tmp =</span> tmp_post,</span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a>                        <span class="at">lst_cutoffs =</span> lst_cutoffs,</span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a>                       <span class="at">colname.travelTime =</span> colname.travelTime, </span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a>                       <span class="at">colname.clayContent =</span> colname.clayContent,</span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a>                       <span class="at">colname.fcIni =</span> colname.fcIni, </span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a>                       <span class="at">colname.flAvg =</span> colname.flAvg)</span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a>  </span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a>  <span class="co">#Plots : covariates</span></span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;--Some plots : covariates&quot;</span>)</span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;----Covariate balance&quot;</span>)</span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a>  <span class="fu">fn_post_plot_covbal</span>(<span class="at">out.cem =</span> out.cem, </span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a>                      <span class="at">colname.travelTime =</span> colname.travelTime, </span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a>                       <span class="at">colname.clayContent =</span> colname.clayContent,</span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a>                       <span class="at">colname.fcIni =</span> colname.fcIni, </span>
<span id="cb5-46"><a href="#cb5-46" tabindex="-1"></a>                       <span class="at">colname.flAvg =</span> colname.flAvg,</span>
<span id="cb5-47"><a href="#cb5-47" tabindex="-1"></a>                      <span class="at">iso =</span> i,</span>
<span id="cb5-48"><a href="#cb5-48" tabindex="-1"></a>                      <span class="at">path_tmp =</span> tmp_post)</span>
<span id="cb5-49"><a href="#cb5-49" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;----Density plots&quot;</span>)</span>
<span id="cb5-50"><a href="#cb5-50" tabindex="-1"></a>  <span class="fu">fn_post_plot_density</span>(<span class="at">out.cem =</span> out.cem, </span>
<span id="cb5-51"><a href="#cb5-51" tabindex="-1"></a>                      <span class="at">colname.travelTime =</span> colname.travelTime, </span>
<span id="cb5-52"><a href="#cb5-52" tabindex="-1"></a>                       <span class="at">colname.clayContent =</span> colname.clayContent,</span>
<span id="cb5-53"><a href="#cb5-53" tabindex="-1"></a>                       <span class="at">colname.fcIni =</span> colname.fcIni, </span>
<span id="cb5-54"><a href="#cb5-54" tabindex="-1"></a>                       <span class="at">colname.flAvg =</span> colname.flAvg,</span>
<span id="cb5-55"><a href="#cb5-55" tabindex="-1"></a>                      <span class="at">iso =</span> i,</span>
<span id="cb5-56"><a href="#cb5-56" tabindex="-1"></a>                      <span class="at">path_tmp =</span> tmp_post)</span>
<span id="cb5-57"><a href="#cb5-57" tabindex="-1"></a>  </span>
<span id="cb5-58"><a href="#cb5-58" tabindex="-1"></a>  <span class="co">#Panelize dataframes</span></span>
<span id="cb5-59"><a href="#cb5-59" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;----Panelize (Un-)Matched Dataframe&quot;</span>)</span>
<span id="cb5-60"><a href="#cb5-60" tabindex="-1"></a>  output_post_panel <span class="ot">=</span> <span class="fu">fn_post_panel</span>(<span class="at">out.cem =</span> out.cem, <span class="at">mf =</span> mf, <span class="at">colfc.prefix =</span> colfc.prefix, <span class="at">colfc.bind =</span> colfc.bind)</span>
<span id="cb5-61"><a href="#cb5-61" tabindex="-1"></a>  matched.wide <span class="ot">=</span> output_post_panel<span class="sc">$</span>matched.wide</span>
<span id="cb5-62"><a href="#cb5-62" tabindex="-1"></a>  unmatched.wide <span class="ot">=</span> output_post_panel<span class="sc">$</span>unmatched.wide</span>
<span id="cb5-63"><a href="#cb5-63" tabindex="-1"></a>  matched.long <span class="ot">=</span> output_post_panel<span class="sc">$</span>matched.long</span>
<span id="cb5-64"><a href="#cb5-64" tabindex="-1"></a>  unmatched.long <span class="ot">=</span> output_post_panel<span class="sc">$</span>unmatched.long  </span>
<span id="cb5-65"><a href="#cb5-65" tabindex="-1"></a>  </span>
<span id="cb5-66"><a href="#cb5-66" tabindex="-1"></a>  <span class="co">#Plots : trend</span></span>
<span id="cb5-67"><a href="#cb5-67" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;----Plots again : trend&quot;</span>)</span>
<span id="cb5-68"><a href="#cb5-68" tabindex="-1"></a>  <span class="fu">fn_post_plot_trend</span>(<span class="at">matched.long =</span> matched.long, <span class="at">unmatched.long =</span> unmatched.long, <span class="at">iso =</span> i)</span>
<span id="cb5-69"><a href="#cb5-69" tabindex="-1"></a>  </span>
<span id="cb5-70"><a href="#cb5-70" tabindex="-1"></a>  </span>
<span id="cb5-71"><a href="#cb5-71" tabindex="-1"></a>}</span>
<span id="cb5-72"><a href="#cb5-72" tabindex="-1"></a></span>
<span id="cb5-73"><a href="#cb5-73" tabindex="-1"></a>toc_post <span class="ot">=</span> <span class="fu">toc</span>()</span>
<span id="cb5-74"><a href="#cb5-74" tabindex="-1"></a></span>
<span id="cb5-75"><a href="#cb5-75" tabindex="-1"></a><span class="co">#Notes</span></span>
<span id="cb5-76"><a href="#cb5-76" tabindex="-1"></a><span class="do">## Automate the definition of cutoffs for CEM</span></span>
<span id="cb5-77"><a href="#cb5-77" tabindex="-1"></a><span class="do">### Coder 5.5.3 de Iacus et al. 2012 ? Permet de savoir le gain de matched units pour une modification des seuils d&#39;une variable</span></span>
<span id="cb5-78"><a href="#cb5-78" tabindex="-1"></a><span class="do">## Loop for different treatment years : need to adapt fn_post_avgLoss_prefund function</span></span>
<span id="cb5-79"><a href="#cb5-79" tabindex="-1"></a><span class="do">## Allow to enter a list of any covariates to perform the matching</span></span>
<span id="cb5-80"><a href="#cb5-80" tabindex="-1"></a><span class="do">## Function to plot Fig. 3 in Iacus et al. 2012</span></span>
<span id="cb5-81"><a href="#cb5-81" tabindex="-1"></a><span class="do">## Il faut contrôler le nombre de paired units à la fin ! Typiquement on veut que tous les pixels traités soient retenus, idéalement.</span></span>
<span id="cb5-82"><a href="#cb5-82" tabindex="-1"></a><span class="do">## On veut ATE ou ATT ?? Je dirai ATT car on ne veut pas estimer l&#39;effet de mettre une AP, mais l&#39;effet des AP financés par l&#39;AFD </span></span></code></pre></div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWF0Y2hpbmciCmF1dGhvcjogIkFudG9pbmUgVnVpbGxvdCIKZGF0ZTogIjIwMjMtMDctMTMiCm91dHB1dDogaHRtbF9kb2N1bWVudAotLS0KCiMgMS4gT3V0bGluZQoKSW4gdGhpcyBSIE1hcmtkb3duIGFyZSBwZXJmb3JtZWQgdGhlIGRpZmZlcmVudCBzdGVwcyB0byBvYnRhaW4gYSBtYXRjaGVkIGRhdGFzZXQsIGkuZSBhIGRhdGFzZXQgd2l0aCBjb250cm9sIGFuZCB0cmVhdGVkIG9ic2VydmF0aW9uYWwgdW5pdHMgdG8gY29tcHV0ZSB0aGUgQXZlcmFnZSBUcmVhdG1lbnQgb24gdGhlIFRyZWF0ZWQgKEFUVCkuIFRoZSB0cmVhdG1lbnQgaGVyZSBpcyB0byBiZSB1bmRlciBwcm90ZWN0ZWQgYXJlYSBzdGF0dXMsIGFuZCB3ZSBsb29rIGF0IHRoZSBpbXBhY3Qgb24gZGVmb3Jlc3RhdGlvbi4KClRoZSBzdGVwcyBhcmUgdGhlIGZvbGxvd2luZwoKMS4gIFByZS1wcm9jZXNzaW5nIDogaW4gYSBsb29wIGZvciBlYWNoIGNvdW50cnkKCiAgICAxLiAgQ3JlYXRlIGEgZ3JpZCBvZiBhIGdpdmVuIGNvdW50cnkKCiAgICAyLiAgSW1wb3J0IGdlb3NwYXRpYWwgZGF0YSBvbiBQQXMgZnJvbSB0aGUgV0RQQSBkYXRhc2V0LCBhbmQgYXNzaWduIGVhY2ggb2JzZXJ2YXRpb24gdW5pdC9waXhlbCB0byBhIGdyb3VwIDogUEEgZnVuZGVkIGJ5IHRoZSBBRkQgKHRyZWF0ZWQpLCBQQSBub24tZnVuZGVkIGJ5IHRoZSBBRkQsIGJ1ZmZlciAoY2xvc2VkIHRvIGJ1dCBub3QgYSBQQSksIG90aGVyIChzbyBwb3RlbnRpYWwgY29udHJvbCkuCgogICAgMy4gIENvbXB1dGUgdGhlIGNvdmFyaWF0ZXMgYW5kIG91dGNvbWUgb2YgaW50ZXJlc3QgZm9yIGFsbCBwaXhlbHMgdGhhbmtzIHRvIHRoZSBtYXBtZS5iaW9kaXZlcnNpdHkgcGFja2FnZQoKICAgIDQuICBCdWlsZCB0aGUgbWF0Y2hpbmcgZGF0YSBmcmFtZQoKMi4gIFBvc3QtcHJvY2Vzc2luZwoKICAgIDEuICBMb2FkIHRoZSBtYXRjaGluZyBkYXRhZnJhbWUgb2YgdGhlIGdpdmVuIGNvdW50cnkKCiAgICAyLiAgUGVyZm9ybSB0aGUgbWF0Y2hpbmcKCiAgICAzLiAgUGxvdCBjb3ZhcmlhdGUgYmFsYW5jZSBhbmQgZGVuc2l0eSBwbG90cyB0byBlbnN1cmUgcmVsZXZhbnQgbWF0Y2hpbmcKCiAgICA0LiAgUGFuZWxpemUgdGhlIGRhdGFmcmFtZQoKICAgIDUuICBQZXJmb3JtIHJlZ3Jlc3Npb25zCgojIDIuIEluaXRpYWwgc2V0dGluZ3MKCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFLCBldmFsID0gRkFMU0V9CmtuaXRyOjpvcHRzX2tuaXQkc2V0KHJvb3QuZGlyID0gcnByb2pyb290OjpmaW5kX3JzdHVkaW9fcm9vdF9maWxlKCkpCgpgYGAKCmBgYHtyLCBldmFsID0gRkFMU0V9CiNJbnN0YWxsIHNvbWUgbGlicmFyaWVzCmluc3RhbGwucGFja2FnZXMoYygidGljdG9jIiwgImdlb2RhdGEiLCAid2RwYXIiLCAiZXhhY3RleHRyYWN0ciIsICJNYXRjaEl0IiwgImZpeGVzdCIsICJjb2JhbHQiKSkKcmVtb3Rlczo6aW5zdGFsbF9naXRodWIoIm1hcG1lLWluaXRpYXRpdmUvbWFwbWUuYmlvZGl2ZXJzaXR5IiwgdXBncmFkZT0iYWx3YXlzIikKCiNJbnN0YWxsIHRoZSByaXZlciB0byBkb3dubG9hZCB3ZHBhIGRhdGEgZGlyZWN0bHkKd2ViZHJpdmVyOjppbnN0YWxsX3BoYW50b21qcygpCgojIExvYWQgTGlicmFyaWVzCmxpYnJhcnkoZHBseXIpCmxpYnJhcnkodGljdG9jKQpsaWJyYXJ5KHh0YWJsZSkKbGlicmFyeSh0aWR5cikKbGlicmFyeShzdHJpbmdyKQpsaWJyYXJ5KGdncGxvdDIpICMgRm9yIHBsb3R0aW5nCmxpYnJhcnkoc2YpICMgRm9yIGhhbmRsaW5nIHZlY3RvciBkYXRhCmxpYnJhcnkodGVycmEpICMgRm9yIGhhbmRsaW5nIHJhc3RlciBkYXRhCmxpYnJhcnkocmFzdGVyKSAjIEZvciBoYW5kbGluZyByYXN0ZXIgZGF0YQpsaWJyYXJ5KHJnZW9zKQpsaWJyYXJ5KGdlb2RhdGEpICMgRm9yIGdldHRpbmcgY291bnRyeSBmaWxlcwpsaWJyYXJ5KHdkcGFyKSAjIEZvciBnZXR0aW5nIHByb3RlY3RlZCBhcmVhcwpsaWJyYXJ5KGV4YWN0ZXh0cmFjdHIpICMgRm9yIHpvbmFsIHN0YXRpc3RpY3MKbGlicmFyeShtYXBtZS5iaW9kaXZlcnNpdHkpCmxpYnJhcnkoYXdzLnMzKQpsaWJyYXJ5KE1hdGNoSXQpICNGb3IgbWF0Y2hpbmcKbGlicmFyeShmaXhlc3QpICNGb3IgZXN0aW1hdGluZyB0aGUgbW9kZWxzCmxpYnJhcnkoY29iYWx0KSAjVG8gdmlzdWFsaXplIGRlbnNpdHkgcGxvdHMgYW5kIGNvdmFyaWF0ZSBiYWxhbmNlIGZyb20gTWF0Y2hJdCBvdXRjb21lcwpgYGAKCmBgYHtyIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0UsIGV2YWwgPSBGQUxTRX0KI0ltcG9ydCBmdW5jdGlvbnMKc291cmNlKCJzY3JpcHRzL0ltcGFjdEFuYWx5c2lzL2Zuc19tYXRjaGluZy5SIikKYGBgCgpgYGB7ciwgZXZhbCA9IEZBTFNFfQojIERlZmluZSB0aGUgcGF0aCB0byBhIHdvcmtpbmcgZGlyZWN0b3J5CiN3ZGlyX3MzID0gZmlsZS5wYXRoKCJkYXRhX3RpZHkvbWFwbWVfYmlvX2RhdGEvbWF0Y2hpbmciKQp0bXBfcHJlID0gcGFzdGUodGVtcGRpcigpLCAibWF0Y2hpbmdfcHJlIiwgc2VwID0gIi8iKQp0bXBfcG9zdCA9IHBhc3RlKHRlbXBkaXIoKSwgIm1hdGNoaW5nX3Bvc3QiLCBzZXAgPSAiLyIpCgojIERlZmluZSB0aGUgZmlsZSBuYW1lIG9mIHRoZSBtYXRjaGluZyBmcmFtZQpuYW1lX291dHB1dCA9IG5hbWVfaW5wdXQgPSAibWF0Y2hpbmdfZnJhbWVfMTBrbSIKZXh0X291dHB1dCA9IGV4dF9pbnB1dCA9ICIuZ3BrZyIKCiMjIyMjCiMjI1ByZS1wcm9jZXNzaW5nCiMjIyMjCgoKIyNCdWZmZXIgYW5kIGdyaWRzaXplIDogbWFrZSBpdCBkZXBlbmRzIG9uIHRoZSBjb3VudHJ5ID8gRm9yIGluc3RhbmNlLCBhIHR5cGljYWwgc2l6ZSBvZiBncmlkIHN1Y2ggdGhhdCB0aGUgc21hbGxlciBQQSBpcyBzYW1wbGVkIHdpdGggYXQgbGVhc3QgTiBwaXhlbHMgPwojIFNwZWNpZnkgYnVmZmVyIHdpZHRoIGluIG1ldGVyCmJ1ZmZlcl9tID0gMTAwMDAKIyBTcGVjaWZ5IHRoZSBncmlkIGNlbGwgc2l6ZSBpbiBtZXRlcgpncmlkU2l6ZSA9IDEwMDAwIAoKI0xvYWQgZGF0YSAKZGF0YV9wYV9mdWxsID0gCiAgI2ZyZWFkKCJkYXRhX3RpZHkvQkREX0Rlc1N0YXRfbm9mdW5kX25vZHVwbC5jc3YiICwgZW5jb2RpbmcgPSAiVVRGLTgiKQogIGF3cy5zMzo6czNyZWFkX3VzaW5nKAogIEZVTiA9IGRhdGEudGFibGU6OmZyZWFkLAogIGVuY29kaW5nID0gIlVURi04IiwKICAjIE1ldHRyZSBsZXMgb3B0aW9ucyBkZSBGVU4gaWNpCiAgb2JqZWN0ID0gImRhdGFfdGlkeS9CRERfRGVzU3RhdF9ub2Z1bmRfbm9kdXBsLmNzdiIsCiAgYnVja2V0ID0gInByb2pldC1hZmQtZXZhLWFwIiwKICBvcHRzID0gbGlzdCgicmVnaW9uIiA9ICIiKSkKCiNMaXN0IG9mIGNvdW50cmllcyBpbiB0aGUgc2FtcGxlCiNsaXN0X2lzbyA9IHVuaXF1ZShkYXRhX3BhX2Z1bGwkaXNvMykKbGlzdF9pc28gPSBjKCJDT00iLCAiTU1SIikKIyBTcGVjaWZ5IGEgbGlzdCBvZiBXRFBBIElEcyBvZiBmdW5kZWQgcHJvdGVjdGVkIGFyZWFzICh0cmVhdGVkIGFyZWFzKQojIHBhaWQgPSBkYXRhX3N0YXRfbm9kdXBsW2RhdGFfc3RhdF9ub2R1cGwkaXNvMyA9PSBjb3VudHJ5LF0kd2RwYWlkCgojIFN0YXJ0IHllYXIKeV9maXJzdCA9IDIwMDAKIyBFbmQgeWVhcgp5X2xhc3QgPSAyMDIxCgojIyMjIwojIyNQb3N0LXByb2Nlc3NpbmcKIyMjIyMKCiMgRGVmaW5lIENvbHVtbiBOYW1lcyBvZiBDb3ZhcmlhdGVzCmNvbG5hbWUudHJhdmVsVGltZSA9ICJtaW51dGVzX21lZGlhbl81a18xMTBtaW8iCmNvbG5hbWUuY2xheUNvbnRlbnQgPSAiY2xheV8wLjVjbV9tZWFuIgojIGNvbG5hbWUuZWxldmF0aW9uID0gImVsZXZhdGlvbl9tZWFuIgojIGNvbG5hbWUudHJpID0gInRyaV9tZWFuIgpjb2xuYW1lLmZjSW5pID0gInRyZWVjb3Zlcl8yMDAwIgoKCiMgUHJlZml4IG9mIGNvbHVtbnMgZm9yIGZvcmVzdCBjb3Zlcgpjb2xmYy5wcmVmaXggPSAidHJlZWNvdmVyIgojIFNlcGFyYXRpb24gYmV0d2VlbiBwcmVmaXggYW5kIHllYXIKY29sZmMuYmluZCA9ICJfIgojIFByZWZpeCBvZiBjb2x1bW5zIGZvciBmb3Jlc3QgbG9zcwpjb2xmbC5wcmVmaXggPSAidHJlZWxvc3MiCiNQcmVmaXggb2YgY29sdW1ucyBmb3IgYXZlcmFnZSBmb3Jlc3QgbG9zcyBwcmUtZnVuZGluZwpjb2xuYW1lLmZsQXZnID0gImF2Z0xvc3NfcHJlX2Z1bmQiCgojIFllYXIgb2YgRnVuZGluZyBTdGFydApmdW5kaW5nLnN0YXJ0ID0gMjAxNApgYGAKCiMgMy4gTWF0Y2hpbmcKCiMjIDMuMSBQcmUtcHJvY2Vzc2luZwoKYGBge3IgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRSwgZXZhbCA9IEZBTFNFfQojRm9yIGVhY2ggY291bnRyeSBpbiB0aGUgbGlzdCwgdGhlIGRpZmZlcmVudCBzdGVwcyBvZiB0aGUgcHJlLXByb2Nlc3NpbmcgYXJlIHBlcmZvcm1lZApjb3VudCA9IDAKbWF4X2kgPSBsZW5ndGgobGlzdF9pc28pCnRpY19wcmUgPSB0aWMoKQpmb3IgKGkgaW4gbGlzdF9pc28pCnsKICBjb3VudCA9IGNvdW50KzEKICBwcmludChwYXN0ZTAoaSwgIiA6IGNvdW50cnkgIiwgY291bnQsICIvIiwgbWF4X2kpKQogIAogICNHZW5lcmF0ZSBvYnNlcnZhdGlvbiB1bml0cwogIHByaW50KCItLUdlbmVyYXRpbmcgb2JzZXJ2YXRpb24gdW5pdHMiKQogIG91dHB1dF9wcmVfZ3JpZCA9IGZuX3ByZV9ncmlkKGlzbyA9IGksIHBhdGhfdG1wID0gdG1wX3ByZSwgZ3JpZFNpemUgPSBncmlkU2l6ZSkKICAKICAjTG9hZCB0aGUgb3V0cHV0cyAKICB1dG1fY29kZSA9IG91dHB1dF9wcmVfZ3JpZCR1dG1fY29kZQogIGdhZG1fcHJqID0gb3V0cHV0X3ByZV9ncmlkJGN0cnlfc2hwX3ByagogIGdyaWQgPSBvdXRwdXRfcHJlX2dyaWQkZ3JpZAogIAogICNEZXRlcm1pbmluZyBHcm91cCBJRHMgYW5kIFdEUEEgSURzIGZvciBhbGwgb2JzZXJ2YXRpb24gdW5pdHMKICBwcmludCgiLS1EZXRlcm1pbmluZyBHcm91cCBJRHMgYW5kIFdEUEEgSURzIikKICBncmlkX3BhcmFtID0gZm5fcHJlX2dyb3VwKGlzbyA9IGksIHBhdGhfdG1wID0gdG1wX3ByZSwgdXRtX2NvZGUgPSB1dG1fY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcl9tID0gYnVmZmVyX20sIGRhdGEgPSBkYXRhX3BhX2Z1bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYWRtX3ByaiA9IGdhZG1fcHJqLCBncmlkID0gZ3JpZCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkU2l6ZSA9IGdyaWRTaXplKQogIAogICNDYWxjdWxhdGluZyBvdXRjb21lIGFuZCBvdGhlciBjb3ZhcmlhdGVzIGZvciBhbGwgb2JzZXJ2YXRpb24gdW5pdHMKICBwcmludCgiLS0jQ2FsY3VsYXRpbmcgb3V0Y29tZSBhbmQgb3RoZXIgY292YXJpYXRlcyIpCiAgZm5fcHJlX21mKGdyaWQucGFyYW0gPSBncmlkX3BhcmFtLCBwYXRoX3RtcCA9IHRtcF9wcmUsIGlzbyA9IGksCiAgICAgICAgICAgIG5hbWVfb3V0cHV0ID0gbmFtZV9vdXRwdXQsIGV4dF9vdXRwdXQgPSBleHRfb3V0cHV0KQogIAogIAp9Cgp0b2NfcHJlID0gdG9jKCkKCmBgYAoKIyMgMy4yIFBvc3QtcHJvY2Vzc2luZwoKYGBge3IgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRSwgZXZhbCA9IEZBTFNFfQojRm9yIGVhY2ggY291bnRyeSBpbiB0aGUgbGlzdCwgdGhlIGRpZmZlcmVudCBzdGVwcyBvZiB0aGUgcG9zdC1wcm9jZXNzaW5nIGFyZSBwZXJmb3JtZWQKY291bnQgPSAwCm1heF9pID0gbGVuZ3RoKGxpc3RfaXNvKQp0aWNfcG9zdCA9IHRpYygpCmZvciAoaSBpbiBsaXN0X2lzbykKewogIGNvdW50ID0gY291bnQrMQogIHByaW50KHBhc3RlMChpLCAiIDogY291bnRyeSAiLCBjb3VudCwgIi8iLCBtYXhfaSkpCiAgCiAgI0xvYWQgdGhlIG1hdGNoaW5nIGZyYW1lCiAgcHJpbnQoIi0tTG9hZGluZyB0aGUgbWF0Y2hpbmcgZnJhbWUiKQogIG1mX2luaSA9IGZuX3Bvc3RfbG9hZF9tZihpc28gPSBpKQogIAogIAogICNBZGQgYXZlcmFnZSBwcmUtbG9zcwogIHByaW50KCItLUFkZCBjb3ZhcmlhdGUgOiBhdmVyYWdlIHRyZWUgbG9zcyBwcmUtZnVuZGluZyIpCiAgbWYgPSBmbl9wb3N0X2F2Z0xvc3NfcHJlZnVuZChtZiA9IG1mX2luaSwgeXJfc3RhcnQgPSBmdW5kaW5nLnN0YXJ0IC0gNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlyX2VuZCA9IGZ1bmRpbmcuc3RhcnQgLSAxLCBjb2xmbC5wcmVmaXggPSBjb2xmbC5wcmVmaXgpCiAgCiAgI0RlZmluZSBjdXQtb2ZmcwogIHByaW50KCItLURlZmluZSBjdXRvZmZzIikKICAjI0NBUkVGVUwgOiBBREQgZWxldmF0aW9uIGFuZCBUUkkgd2hlbiBhdmFpbGFibGUKICBsc3RfY3V0b2ZmcyA9IGZuX3Bvc3RfY3V0b2ZmKG1mID0gbWYsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS50cmF2ZWxUaW1lID0gY29sbmFtZS50cmF2ZWxUaW1lLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG5hbWUuY2xheUNvbnRlbnQgPSBjb2xuYW1lLmNsYXlDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS5mY0luaSA9IGNvbG5hbWUuZmNJbmksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS5mbEF2ZyA9IGNvbG5hbWUuZmxBdmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAKICAjUnVuIENvYXJzZW5lZCBFeGFjdCBNYXRjaGluZwogIHByaW50KCItLVJ1biBDRU0iKQogIG91dC5jZW0gPSBmbl9wb3N0X2NlbShtZiA9IG1mLCBpc28gPSBpLCBwYXRoX3RtcCA9IHRtcF9wb3N0LAogICAgICAgICAgICAgICAgICAgICAgICBsc3RfY3V0b2ZmcyA9IGxzdF9jdXRvZmZzLAogICAgICAgICAgICAgICAgICAgICAgIGNvbG5hbWUudHJhdmVsVGltZSA9IGNvbG5hbWUudHJhdmVsVGltZSwgCiAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS5jbGF5Q29udGVudCA9IGNvbG5hbWUuY2xheUNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS5mY0luaSA9IGNvbG5hbWUuZmNJbmksIAogICAgICAgICAgICAgICAgICAgICAgIGNvbG5hbWUuZmxBdmcgPSBjb2xuYW1lLmZsQXZnKQogIAogICNQbG90cyA6IGNvdmFyaWF0ZXMKICBwcmludCgiLS1Tb21lIHBsb3RzIDogY292YXJpYXRlcyIpCiAgcHJpbnQoIi0tLS1Db3ZhcmlhdGUgYmFsYW5jZSIpCiAgZm5fcG9zdF9wbG90X2NvdmJhbChvdXQuY2VtID0gb3V0LmNlbSwgCiAgICAgICAgICAgICAgICAgICAgICBjb2xuYW1lLnRyYXZlbFRpbWUgPSBjb2xuYW1lLnRyYXZlbFRpbWUsIAogICAgICAgICAgICAgICAgICAgICAgIGNvbG5hbWUuY2xheUNvbnRlbnQgPSBjb2xuYW1lLmNsYXlDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgIGNvbG5hbWUuZmNJbmkgPSBjb2xuYW1lLmZjSW5pLCAKICAgICAgICAgICAgICAgICAgICAgICBjb2xuYW1lLmZsQXZnID0gY29sbmFtZS5mbEF2ZywKICAgICAgICAgICAgICAgICAgICAgIGlzbyA9IGksCiAgICAgICAgICAgICAgICAgICAgICBwYXRoX3RtcCA9IHRtcF9wb3N0KQogIHByaW50KCItLS0tRGVuc2l0eSBwbG90cyIpCiAgZm5fcG9zdF9wbG90X2RlbnNpdHkob3V0LmNlbSA9IG91dC5jZW0sIAogICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS50cmF2ZWxUaW1lID0gY29sbmFtZS50cmF2ZWxUaW1lLCAKICAgICAgICAgICAgICAgICAgICAgICBjb2xuYW1lLmNsYXlDb250ZW50ID0gY29sbmFtZS5jbGF5Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICBjb2xuYW1lLmZjSW5pID0gY29sbmFtZS5mY0luaSwgCiAgICAgICAgICAgICAgICAgICAgICAgY29sbmFtZS5mbEF2ZyA9IGNvbG5hbWUuZmxBdmcsCiAgICAgICAgICAgICAgICAgICAgICBpc28gPSBpLAogICAgICAgICAgICAgICAgICAgICAgcGF0aF90bXAgPSB0bXBfcG9zdCkKICAKICAjUGFuZWxpemUgZGF0YWZyYW1lcwogIHByaW50KCItLS0tUGFuZWxpemUgKFVuLSlNYXRjaGVkIERhdGFmcmFtZSIpCiAgb3V0cHV0X3Bvc3RfcGFuZWwgPSBmbl9wb3N0X3BhbmVsKG91dC5jZW0gPSBvdXQuY2VtLCBtZiA9IG1mLCBjb2xmYy5wcmVmaXggPSBjb2xmYy5wcmVmaXgsIGNvbGZjLmJpbmQgPSBjb2xmYy5iaW5kKQogIG1hdGNoZWQud2lkZSA9IG91dHB1dF9wb3N0X3BhbmVsJG1hdGNoZWQud2lkZQogIHVubWF0Y2hlZC53aWRlID0gb3V0cHV0X3Bvc3RfcGFuZWwkdW5tYXRjaGVkLndpZGUKICBtYXRjaGVkLmxvbmcgPSBvdXRwdXRfcG9zdF9wYW5lbCRtYXRjaGVkLmxvbmcKICB1bm1hdGNoZWQubG9uZyA9IG91dHB1dF9wb3N0X3BhbmVsJHVubWF0Y2hlZC5sb25nICAKICAKICAjUGxvdHMgOiB0cmVuZAogIHByaW50KCItLS0tUGxvdHMgYWdhaW4gOiB0cmVuZCIpCiAgZm5fcG9zdF9wbG90X3RyZW5kKG1hdGNoZWQubG9uZyA9IG1hdGNoZWQubG9uZywgdW5tYXRjaGVkLmxvbmcgPSB1bm1hdGNoZWQubG9uZywgaXNvID0gaSkKICAKICAKfQoKdG9jX3Bvc3QgPSB0b2MoKQoKI05vdGVzCiMjIEF1dG9tYXRlIHRoZSBkZWZpbml0aW9uIG9mIGN1dG9mZnMgZm9yIENFTQojIyMgQ29kZXIgNS41LjMgZGUgSWFjdXMgZXQgYWwuIDIwMTIgPyBQZXJtZXQgZGUgc2F2b2lyIGxlIGdhaW4gZGUgbWF0Y2hlZCB1bml0cyBwb3VyIHVuZSBtb2RpZmljYXRpb24gZGVzIHNldWlscyBkJ3VuZSB2YXJpYWJsZQojIyBMb29wIGZvciBkaWZmZXJlbnQgdHJlYXRtZW50IHllYXJzIDogbmVlZCB0byBhZGFwdCBmbl9wb3N0X2F2Z0xvc3NfcHJlZnVuZCBmdW5jdGlvbgojIyBBbGxvdyB0byBlbnRlciBhIGxpc3Qgb2YgYW55IGNvdmFyaWF0ZXMgdG8gcGVyZm9ybSB0aGUgbWF0Y2hpbmcKIyMgRnVuY3Rpb24gdG8gcGxvdCBGaWcuIDMgaW4gSWFjdXMgZXQgYWwuIDIwMTIKIyMgSWwgZmF1dCBjb250csO0bGVyIGxlIG5vbWJyZSBkZSBwYWlyZWQgdW5pdHMgw6AgbGEgZmluICEgVHlwaXF1ZW1lbnQgb24gdmV1dCBxdWUgdG91cyBsZXMgcGl4ZWxzIHRyYWl0w6lzIHNvaWVudCByZXRlbnVzLCBpZMOpYWxlbWVudC4KIyMgT24gdmV1dCBBVEUgb3UgQVRUID8/IEplIGRpcmFpIEFUVCBjYXIgb24gbmUgdmV1dCBwYXMgZXN0aW1lciBsJ2VmZmV0IGRlIG1ldHRyZSB1bmUgQVAsIG1haXMgbCdlZmZldCBkZXMgQVAgZmluYW5jw6lzIHBhciBsJ0FGRCAKYGBgCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("02_matching.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
