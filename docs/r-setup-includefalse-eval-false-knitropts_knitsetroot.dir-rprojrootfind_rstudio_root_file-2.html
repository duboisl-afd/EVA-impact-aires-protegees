<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 8 {r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 8 {r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="vuillota/EVA-impact-aires-protegees.git" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 8 {r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Antoine Vuillot" />
<meta name="author" content="Ingrid Dallmann" />
<meta name="author" content="LÃ©a Poulin" />
<meta name="author" content="Pierre-Yves Durand" />


<meta name="date" content="2023-09-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="miscellaneous-statistics.html"/>
<link rel="next" href="matching.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Impact analysis of protected areas funded by the AFD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this website</a></li>
<li class="chapter" data-level="1" data-path="building-the-datasets.html"><a href="building-the-datasets.html"><i class="fa fa-check"></i><b>1</b> Building the datasets</a>
<ul>
<li class="chapter" data-level="1.1" data-path="building-the-datasets.html"><a href="building-the-datasets.html#initial-settings"><i class="fa fa-check"></i><b>1.1</b> Initial settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><i class="fa fa-check"></i><b>2</b> <code>{r setup, include = FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#datasets-for-analysis"><i class="fa fa-check"></i><b>2.1</b> Datasets for analysis</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#merge-pas-reporting-by-afd-technical-departments"><i class="fa fa-check"></i><b>2.1.1</b> Merge PAs reporting by AFD technical departments</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#merge-the-list-of-pas-to-afd-project-information-and-wdpa"><i class="fa fa-check"></i><b>2.1.2</b> Merge the list of PAs to AFD project information and WDPA</a></li>
<li class="chapter" data-level="2.1.3" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#correct-errors"><i class="fa fa-check"></i><b>2.1.3</b> Correct errors</a></li>
<li class="chapter" data-level="2.1.4" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#tidy-the-datasets"><i class="fa fa-check"></i><b>2.1.4</b> Tidy the datasets</a></li>
<li class="chapter" data-level="2.1.5" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#dataset-with-only-afd-project-variables"><i class="fa fa-check"></i><b>2.1.5</b> Dataset with only AFD project variables</a></li>
<li class="chapter" data-level="2.1.6" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#dataset-for-non-confidential-analysis"><i class="fa fa-check"></i><b>2.1.6</b> Dataset for non-confidential analysis</a></li>
<li class="chapter" data-level="2.1.7" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#datasets-for-confidential-analysis"><i class="fa fa-check"></i><b>2.1.7</b> Datasets for confidential analysis</a></li>
<li class="chapter" data-level="2.1.8" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#a-polygon-dataset-for-specific-use"><i class="fa fa-check"></i><b>2.1.8</b> A polygon dataset for specific use</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#computing-total-areas-covered-by-pas-in-the-sample"><i class="fa fa-check"></i><b>2.2</b> Computing total areas covered by PAs in the sample</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#computations-of-polygons-area"><i class="fa fa-check"></i><b>2.2.1</b> Computations of polygonsâ area</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#computing-the-intersection-at-country-region-world-level"><i class="fa fa-check"></i><b>2.2.2</b> Computing the intersection at country, region, world level</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-include-false-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#computing-total-areas-without-intersection"><i class="fa fa-check"></i><b>2.2.3</b> Computing total areas without intersection</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Descriptive statistics</b></span></li>
<li class="chapter" data-level="3" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html"><i class="fa fa-check"></i><b>3</b> Projects funded by the AFD</a>
<ul>
<li class="chapter" data-level="3.1" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#initial-settings-1"><i class="fa fa-check"></i><b>3.1</b> Initial settings</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><i class="fa fa-check"></i><b>4</b> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#importing-the-datasets"><i class="fa fa-check"></i><b>4.1</b> Importing the datasets</a></li>
<li class="chapter" data-level="4.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#performing-descriptive-statistics"><i class="fa fa-check"></i><b>4.2</b> Performing descriptive statistics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#iucn-categories"><i class="fa fa-check"></i><b>4.2.1</b> IUCN categories</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#ecosystems-excluding-non-referenced-pas"><i class="fa fa-check"></i><b>4.2.2</b> Ecosystems (excluding non-referenced PAs)</a></li>
<li class="chapter" data-level="4.2.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#distribution-and-surface-of-pas-across-countries-and-regions"><i class="fa fa-check"></i><b>4.2.3</b> Distribution (# and surface) of PAs across countries and regions</a></li>
<li class="chapter" data-level="4.2.4" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#surface-of-pas"><i class="fa fa-check"></i><b>4.2.4</b> Surface of PAs</a></li>
<li class="chapter" data-level="4.2.5" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#temporal-evolution"><i class="fa fa-check"></i><b>4.2.5</b> Temporal evolution</a></li>
<li class="chapter" data-level="4.2.6" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file.html#governance"><i class="fa fa-check"></i><b>4.2.6</b> Governance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html"><i class="fa fa-check"></i><b>5</b> Biodiversity in the protected areas</a>
<ul>
<li class="chapter" data-level="5.1" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#importing-packages-and-functions"><i class="fa fa-check"></i><b>5.1</b> Importing packages and functions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><i class="fa fa-check"></i><b>6</b> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())  #</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#setting-the-environment"><i class="fa fa-check"></i><b>6.1</b> Setting the environment</a></li>
<li class="chapter" data-level="6.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#importing-pas-datasets"><i class="fa fa-check"></i><b>6.2</b> Importing PAs datasets</a></li>
<li class="chapter" data-level="6.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#downloading-data-of-interests-and-compute-relevant-indicators"><i class="fa fa-check"></i><b>6.3</b> Downloading data of interests and compute relevant indicators</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#creating-the-portfolio"><i class="fa fa-check"></i><b>6.3.1</b> Creating the portfolio</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#test-importing-data-from-sspcloud"><i class="fa fa-check"></i><b>6.3.2</b> TEST : importing data from SSPCloud</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#compute-indicators-from-geospatial-data"><i class="fa fa-check"></i><b>6.3.3</b> Compute indicators from geospatial data</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#computing-statistics"><i class="fa fa-check"></i><b>6.4</b> Computing statistics</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#forests"><i class="fa fa-check"></i><b>6.4.1</b> Forests</a></li>
<li class="chapter" data-level="6.4.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#mangrove"><i class="fa fa-check"></i><b>6.4.2</b> Mangrove</a></li>
<li class="chapter" data-level="6.4.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#emissions"><i class="fa fa-check"></i><b>6.4.3</b> Emissions</a></li>
<li class="chapter" data-level="6.4.4" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-1.html#biometeow"><i class="fa fa-check"></i><b>6.4.4</b> Biome/TEOW</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="miscellaneous-statistics.html"><a href="miscellaneous-statistics.html"><i class="fa fa-check"></i><b>7</b> Miscellaneous statistics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="miscellaneous-statistics.html"><a href="miscellaneous-statistics.html#initial-settings-2"><i class="fa fa-check"></i><b>7.1</b> Initial settings</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><i class="fa fa-check"></i><b>8</b> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#importing-datasets"><i class="fa fa-check"></i><b>8.1</b> Importing datasets</a></li>
<li class="chapter" data-level="8.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#performing-descriptive-statistics-1"><i class="fa fa-check"></i><b>8.2</b> Performing descriptive statistics</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#fapbm-portfolio-and-madagascar"><i class="fa fa-check"></i><b>8.2.1</b> FAPBM portfolio and Madagascar</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#evolution-of-tree-cover-and-deforestation"><i class="fa fa-check"></i><b>8.3</b> Evolution of tree cover and deforestation</a></li>
</ul></li>
<li class="part"><span><b>Impact analysis</b></span></li>
<li class="chapter" data-level="9" data-path="matching.html"><a href="matching.html"><i class="fa fa-check"></i><b>9</b> Matching</a>
<ul>
<li class="chapter" data-level="9.1" data-path="matching.html"><a href="matching.html#initial-settings-3"><i class="fa fa-check"></i><b>9.1</b> Initial settings</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html"><i class="fa fa-check"></i><b>10</b> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())  #</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html#datasets-and-critical-parameters"><i class="fa fa-check"></i><b>10.1</b> Datasets and critical parameters</a></li>
<li class="chapter" data-level="10.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-3.html#matching-process"><i class="fa fa-check"></i><b>10.2</b> Matching process</a></li>
</ul></li>
<li class="part"><span><b>Impact analysis</b></span></li>
<li class="chapter" data-level="11" data-path="difference-in-difference.html"><a href="difference-in-difference.html"><i class="fa fa-check"></i><b>11</b> Difference-in-difference</a>
<ul>
<li class="chapter" data-level="11.1" data-path="difference-in-difference.html"><a href="difference-in-difference.html#initial-settings-4"><i class="fa fa-check"></i><b>11.1</b> Initial settings</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><i class="fa fa-check"></i><b>12</b> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #  #</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#load-datasets-and-define-critical-parameters"><i class="fa fa-check"></i><b>12.1</b> Load datasets and define critical parameters</a></li>
<li class="chapter" data-level="12.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#computing-treatment-effects-at-protected-area-level"><i class="fa fa-check"></i><b>12.2</b> Computing treatment effects at protected area level</a></li>
<li class="chapter" data-level="12.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#compute-aggregated-metrics-at-country-and-region-level"><i class="fa fa-check"></i><b>12.3</b> Compute aggregated metrics at country and region level</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#aggregation-of-treatment-effects"><i class="fa fa-check"></i><b>12.3.1</b> Aggregation of treatment effects</a></li>
<li class="chapter" data-level="12.3.2" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#aggregation-of-annual-deforestation-rates"><i class="fa fa-check"></i><b>12.3.2</b> Aggregation of annual deforestation rates</a></li>
<li class="chapter" data-level="12.3.3" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#average-and-total-forest-loss-on-the-period-at-country-and-region-level"><i class="fa fa-check"></i><b>12.3.3</b> Average and total forest loss on the period, at country and region level</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#display-treatment-effects-in-figures-and-tables"><i class="fa fa-check"></i><b>12.4</b> Display treatment effects in figures and tables</a></li>
<li class="chapter" data-level="12.5" data-path="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-4.html#section"><i class="fa fa-check"></i><b>12.5</b> </a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="functions-for-matching-pre--and-post-processing.html"><a href="functions-for-matching-pre--and-post-processing.html"><i class="fa fa-check"></i><b>A</b> Functions for matching pre- and post-processing</a></li>
<li class="chapter" data-level="B" data-path="functions-for-difference-in-difference-computations.html"><a href="functions-for-difference-in-difference-computations.html"><i class="fa fa-check"></i><b>B</b> Functions for difference-in-difference computations</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Section 8</span> <code>{r setup, include=FALSE, eval = FALSE} # knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #</code><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Installing and importing relevant packages.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;stargazer&quot;</span>, <span class="st">&quot;janitor&quot;</span>, <span class="st">&quot;questionr&quot;</span>, <span class="st">&quot;countrycode&quot;</span>, <span class="st">&quot;WDI&quot;</span>))</span>
<span id="cb85-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb85-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-3" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb85-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb85-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-5" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb85-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-6" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  </span>
<span id="cb85-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-7" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb85-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-8" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb85-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-9" tabindex="-1"></a><span class="fu">library</span>(countrycode)</span>
<span id="cb85-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-10" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb85-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-11" tabindex="-1"></a><span class="co">#library(readxl)</span></span>
<span id="cb85-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-12" tabindex="-1"></a><span class="co">#library(splitstackshape) </span></span>
<span id="cb85-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-13" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb85-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-14" tabindex="-1"></a><span class="fu">library</span>(xtable)</span>
<span id="cb85-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-15" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb85-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-16" tabindex="-1"></a><span class="fu">library</span>(aws.s3)</span>
<span id="cb85-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-17" tabindex="-1"></a><span class="fu">library</span>(WDI)</span>
<span id="cb85-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb85-18" tabindex="-1"></a><span class="fu">library</span>(countrycode)</span></code></pre></div>
<div id="importing-datasets" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Importing datasets<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#importing-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A dataset with information for each protected area funded by the AFD, and datasets on aggregated size at country/region/world level and by year. The latter takes into account potential overlap between PAs reported in the World Database on Protected Areas (WDPA).</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-1" tabindex="-1"></a><span class="co">#Dataset of AFD supported protected area, with one line per protected area</span></span>
<span id="cb86-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-2" tabindex="-1"></a>data_stat_nodupl <span class="ot">=</span> </span>
<span id="cb86-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-3" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/BDD_PA_AFD_nofund_nodupl.csv&quot; , encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb86-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-4" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb86-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-5" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb86-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-6" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb86-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-7" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb86-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-8" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/BDD_PA_AFD_nofund_nodupl.csv&quot;</span>,</span>
<span id="cb86-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-9" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb86-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-10" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb86-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-11" tabindex="-1"></a></span>
<span id="cb86-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-12" tabindex="-1"></a><span class="co"># Portfolio of protected areas supported by the FAPBM</span></span>
<span id="cb86-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-13" tabindex="-1"></a>data_pa_fapbm <span class="ot">=</span> </span>
<span id="cb86-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-14" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/BDD_PA_AFD_ie.csv&quot; , encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb86-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-15" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb86-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-16" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb86-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-17" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb86-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-18" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/BDD_PA_FAPBM.csv&quot;</span>,</span>
<span id="cb86-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-19" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb86-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-20" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb86-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-21" tabindex="-1"></a></span>
<span id="cb86-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-22" tabindex="-1"></a><span class="co">#Import WDPA data</span></span>
<span id="cb86-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-23" tabindex="-1"></a><span class="do">## Download and save data</span></span>
<span id="cb86-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-24" tabindex="-1"></a><span class="co"># data_wdpa = wdpa_fetch(x = &quot;global&quot;, wait = TRUE, download_dir = &quot;data_raw&quot;,</span></span>
<span id="cb86-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-25" tabindex="-1"></a><span class="co">#                        page_wait = 2, verbose = TRUE)</span></span>
<span id="cb86-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-26" tabindex="-1"></a><span class="co"># st_write(wdpa,</span></span>
<span id="cb86-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-27" tabindex="-1"></a><span class="co">#          dsn = &quot;data_raw/wdpa/wdpa_shp_global_raw.gpkg&quot;,</span></span>
<span id="cb86-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-28" tabindex="-1"></a><span class="co">#          delete_dsn = TRUE)</span></span>
<span id="cb86-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-29" tabindex="-1"></a><span class="do">## Load data</span></span>
<span id="cb86-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-30" tabindex="-1"></a>data_wdpa <span class="ot">=</span> </span>
<span id="cb86-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-31" tabindex="-1"></a>  <span class="co">#st_read(&quot;data_raw/wdpa/wdpa_shp_global_raw.gpkg&quot;) %&gt;%</span></span>
<span id="cb86-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-32" tabindex="-1"></a>  <span class="fu">s3read_using</span>(sf<span class="sc">::</span>st_read,</span>
<span id="cb86-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-33" tabindex="-1"></a>              <span class="at">object =</span> <span class="st">&quot;data_raw/wdpa/wdpa_shp_global_raw.gpkg&quot;</span>,</span>
<span id="cb86-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-34" tabindex="-1"></a>              <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb86-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-35" tabindex="-1"></a>              <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb86-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-36" tabindex="-1"></a>  <span class="co">#st_drop_geometry() %&gt;%</span></span>
<span id="cb86-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-37" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb86-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-38" tabindex="-1"></a>  <span class="co">#Add region, sub-region and country names </span></span>
<span id="cb86-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-39" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">countrycode</span>(<span class="at">sourcevar =</span> iso3,</span>
<span id="cb86-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-40" tabindex="-1"></a>                              <span class="at">origin =</span> <span class="st">&quot;iso3c&quot;</span>,</span>
<span id="cb86-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-41" tabindex="-1"></a>                              <span class="at">destination =</span> <span class="st">&quot;un.region.name&quot;</span>),</span>
<span id="cb86-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-42" tabindex="-1"></a>         <span class="at">sub_region =</span> <span class="fu">countrycode</span>(<span class="at">sourcevar =</span> iso3,</span>
<span id="cb86-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-43" tabindex="-1"></a>                              <span class="at">origin =</span> <span class="st">&quot;iso3c&quot;</span>,</span>
<span id="cb86-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-44" tabindex="-1"></a>                              <span class="at">destination =</span> <span class="st">&quot;un.regionsub.name&quot;</span>),</span>
<span id="cb86-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-45" tabindex="-1"></a>         <span class="at">country_en =</span> <span class="fu">countrycode</span>(<span class="at">sourcevar =</span> iso3,</span>
<span id="cb86-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-46" tabindex="-1"></a>                              <span class="at">origin =</span> <span class="st">&quot;iso3c&quot;</span>,</span>
<span id="cb86-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-47" tabindex="-1"></a>                              <span class="at">destination =</span> <span class="st">&quot;un.name.en&quot;</span>),</span>
<span id="cb86-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-48" tabindex="-1"></a>         <span class="at">country_fr =</span> <span class="fu">countrycode</span>(<span class="at">sourcevar =</span> iso3,</span>
<span id="cb86-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-49" tabindex="-1"></a>                              <span class="at">origin =</span> <span class="st">&quot;iso3c&quot;</span>,</span>
<span id="cb86-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-50" tabindex="-1"></a>                              <span class="at">destination =</span> <span class="st">&quot;un.name.fr&quot;</span>),</span>
<span id="cb86-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-51" tabindex="-1"></a>         <span class="at">.after =</span> <span class="st">&quot;iso3&quot;</span>) </span>
<span id="cb86-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-52" tabindex="-1"></a></span>
<span id="cb86-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-53" tabindex="-1"></a><span class="co">#Subset of WDPA data for Madagascar, with IUCN category description (English and French)</span></span>
<span id="cb86-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-54" tabindex="-1"></a>data_wdpa_mdg <span class="ot">=</span> data_wdpa <span class="sc">%&gt;%</span></span>
<span id="cb86-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-55" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb86-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-56" tabindex="-1"></a>  <span class="co">#Add the description of IUCN from its category</span></span>
<span id="cb86-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-57" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">iucn_des_fr =</span> <span class="fu">case_when</span>(</span>
<span id="cb86-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-58" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Ia&quot;</span> <span class="sc">~</span> <span class="st">&quot;RÃ©serve naturelle intÃ©grale&quot;</span>,</span>
<span id="cb86-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-59" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Ib&quot;</span> <span class="sc">~</span> <span class="st">&quot;Zone de nature sauvage&quot;</span>,</span>
<span id="cb86-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-60" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;II&quot;</span> <span class="sc">~</span> <span class="st">&quot;Parc national&quot;</span>, </span>
<span id="cb86-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-61" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;III&quot;</span> <span class="sc">~</span> <span class="st">&quot;Monument naturel&quot;</span>,</span>
<span id="cb86-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-62" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;IV&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gest. des habitats/espÃ¨ces&quot;</span>,</span>
<span id="cb86-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-63" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;V&quot;</span> <span class="sc">~</span> <span class="st">&quot;Paysage protÃ©gÃ©&quot;</span>,</span>
<span id="cb86-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-64" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;VI&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gest. de ress. protÃ©gÃ©es&quot;</span>,</span>
<span id="cb86-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-65" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Applicable&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>,</span>
<span id="cb86-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-66" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>,</span>
<span id="cb86-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-67" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Assigned&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>,</span>
<span id="cb86-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-68" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Non rÃ©fÃ©rencÃ©e&quot;</span>), <span class="at">.after =</span> iucn_cat) <span class="sc">%&gt;%</span></span>
<span id="cb86-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-69" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">iucn_des_en =</span> <span class="fu">case_when</span>(</span>
<span id="cb86-70"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-70" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Ia&quot;</span> <span class="sc">~</span> <span class="st">&quot;Strict nature reserve&quot;</span>,</span>
<span id="cb86-71"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-71" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Ib&quot;</span> <span class="sc">~</span> <span class="st">&quot;Wilderness area&quot;</span>,</span>
<span id="cb86-72"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-72" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;II&quot;</span> <span class="sc">~</span> <span class="st">&quot;National park&quot;</span>,</span>
<span id="cb86-73"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-73" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;III&quot;</span> <span class="sc">~</span> <span class="st">&quot;Natural monument or feature&quot;</span>,</span>
<span id="cb86-74"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-74" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;IV&quot;</span> <span class="sc">~</span> <span class="st">&quot;Habitat or species management area&quot;</span>,</span>
<span id="cb86-75"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-75" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;V&quot;</span> <span class="sc">~</span> <span class="st">&quot;Protected landscape or seascape&quot;</span>,</span>
<span id="cb86-76"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-76" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;VI&quot;</span> <span class="sc">~</span> <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span>,</span>
<span id="cb86-77"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-77" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Applicable&quot;</span> <span class="sc">~</span> <span class="st">&quot;Not categorized&quot;</span>,</span>
<span id="cb86-78"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-78" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">~</span> <span class="st">&quot;Not categorized&quot;</span>,</span>
<span id="cb86-79"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-79" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(wdpaid) <span class="sc">&amp;</span> iucn_cat <span class="sc">==</span> <span class="st">&quot;Not Assigned&quot;</span> <span class="sc">~</span> <span class="st">&quot;Not categorized&quot;</span>,</span>
<span id="cb86-80"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-80" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>), <span class="at">.after =</span> iucn_cat) <span class="sc">%&gt;%</span></span>
<span id="cb86-81"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-81" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()</span>
<span id="cb86-82"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-82" tabindex="-1"></a></span>
<span id="cb86-83"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-83" tabindex="-1"></a><span class="co">#To perform statistics on the distribution of PAs reported by the WDPA across countries/regions, we focus on not high-income countries.</span></span>
<span id="cb86-84"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-84" tabindex="-1"></a><span class="co">#Precisely, we restrict to countries defined as low-income, lower middle-income, upper-middle income, minus Russia, and including Chile, Uruguay New Caledonia and Panama</span></span>
<span id="cb86-85"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-85" tabindex="-1"></a>df_ctry_stat_wdpa <span class="ot">=</span> <span class="fu">WDI</span>(<span class="at">country =</span> <span class="st">&quot;all&quot;</span>, <span class="at">start =</span> <span class="st">&quot;1960&quot;</span>, <span class="at">end =</span> <span class="st">&quot;2022&quot;</span>, <span class="at">extra =</span> <span class="cn">TRUE</span>, <span class="at">language =</span> <span class="st">&quot;en&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb86-86"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-86" tabindex="-1"></a>  <span class="fu">group_by</span>(iso3c) <span class="sc">%&gt;%</span></span>
<span id="cb86-87"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-87" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb86-88"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-88" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb86-89"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-89" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&quot;iso3c&quot;</span>, <span class="st">&quot;income&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb86-90"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-90" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;iso3&quot;</span> <span class="ot">=</span> <span class="st">&quot;iso3c&quot;</span>,</span>
<span id="cb86-91"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-91" tabindex="-1"></a>         <span class="st">&quot;wb_inc_grp&quot;</span> <span class="ot">=</span> <span class="st">&quot;income&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb86-92"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-92" tabindex="-1"></a>  <span class="fu">filter</span>((wb_inc_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Low income&quot;</span>,  <span class="st">&quot;Lower middle income&quot;</span>, <span class="st">&quot;Upper middle income&quot;</span>) <span class="sc">&amp;</span> iso3 <span class="sc">!=</span> <span class="st">&quot;RUS&quot;</span>) <span class="sc">|</span> iso3 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CHL&quot;</span>, <span class="st">&quot;URY&quot;</span>, <span class="st">&quot;PAN&quot;</span>, <span class="st">&quot;NCL&quot;</span>))</span>
<span id="cb86-93"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-93" tabindex="-1"></a></span>
<span id="cb86-94"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb86-94" tabindex="-1"></a>lst_ctry_stat_wdpa <span class="ot">=</span> df_ctry_stat_wdpa<span class="sc">$</span>iso3</span></code></pre></div>
</div>
<div id="performing-descriptive-statistics-1" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Performing descriptive statistics<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#performing-descriptive-statistics-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="fapbm-portfolio-and-madagascar" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> FAPBM portfolio and Madagascar<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#fapbm-portfolio-and-madagascar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="iucn" class="section level4 hasAnchor" number="8.2.1.1">
<h4><span class="header-section-number">8.2.1.1</span> IUCN<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#iucn" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>FAPBM</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-1" tabindex="-1"></a><span class="co">#Building the relevant dataset</span></span>
<span id="cb87-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-2" tabindex="-1"></a><span class="do">##For all PAs ..</span></span>
<span id="cb87-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-3" tabindex="-1"></a>data_cat_iucn <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb87-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-4" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-5" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb87-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-6" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb87-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-7" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb87-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb87-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-9" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb87-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb87-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-11" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-12" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb87-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb87-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-14" tabindex="-1"></a></span>
<span id="cb87-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-15" tabindex="-1"></a></span>
<span id="cb87-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-16" tabindex="-1"></a><span class="do">##... and for referenced PAs only</span></span>
<span id="cb87-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-17" tabindex="-1"></a>data_cat_iucn_ref <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb87-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-18" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-19" tabindex="-1"></a>  <span class="co">#Remove not referenced PAs</span></span>
<span id="cb87-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-20" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="sc">!</span>(iucn_des_fr <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>, <span class="st">&quot;Non rÃ©fÃ©rencÃ©e&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb87-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-21" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb87-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-22" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb87-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-23" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb87-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-24" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb87-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-25" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb87-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb87-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-27" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-28" tabindex="-1"></a>  <span class="fu">arrange</span>(freq_iucn) <span class="sc">%&gt;%</span></span>
<span id="cb87-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-29" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb87-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-30" tabindex="-1"></a></span>
<span id="cb87-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-31" tabindex="-1"></a><span class="co">#Pie charts</span></span>
<span id="cb87-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-32" tabindex="-1"></a>pie_cat_iucn_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn, </span>
<span id="cb87-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-33" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb87-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-34" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-35" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-36" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb87-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-37" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb87-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-38" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb87-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-39" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-40" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb87-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-41" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb87-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-42" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb87-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-43" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb87-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-44" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb87-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-45" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories (%)&quot;</span>,</span>
<span id="cb87-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-46" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn), <span class="st">&quot;non-marine protected areas funded by FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-47" tabindex="-1"></a>  <span class="co">#+ scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb87-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-48" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb87-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-49" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb87-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-50" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb87-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-51" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb87-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-52" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb87-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-53" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb87-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-54" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-55" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb87-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-56" tabindex="-1"></a>pie_cat_iucn_en</span>
<span id="cb87-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-57" tabindex="-1"></a></span>
<span id="cb87-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-58" tabindex="-1"></a>pie_cat_iucn_ref_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn_ref, </span>
<span id="cb87-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-59" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb87-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-60" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-61" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-62" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb87-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-63" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb87-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-64" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb87-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-65" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-66" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb87-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-67" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb87-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-68" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb87-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-69" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb87-70"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-70" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb87-71"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-71" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories </span><span class="sc">\n</span><span class="st">except for not categorized (%)&quot;</span>,</span>
<span id="cb87-72"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-72" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn_ref<span class="sc">$</span>n_iucn), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn),  <span class="st">&quot;non-marine protected areas funded by FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-73"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-73" tabindex="-1"></a>  <span class="co">#+ scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb87-74"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-74" tabindex="-1"></a>    <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb87-75"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-75" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb87-76"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-76" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb87-77"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-77" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb87-78"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-78" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb87-79"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-79" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb87-80"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-80" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb87-81"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-81" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb87-82"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb87-82" tabindex="-1"></a>pie_cat_iucn_ref_en</span></code></pre></div>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb88-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-2" tabindex="-1"></a></span>
<span id="cb88-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb88-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-4" tabindex="-1"></a></span>
<span id="cb88-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb88-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_en,</span>
<span id="cb88-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb88-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb88-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-9" tabindex="-1"></a></span>
<span id="cb88-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_ref_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb88-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-11" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_ref_en,</span>
<span id="cb88-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb88-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb88-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-14" tabindex="-1"></a></span>
<span id="cb88-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb88-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-16" tabindex="-1"></a></span>
<span id="cb88-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb88-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb88-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb88-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-21" tabindex="-1"></a>  {</span>
<span id="cb88-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-22" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb88-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-23" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb88-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-24" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/IUCN/FAPBM/no_marine&quot;</span>, </span>
<span id="cb88-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-25" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-26" tabindex="-1"></a>  }</span>
<span id="cb88-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-27" tabindex="-1"></a></span>
<span id="cb88-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-28" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb88-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-29" tabindex="-1"></a></span>
<span id="cb88-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb88-30" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>All protected areas in Madagascar (reported by the WDPA)</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-1" tabindex="-1"></a><span class="co">#Building the relevant dataset</span></span>
<span id="cb89-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-2" tabindex="-1"></a><span class="do">##For all PAs ..</span></span>
<span id="cb89-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-3" tabindex="-1"></a>data_cat_iucn <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-4" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-5" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb89-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-6" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb89-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-7" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb89-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-9" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb89-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb89-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-11" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-12" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb89-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb89-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-14" tabindex="-1"></a></span>
<span id="cb89-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-15" tabindex="-1"></a></span>
<span id="cb89-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-16" tabindex="-1"></a><span class="do">##... and for referenced PAs only</span></span>
<span id="cb89-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-17" tabindex="-1"></a>data_cat_iucn_ref <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb89-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-18" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-19" tabindex="-1"></a>  <span class="co">#Remove not referenced PAs</span></span>
<span id="cb89-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-20" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="sc">!</span>(iucn_des_fr <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>, <span class="st">&quot;Non rÃ©fÃ©rencÃ©e&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb89-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-21" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb89-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-22" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb89-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-23" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb89-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-24" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-25" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb89-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb89-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-27" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-28" tabindex="-1"></a>  <span class="fu">arrange</span>(freq_iucn) <span class="sc">%&gt;%</span></span>
<span id="cb89-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-29" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb89-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-30" tabindex="-1"></a></span>
<span id="cb89-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-31" tabindex="-1"></a><span class="co">#Pie charts</span></span>
<span id="cb89-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-32" tabindex="-1"></a>pie_cat_iucn_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn, </span>
<span id="cb89-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-33" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb89-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-34" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-35" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-36" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb89-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-37" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb89-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-38" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb89-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-39" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-40" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb89-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-41" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb89-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-42" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb89-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-43" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb89-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-44" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb89-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-45" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories (%)&quot;</span>,</span>
<span id="cb89-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-46" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn), <span class="st">&quot;non-marine protected areas in Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-47" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb89-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-48" tabindex="-1"></a>      <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb89-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-49" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb89-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-50" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb89-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-51" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb89-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-52" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb89-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-53" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb89-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-54" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-55" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb89-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-56" tabindex="-1"></a>pie_cat_iucn_en</span>
<span id="cb89-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-57" tabindex="-1"></a></span>
<span id="cb89-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-58" tabindex="-1"></a>pie_cat_iucn_ref_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn_ref, </span>
<span id="cb89-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-59" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb89-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-60" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-61" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-62" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb89-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-63" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb89-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-64" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb89-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-65" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-66" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb89-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-67" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb89-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-68" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb89-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-69" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb89-70"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-70" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb89-71"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-71" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories </span><span class="sc">\n</span><span class="st">except for not categorized (%)&quot;</span>,</span>
<span id="cb89-72"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-72" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn_ref<span class="sc">$</span>n_iucn), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn),  <span class="st">&quot;non-marine protected areas in Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-73"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-73" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb89-74"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-74" tabindex="-1"></a>    <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb89-75"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-75" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb89-76"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-76" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb89-77"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-77" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb89-78"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-78" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb89-79"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-79" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb89-80"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-80" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-81"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-81" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb89-82"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb89-82" tabindex="-1"></a>pie_cat_iucn_ref_en</span></code></pre></div>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb90-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-2" tabindex="-1"></a></span>
<span id="cb90-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb90-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-4" tabindex="-1"></a></span>
<span id="cb90-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb90-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_en,</span>
<span id="cb90-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb90-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb90-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-9" tabindex="-1"></a></span>
<span id="cb90-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_ref_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb90-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-11" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_ref_en,</span>
<span id="cb90-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb90-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb90-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-14" tabindex="-1"></a></span>
<span id="cb90-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb90-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-16" tabindex="-1"></a></span>
<span id="cb90-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb90-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb90-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb90-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb90-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-21" tabindex="-1"></a>  {</span>
<span id="cb90-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-22" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb90-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-23" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb90-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-24" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/IUCN/MDG/no_marine&quot;</span>, </span>
<span id="cb90-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-25" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb90-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-26" tabindex="-1"></a>  }</span>
<span id="cb90-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-27" tabindex="-1"></a></span>
<span id="cb90-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-28" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb90-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-29" tabindex="-1"></a></span>
<span id="cb90-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb90-30" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Madagascar protected areas without FAPBM funded protected areas.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-1" tabindex="-1"></a><span class="co">#Building the relevant dataset</span></span>
<span id="cb91-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-2" tabindex="-1"></a><span class="do">##For all PAs ..</span></span>
<span id="cb91-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-3" tabindex="-1"></a>data_cat_iucn <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb91-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-4" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb91-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-6" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb91-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-7" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb91-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb91-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-9" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-10" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb91-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb91-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-12" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-13" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb91-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb91-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-15" tabindex="-1"></a></span>
<span id="cb91-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-16" tabindex="-1"></a></span>
<span id="cb91-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-17" tabindex="-1"></a><span class="do">##... and for referenced PAs only</span></span>
<span id="cb91-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-18" tabindex="-1"></a>data_cat_iucn_ref <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb91-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-19" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-20" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb91-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-21" tabindex="-1"></a>  <span class="co">#Remove not referenced PAs</span></span>
<span id="cb91-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-22" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="sc">!</span>(iucn_des_fr <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Non catÃ©gorisÃ©e&quot;</span>, <span class="st">&quot;Non rÃ©fÃ©rencÃ©e&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb91-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-23" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des_en, iucn_des_fr) <span class="sc">%&gt;%</span></span>
<span id="cb91-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-24" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb91-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-25" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb91-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-26" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-27" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb91-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-28" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb91-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-29" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-30" tabindex="-1"></a>  <span class="fu">arrange</span>(freq_iucn) <span class="sc">%&gt;%</span></span>
<span id="cb91-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-31" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb91-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-32" tabindex="-1"></a></span>
<span id="cb91-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-33" tabindex="-1"></a><span class="co">#Pie charts</span></span>
<span id="cb91-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-34" tabindex="-1"></a>pie_cat_iucn_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn, </span>
<span id="cb91-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-35" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb91-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-36" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-37" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-38" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb91-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-39" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb91-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-40" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb91-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-41" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-42" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb91-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-43" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb91-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-44" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb91-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-45" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb91-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-46" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb91-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-47" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories (%)&quot;</span>,</span>
<span id="cb91-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-48" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn), <span class="st">&quot;non-marine, not FAPBM funded protected areas in Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-49" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb91-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-50" tabindex="-1"></a>      <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb91-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-51" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb91-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-52" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb91-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-53" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb91-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-54" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb91-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-55" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb91-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-56" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-57" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb91-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-58" tabindex="-1"></a>pie_cat_iucn_en</span>
<span id="cb91-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-59" tabindex="-1"></a></span>
<span id="cb91-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-60" tabindex="-1"></a>pie_cat_iucn_ref_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn_ref, </span>
<span id="cb91-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-61" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des_en)) <span class="sc">%&gt;%</span></span>
<span id="cb91-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-62" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-63" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-64" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb91-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-65" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb91-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-66" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb91-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-67" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-68" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb91-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-69" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb91-70"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-70" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb91-71"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-71" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb91-72"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-72" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb91-73"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-73" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Distribution of non-marine protected areas by IUCN categories </span><span class="sc">\n</span><span class="st">except for not categorized (%)&quot;</span>,</span>
<span id="cb91-74"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-74" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn_ref<span class="sc">$</span>n_iucn), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn),  <span class="st">&quot;non-marine, not FAPBM funded protected areas in Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-75"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-75" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Categories&quot;, palette = &quot;Dark2&quot;) %&gt;%</span></span>
<span id="cb91-76"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-76" tabindex="-1"></a>    <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Categories&quot;</span>,</span>
<span id="cb91-77"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-77" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not categorized&quot;</span> <span class="ot">=</span> <span class="st">&quot;#7570B3&quot;</span>,</span>
<span id="cb91-78"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-78" tabindex="-1"></a>                                 <span class="st">&quot;Habitat or species management area&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E7298A&quot;</span>,</span>
<span id="cb91-79"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-79" tabindex="-1"></a>                                 <span class="st">&quot;Protected landscape or seascape&quot;</span> <span class="ot">=</span> <span class="st">&quot;#66A61E&quot;</span>,</span>
<span id="cb91-80"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-80" tabindex="-1"></a>                                 <span class="st">&quot;Protected area with sust. use of nat. res.&quot;</span> <span class="ot">=</span> <span class="st">&quot;#D95F02&quot;</span>,</span>
<span id="cb91-81"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-81" tabindex="-1"></a>                                 <span class="st">&quot;National park&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1B9E77&quot;</span>,</span>
<span id="cb91-82"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-82" tabindex="-1"></a>                                 <span class="st">&quot;Strict nature reserve&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E6AB02&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-83"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-83" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb91-84"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb91-84" tabindex="-1"></a>pie_cat_iucn_ref_en</span></code></pre></div>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb92-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-2" tabindex="-1"></a></span>
<span id="cb92-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb92-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-4" tabindex="-1"></a></span>
<span id="cb92-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb92-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_en,</span>
<span id="cb92-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb92-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb92-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-9" tabindex="-1"></a></span>
<span id="cb92-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_ref_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb92-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-11" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_ref_en,</span>
<span id="cb92-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb92-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb92-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-14" tabindex="-1"></a></span>
<span id="cb92-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb92-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-16" tabindex="-1"></a></span>
<span id="cb92-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb92-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb92-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb92-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-21" tabindex="-1"></a>  {</span>
<span id="cb92-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-22" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb92-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-23" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb92-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-24" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/IUCN/MDG_noFAPBM/no_marine&quot;</span>, </span>
<span id="cb92-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-25" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-26" tabindex="-1"></a>  }</span>
<span id="cb92-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-27" tabindex="-1"></a></span>
<span id="cb92-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-28" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb92-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-29" tabindex="-1"></a></span>
<span id="cb92-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb92-30" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="ecosystem" class="section level4 hasAnchor" number="8.2.1.2">
<h4><span class="header-section-number">8.2.1.2</span> Ecosystem<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#ecosystem" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>FAPBM funded protected areas.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-1" tabindex="-1"></a><span class="co">#Build datasets</span></span>
<span id="cb93-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-2" tabindex="-1"></a>data_eco <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-3" tabindex="-1"></a>  <span class="co">#subset non-referencded PAs (have NA ecosysteme)</span></span>
<span id="cb93-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-4" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="fu">is.na</span>(marine) <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marine =</span> <span class="fu">as.factor</span>(marine))</span>
<span id="cb93-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-6" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_en <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb93-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-7" tabindex="-1"></a>                              <span class="st">&quot;Terrestrial&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb93-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-8" tabindex="-1"></a>                              <span class="st">&quot;Coastal&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb93-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-9" tabindex="-1"></a>                              <span class="st">&quot;Marine&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb93-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-10" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_fr <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb93-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-11" tabindex="-1"></a>                              <span class="st">&quot;Terrestre&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb93-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-12" tabindex="-1"></a>                              <span class="st">&quot;CÃ´tier&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb93-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-13" tabindex="-1"></a>                              <span class="st">&quot;Marin&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb93-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-14" tabindex="-1"></a></span>
<span id="cb93-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-15" tabindex="-1"></a>data_eco_hist <span class="ot">=</span> data_eco <span class="sc">%&gt;%</span></span>
<span id="cb93-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-16" tabindex="-1"></a>  <span class="fu">group_by</span>(ecosyst_en, ecosyst_fr) <span class="sc">%&gt;%</span></span>
<span id="cb93-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-17" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb93-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-18" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_eco), <span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-19" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb93-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-20" tabindex="-1"></a></span>
<span id="cb93-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-21" tabindex="-1"></a><span class="co">#Histogram in number (in English)</span></span>
<span id="cb93-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-22" tabindex="-1"></a>pie_eco_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb93-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-23" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb93-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-24" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-25" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(freq, <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb93-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-26" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb93-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-27" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-28" tabindex="-1"></a><span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-29" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type&quot;</span>,</span>
<span id="cb93-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-30" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas funded by the FAPBM&quot;</span>),</span>
<span id="cb93-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-31" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb93-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-32" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-33" tabindex="-1"></a>  <span class="co">#+ scale_fill_brewer(name = &quot;Ecosystem&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb93-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-34" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Ecosystem&quot;</span>,</span>
<span id="cb93-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-35" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Marine&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb93-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-36" tabindex="-1"></a>                                 <span class="st">&quot;Terrestrial&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb93-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-37" tabindex="-1"></a>                                 <span class="st">&quot;Coastal&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb93-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-38" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb93-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb93-39" tabindex="-1"></a>pie_eco_en</span></code></pre></div>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb94-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-2" tabindex="-1"></a></span>
<span id="cb94-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb94-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-4" tabindex="-1"></a></span>
<span id="cb94-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_eco_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb94-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_eco_en,</span>
<span id="cb94-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb94-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb94-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-9" tabindex="-1"></a></span>
<span id="cb94-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-10" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb94-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-11" tabindex="-1"></a></span>
<span id="cb94-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-12" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb94-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-13" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-14" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb94-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-15" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb94-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-16" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb94-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-17" tabindex="-1"></a>{</span>
<span id="cb94-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-18" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb94-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-19" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb94-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-20" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb94-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-21" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/ecosysteme/FAPBM&quot;</span>, </span>
<span id="cb94-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-22" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-23" tabindex="-1"></a>  }</span>
<span id="cb94-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-24" tabindex="-1"></a></span>
<span id="cb94-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-25" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb94-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-26" tabindex="-1"></a></span>
<span id="cb94-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb94-27" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>All protected areas in Madagascar (reported by the WDPA)</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-1" tabindex="-1"></a><span class="co">#Build datasets</span></span>
<span id="cb95-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-2" tabindex="-1"></a>data_eco <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb95-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-3" tabindex="-1"></a>  <span class="co">#subset non-referencded PAs (have NA ecosysteme)</span></span>
<span id="cb95-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-4" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="fu">is.na</span>(marine) <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marine =</span> <span class="fu">as.factor</span>(marine))</span>
<span id="cb95-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-6" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_en <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb95-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-7" tabindex="-1"></a>                              <span class="st">&quot;Terrestrial&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb95-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-8" tabindex="-1"></a>                              <span class="st">&quot;Coastal&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb95-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-9" tabindex="-1"></a>                              <span class="st">&quot;Marine&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb95-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-10" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_fr <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb95-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-11" tabindex="-1"></a>                              <span class="st">&quot;Terrestre&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb95-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-12" tabindex="-1"></a>                              <span class="st">&quot;CÃ´tier&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb95-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-13" tabindex="-1"></a>                              <span class="st">&quot;Marin&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb95-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-14" tabindex="-1"></a></span>
<span id="cb95-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-15" tabindex="-1"></a>data_eco_hist <span class="ot">=</span> data_eco <span class="sc">%&gt;%</span></span>
<span id="cb95-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-16" tabindex="-1"></a>  <span class="fu">group_by</span>(ecosyst_en, ecosyst_fr) <span class="sc">%&gt;%</span></span>
<span id="cb95-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-17" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb95-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-18" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_eco), <span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-19" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb95-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-20" tabindex="-1"></a></span>
<span id="cb95-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-21" tabindex="-1"></a><span class="co">#Histogram in number (in English)</span></span>
<span id="cb95-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-22" tabindex="-1"></a>pie_eco_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb95-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-23" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb95-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-24" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-25" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(freq, <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb95-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-26" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb95-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-27" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-28" tabindex="-1"></a><span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-29" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type&quot;</span>,</span>
<span id="cb95-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-30" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas in Madagascar&quot;</span>),</span>
<span id="cb95-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-31" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb95-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-32" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-33" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Ecosystem&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb95-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-34" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Ecosystem&quot;</span>,</span>
<span id="cb95-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-35" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Marine&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb95-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-36" tabindex="-1"></a>                                 <span class="st">&quot;Terrestrial&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb95-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-37" tabindex="-1"></a>                                 <span class="st">&quot;Coastal&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb95-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-38" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb95-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb95-39" tabindex="-1"></a>pie_eco_en</span></code></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb96-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-2" tabindex="-1"></a></span>
<span id="cb96-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb96-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-4" tabindex="-1"></a></span>
<span id="cb96-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_eco_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb96-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_eco_en,</span>
<span id="cb96-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb96-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb96-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-9" tabindex="-1"></a></span>
<span id="cb96-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-10" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb96-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-11" tabindex="-1"></a></span>
<span id="cb96-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-12" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb96-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-13" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb96-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-14" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb96-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-15" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb96-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-16" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb96-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-17" tabindex="-1"></a>{</span>
<span id="cb96-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-18" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb96-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-19" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb96-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-20" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb96-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-21" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/ecosysteme/MDG&quot;</span>, </span>
<span id="cb96-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-22" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb96-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-23" tabindex="-1"></a>  }</span>
<span id="cb96-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-24" tabindex="-1"></a></span>
<span id="cb96-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-25" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb96-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-26" tabindex="-1"></a></span>
<span id="cb96-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb96-27" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Madagascar without FAPBM</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-1" tabindex="-1"></a><span class="co">#Build datasets</span></span>
<span id="cb97-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-2" tabindex="-1"></a>data_eco <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb97-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-3" tabindex="-1"></a>  <span class="co">#subset non-referencded PAs (have NA ecosysteme)</span></span>
<span id="cb97-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-4" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="fu">is.na</span>(marine) <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb97-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marine =</span> <span class="fu">as.factor</span>(marine))</span>
<span id="cb97-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-7" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_en <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb97-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-8" tabindex="-1"></a>                              <span class="st">&quot;Terrestrial&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb97-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-9" tabindex="-1"></a>                              <span class="st">&quot;Coastal&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb97-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-10" tabindex="-1"></a>                              <span class="st">&quot;Marine&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb97-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-11" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_fr <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb97-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-12" tabindex="-1"></a>                              <span class="st">&quot;Terrestre&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb97-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-13" tabindex="-1"></a>                              <span class="st">&quot;CÃ´tier&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb97-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-14" tabindex="-1"></a>                              <span class="st">&quot;Marin&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb97-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-15" tabindex="-1"></a></span>
<span id="cb97-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-16" tabindex="-1"></a>data_eco_hist <span class="ot">=</span> data_eco <span class="sc">%&gt;%</span></span>
<span id="cb97-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-17" tabindex="-1"></a>  <span class="fu">group_by</span>(ecosyst_en, ecosyst_fr) <span class="sc">%&gt;%</span></span>
<span id="cb97-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-18" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb97-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-19" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_eco), <span class="dv">2</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-20" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb97-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-21" tabindex="-1"></a></span>
<span id="cb97-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-22" tabindex="-1"></a><span class="co">#Histogram in number (in English)</span></span>
<span id="cb97-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-23" tabindex="-1"></a>pie_eco_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb97-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-24" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb97-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-25" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-26" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(freq, <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb97-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-27" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb97-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-28" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-29" tabindex="-1"></a><span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-30" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type&quot;</span>,</span>
<span id="cb97-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-31" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas in Madagascar, not funded by the FAPBM&quot;</span>),</span>
<span id="cb97-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-32" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb97-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-33" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-34" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Ecosystem&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb97-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-35" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Ecosystem&quot;</span>,</span>
<span id="cb97-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-36" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Marine&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb97-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-37" tabindex="-1"></a>                                 <span class="st">&quot;Terrestrial&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb97-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-38" tabindex="-1"></a>                                 <span class="st">&quot;Coastal&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb97-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-39" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb97-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb97-40" tabindex="-1"></a>pie_eco_en</span></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb98-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-2" tabindex="-1"></a></span>
<span id="cb98-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb98-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-4" tabindex="-1"></a></span>
<span id="cb98-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_eco_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb98-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-6" tabindex="-1"></a>       <span class="at">plot =</span> pie_eco_en,</span>
<span id="cb98-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb98-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb98-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-9" tabindex="-1"></a></span>
<span id="cb98-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-10" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb98-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-11" tabindex="-1"></a></span>
<span id="cb98-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-12" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb98-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-13" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb98-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-14" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb98-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-15" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb98-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-16" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb98-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-17" tabindex="-1"></a>{</span>
<span id="cb98-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-18" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb98-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-19" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb98-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-20" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb98-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-21" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/ecosysteme/MDG_noFAPBM&quot;</span>, </span>
<span id="cb98-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-22" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb98-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-23" tabindex="-1"></a>  }</span>
<span id="cb98-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-24" tabindex="-1"></a></span>
<span id="cb98-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-25" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb98-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-26" tabindex="-1"></a></span>
<span id="cb98-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb98-27" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="governance-1" class="section level4 hasAnchor" number="8.2.1.3">
<h4><span class="header-section-number">8.2.1.3</span> Governance<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#governance-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>FAPBM funded protected areas</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-1" tabindex="-1"></a><span class="co">#Table of the governance type distribution</span></span>
<span id="cb99-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-2" tabindex="-1"></a><span class="do">##English version</span></span>
<span id="cb99-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-3" tabindex="-1"></a>data_gov_en <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb99-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-4" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb99-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-6" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb99-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-7" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb99-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb99-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb99-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-10" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-11" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb99-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-12" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb99-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-13" tabindex="-1"></a></span>
<span id="cb99-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-14" tabindex="-1"></a>tbl_gov_en <span class="ot">=</span> data_gov_en</span>
<span id="cb99-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-15" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb99-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-16" tabindex="-1"></a></span>
<span id="cb99-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-17" tabindex="-1"></a></span>
<span id="cb99-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-18" tabindex="-1"></a><span class="co">#PAs with nureported or unreferenced governance types are removed</span></span>
<span id="cb99-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-19" tabindex="-1"></a><span class="do">##Tables</span></span>
<span id="cb99-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-20" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb99-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-21" tabindex="-1"></a>data_gov_knwn_en <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb99-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-22" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb99-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-24" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb99-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-25" tabindex="-1"></a>  <span class="fu">filter</span>(gov_type <span class="sc">!=</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">&amp;</span> gov_type <span class="sc">!=</span> <span class="st">&quot;Not referenced&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-26" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb99-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-27" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb99-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-28" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb99-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-29" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-30" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb99-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-31" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb99-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-32" tabindex="-1"></a></span>
<span id="cb99-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-33" tabindex="-1"></a>tbl_gov_knwn_en <span class="ot">=</span> data_gov_knwn_en</span>
<span id="cb99-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-34" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_knwn_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb99-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-35" tabindex="-1"></a></span>
<span id="cb99-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-36" tabindex="-1"></a></span>
<span id="cb99-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-37" tabindex="-1"></a><span class="do">##Pie charts</span></span>
<span id="cb99-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-38" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb99-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-39" tabindex="-1"></a>pie_gov_knwn_en <span class="ot">=</span> </span>
<span id="cb99-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-40" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_gov_knwn_en, </span>
<span id="cb99-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-41" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq, <span class="at">fill=</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb99-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-42" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-43" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, </span>
<span id="cb99-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-44" tabindex="-1"></a>                   <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(freq, <span class="at">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb99-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-45" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb99-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-46" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb99-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-47" tabindex="-1"></a>               <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-48" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb99-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-49" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Governance type of non-marine protected areas </span><span class="sc">\n</span><span class="st">except for not reported governance&quot;</span>,</span>
<span id="cb99-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-50" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_gov_knwn_en<span class="sc">$</span>n), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_gov_en<span class="sc">$</span>n), <span class="st">&quot;non-marine protected areas funded by FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-51" tabindex="-1"></a>  <span class="co"># + scale_fill_brewer(name = &quot;Governance&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb99-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-52" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Governance&quot;</span>,</span>
<span id="cb99-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-53" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not Reported&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>,</span>
<span id="cb99-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-54" tabindex="-1"></a>                                 <span class="st">&quot;Local communities&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb99-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-55" tabindex="-1"></a>                                 <span class="st">&quot;Government-delegated management&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb99-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-56" tabindex="-1"></a>                                 <span class="st">&quot;Non-profit organisations&quot;</span> <span class="ot">=</span> <span class="st">&quot;#33A02C&quot;</span>,</span>
<span id="cb99-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-57" tabindex="-1"></a>                                 <span class="st">&quot;Collaborative governance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FB9A99&quot;</span>,</span>
<span id="cb99-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-58" tabindex="-1"></a>                                 <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E31A1C&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb99-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-59" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb99-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb99-60" tabindex="-1"></a>pie_gov_knwn_en</span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb100-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-2" tabindex="-1"></a></span>
<span id="cb100-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb100-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-4" tabindex="-1"></a></span>
<span id="cb100-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_knwn_en, </span>
<span id="cb100-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Governance of non-marine protected areas funded by FAPBM (when known)&quot;</span>,</span>
<span id="cb100-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb100-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_knwn_en.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb100-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-9" tabindex="-1"></a></span>
<span id="cb100-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_gov_knwn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb100-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-11" tabindex="-1"></a>       <span class="at">plot =</span>  pie_gov_knwn_en,</span>
<span id="cb100-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb100-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb100-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-14" tabindex="-1"></a></span>
<span id="cb100-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb100-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-16" tabindex="-1"></a></span>
<span id="cb100-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb100-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb100-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-20" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb100-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-21" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb100-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-22" tabindex="-1"></a>{</span>
<span id="cb100-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-23" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb100-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-24" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb100-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-25" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb100-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-26" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/gouvernance/FAPBM/no_marine&quot;</span>, </span>
<span id="cb100-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-27" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-28" tabindex="-1"></a>  }</span>
<span id="cb100-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-29" tabindex="-1"></a></span>
<span id="cb100-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-30" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb100-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-31" tabindex="-1"></a></span>
<span id="cb100-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb100-32" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>All protected areas in Madagascar (reported by the WDPA)</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-1" tabindex="-1"></a><span class="co">#Table of the governance type distribution</span></span>
<span id="cb101-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-2" tabindex="-1"></a><span class="do">##English version</span></span>
<span id="cb101-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-3" tabindex="-1"></a>data_gov_en <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-4" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb101-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-6" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb101-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-7" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb101-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb101-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb101-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-10" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-11" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb101-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-12" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb101-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-13" tabindex="-1"></a></span>
<span id="cb101-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-14" tabindex="-1"></a>tbl_gov_en <span class="ot">=</span> data_gov_en</span>
<span id="cb101-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-15" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb101-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-16" tabindex="-1"></a></span>
<span id="cb101-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-17" tabindex="-1"></a></span>
<span id="cb101-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-18" tabindex="-1"></a><span class="co">#PAs with nureported or unreferenced governance types are removed</span></span>
<span id="cb101-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-19" tabindex="-1"></a><span class="do">##Tables</span></span>
<span id="cb101-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-20" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb101-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-21" tabindex="-1"></a>data_gov_knwn_en <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb101-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-22" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb101-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-24" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb101-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-25" tabindex="-1"></a>  <span class="fu">filter</span>(gov_type <span class="sc">!=</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">&amp;</span> gov_type <span class="sc">!=</span> <span class="st">&quot;Not referenced&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-26" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb101-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-27" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb101-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-28" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb101-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-29" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-30" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb101-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-31" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb101-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-32" tabindex="-1"></a></span>
<span id="cb101-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-33" tabindex="-1"></a>tbl_gov_knwn_en <span class="ot">=</span> data_gov_knwn_en</span>
<span id="cb101-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-34" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_knwn_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb101-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-35" tabindex="-1"></a></span>
<span id="cb101-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-36" tabindex="-1"></a></span>
<span id="cb101-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-37" tabindex="-1"></a><span class="do">##Pie charts</span></span>
<span id="cb101-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-38" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb101-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-39" tabindex="-1"></a>pie_gov_knwn_en <span class="ot">=</span> </span>
<span id="cb101-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-40" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_gov_knwn_en, </span>
<span id="cb101-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-41" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq, <span class="at">fill=</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb101-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-42" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-43" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, </span>
<span id="cb101-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-44" tabindex="-1"></a>                   <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(freq, <span class="at">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb101-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-45" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb101-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-46" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb101-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-47" tabindex="-1"></a>               <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-48" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-49" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Governance type of non-marine protected areas </span><span class="sc">\n</span><span class="st">except for not reported governance&quot;</span>,</span>
<span id="cb101-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-50" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_gov_knwn_en<span class="sc">$</span>n), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_gov_en<span class="sc">$</span>n), <span class="st">&quot;protected areas in Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-51" tabindex="-1"></a>  <span class="co">#+ scale_fill_brewer(name = &quot;Governance&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb101-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-52" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Governance&quot;</span>,</span>
<span id="cb101-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-53" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not Reported&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>,</span>
<span id="cb101-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-54" tabindex="-1"></a>                                 <span class="st">&quot;Local communities&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb101-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-55" tabindex="-1"></a>                                 <span class="st">&quot;Government-delegated management&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb101-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-56" tabindex="-1"></a>                                 <span class="st">&quot;Non-profit organisations&quot;</span> <span class="ot">=</span> <span class="st">&quot;#33A02C&quot;</span>,</span>
<span id="cb101-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-57" tabindex="-1"></a>                                 <span class="st">&quot;Collaborative governance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FB9A99&quot;</span>,</span>
<span id="cb101-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-58" tabindex="-1"></a>                                 <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E31A1C&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-59" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb101-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb101-60" tabindex="-1"></a>pie_gov_knwn_en</span></code></pre></div>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb102-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-2" tabindex="-1"></a></span>
<span id="cb102-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb102-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-4" tabindex="-1"></a></span>
<span id="cb102-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_knwn_en, </span>
<span id="cb102-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Governance of non-marine protected areas in Madagascar (when known)&quot;</span>,</span>
<span id="cb102-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb102-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_knwn_en.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb102-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-9" tabindex="-1"></a></span>
<span id="cb102-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_gov_knwn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb102-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-11" tabindex="-1"></a>       <span class="at">plot =</span>  pie_gov_knwn_en,</span>
<span id="cb102-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb102-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb102-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-14" tabindex="-1"></a></span>
<span id="cb102-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb102-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-16" tabindex="-1"></a></span>
<span id="cb102-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb102-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb102-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb102-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-20" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb102-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-21" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb102-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-22" tabindex="-1"></a>{</span>
<span id="cb102-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-23" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb102-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-24" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb102-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-25" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb102-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-26" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/gouvernance/MDG/no_marine&quot;</span>, </span>
<span id="cb102-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-27" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb102-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-28" tabindex="-1"></a>  }</span>
<span id="cb102-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-29" tabindex="-1"></a></span>
<span id="cb102-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-30" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb102-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-31" tabindex="-1"></a></span>
<span id="cb102-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb102-32" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Madagascar without FAPBM funded protected areas</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-1" tabindex="-1"></a><span class="co">#Table of the governance type distribution</span></span>
<span id="cb103-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-2" tabindex="-1"></a><span class="do">##English version</span></span>
<span id="cb103-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-3" tabindex="-1"></a>data_gov_en <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb103-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb103-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-5" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb103-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-7" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb103-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-8" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb103-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-9" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb103-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb103-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-11" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-12" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb103-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-13" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb103-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-14" tabindex="-1"></a></span>
<span id="cb103-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-15" tabindex="-1"></a>tbl_gov_en <span class="ot">=</span> data_gov_en</span>
<span id="cb103-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-16" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb103-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-17" tabindex="-1"></a></span>
<span id="cb103-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-18" tabindex="-1"></a></span>
<span id="cb103-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-19" tabindex="-1"></a><span class="co">#PAs with nureported or unreferenced governance types are removed</span></span>
<span id="cb103-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-20" tabindex="-1"></a><span class="do">##Tables</span></span>
<span id="cb103-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-21" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb103-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-22" tabindex="-1"></a>data_gov_knwn_en <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb103-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-23" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb103-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-24" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(gov_type) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb103-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-26" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb103-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-27" tabindex="-1"></a>  <span class="fu">filter</span>(gov_type <span class="sc">!=</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">&amp;</span> gov_type <span class="sc">!=</span> <span class="st">&quot;Not referenced&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-28" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb103-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-29" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb103-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb103-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-31" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-32" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb103-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-33" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb103-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-34" tabindex="-1"></a></span>
<span id="cb103-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-35" tabindex="-1"></a>tbl_gov_knwn_en <span class="ot">=</span> data_gov_knwn_en</span>
<span id="cb103-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-36" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_knwn_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb103-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-37" tabindex="-1"></a></span>
<span id="cb103-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-38" tabindex="-1"></a></span>
<span id="cb103-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-39" tabindex="-1"></a><span class="do">##Pie charts</span></span>
<span id="cb103-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-40" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb103-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-41" tabindex="-1"></a>pie_gov_knwn_en <span class="ot">=</span> </span>
<span id="cb103-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-42" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_gov_knwn_en, </span>
<span id="cb103-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-43" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq, <span class="at">fill=</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb103-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-44" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-45" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, </span>
<span id="cb103-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-46" tabindex="-1"></a>                   <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(freq, <span class="at">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb103-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-47" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb103-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-48" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb103-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-49" tabindex="-1"></a>               <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-50" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-51" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Governance type of non-marine protected areas </span><span class="sc">\n</span><span class="st">except for not reported governance&quot;</span>,</span>
<span id="cb103-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-52" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_gov_knwn_en<span class="sc">$</span>n), <span class="st">&quot;out of&quot;</span>, <span class="fu">sum</span>(data_gov_en<span class="sc">$</span>n), <span class="st">&quot;protected areas in Madagascar, not funded by the FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-53" tabindex="-1"></a>  <span class="co">#+ scale_fill_brewer(name = &quot;Governance&quot;, palette=&quot;Paired&quot;) %&gt;%</span></span>
<span id="cb103-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-54" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Governance&quot;</span>,</span>
<span id="cb103-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-55" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Not Reported&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A6CEE3&quot;</span>,</span>
<span id="cb103-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-56" tabindex="-1"></a>                                 <span class="st">&quot;Local communities&quot;</span> <span class="ot">=</span> <span class="st">&quot;#1F78B4&quot;</span>,</span>
<span id="cb103-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-57" tabindex="-1"></a>                                 <span class="st">&quot;Government-delegated management&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B2DF8A&quot;</span>,</span>
<span id="cb103-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-58" tabindex="-1"></a>                                 <span class="st">&quot;Non-profit organisations&quot;</span> <span class="ot">=</span> <span class="st">&quot;#33A02C&quot;</span>,</span>
<span id="cb103-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-59" tabindex="-1"></a>                                 <span class="st">&quot;Collaborative governance&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FB9A99&quot;</span>,</span>
<span id="cb103-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-60" tabindex="-1"></a>                                 <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E31A1C&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb103-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-61" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb103-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb103-62" tabindex="-1"></a>pie_gov_knwn_en</span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb104-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-2" tabindex="-1"></a></span>
<span id="cb104-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb104-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-4" tabindex="-1"></a></span>
<span id="cb104-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_knwn_en, </span>
<span id="cb104-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Governance of non-marine protected areas in Madagascar, not funded by the FAPBM (when known)&quot;</span>,</span>
<span id="cb104-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb104-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_knwn_en.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb104-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-9" tabindex="-1"></a></span>
<span id="cb104-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_gov_knwn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb104-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-11" tabindex="-1"></a>       <span class="at">plot =</span>  pie_gov_knwn_en,</span>
<span id="cb104-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb104-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb104-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-14" tabindex="-1"></a></span>
<span id="cb104-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-15" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb104-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-16" tabindex="-1"></a></span>
<span id="cb104-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-17" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb104-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-18" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb104-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-19" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb104-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-20" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb104-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-21" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb104-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-22" tabindex="-1"></a>{</span>
<span id="cb104-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-23" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb104-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-24" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb104-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-25" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb104-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-26" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/gouvernance/MDG_noFAPBM/no_marine&quot;</span>, </span>
<span id="cb104-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-27" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb104-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-28" tabindex="-1"></a>  }</span>
<span id="cb104-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-29" tabindex="-1"></a></span>
<span id="cb104-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-30" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb104-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-31" tabindex="-1"></a></span>
<span id="cb104-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb104-32" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="number-of-pas" class="section level4 hasAnchor" number="8.2.1.4">
<h4><span class="header-section-number">8.2.1.4</span> Number of PAs<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#number-of-pas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-1" tabindex="-1"></a><span class="co">#Statistics</span></span>
<span id="cb105-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-2" tabindex="-1"></a></span>
<span id="cb105-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-3" tabindex="-1"></a><span class="do">## PAs in the WDAP</span></span>
<span id="cb105-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-4" tabindex="-1"></a>n_mdg <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb105-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-5" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-6" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb105-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-7" tabindex="-1"></a>n_fapbm <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb105-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-8" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-9" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb105-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-10" tabindex="-1"></a></span>
<span id="cb105-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-11" tabindex="-1"></a><span class="do">## PAs in the WDAP, not marine</span></span>
<span id="cb105-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-12" tabindex="-1"></a>n_mdg_nomarine <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb105-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-13" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span> <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb105-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-14" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb105-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-15" tabindex="-1"></a>n_fapbm_nomarine <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb105-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-16" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span> <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb105-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-17" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb105-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-18" tabindex="-1"></a></span>
<span id="cb105-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-19" tabindex="-1"></a><span class="do">## PA we can analyze with our methodology</span></span>
<span id="cb105-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-20" tabindex="-1"></a>yr_min <span class="ot">=</span> <span class="dv">2002</span></span>
<span id="cb105-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-21" tabindex="-1"></a>n_mdg_ie <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb105-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-22" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-23" tabindex="-1"></a>  <span class="fu">filter</span>(status_yr <span class="sc">&gt;=</span> yr_min <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">&amp;</span> rep_area <span class="sc">&gt;</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb105-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-24" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb105-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-25" tabindex="-1"></a>n_fapbm_ie <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb105-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-26" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-27" tabindex="-1"></a>  <span class="fu">filter</span>(status_yr <span class="sc">&gt;=</span> yr_min <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">&amp;</span> area_km2 <span class="sc">&gt;</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb105-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb105-28" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code></pre></div>
</div>
<div id="area-of-pas" class="section level4 hasAnchor" number="8.2.1.5">
<h4><span class="header-section-number">8.2.1.5</span> Area of PAs<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#area-of-pas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>FAPBM funded protected areas</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-1" tabindex="-1"></a>tbl_area_fapbm <span class="ot">=</span> data_pa_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-2" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb106-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb106-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-4" tabindex="-1"></a>            <span class="at">tot =</span> <span class="fu">format</span>(<span class="fu">sum</span>(area_km2), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb106-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-5" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">format</span>(<span class="fu">min</span>(area_km2), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb106-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-6" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">format</span>(<span class="fu">max</span>(area_km2), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb106-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-7" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">format</span>(<span class="fu">mean</span>(area_km2), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span>
<span id="cb106-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-8" tabindex="-1"></a>            )</span>
<span id="cb106-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb106-9" tabindex="-1"></a><span class="fu">names</span>(tbl_area_fapbm) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Number of PAs&quot;</span>, <span class="st">&quot;Total area (kmÂ²)&quot;</span>, <span class="st">&quot;Min. area (kmÂ²)&quot;</span>, <span class="st">&quot;Max. area (kmÂ²)&quot;</span>, <span class="st">&quot;Average area (kmÂ²)&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb107-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-2" tabindex="-1"></a></span>
<span id="cb107-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb107-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-4" tabindex="-1"></a></span>
<span id="cb107-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_area_fapbm, </span>
<span id="cb107-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Statistics on non-marine protected areas funded by FAPBM&quot;</span>,</span>
<span id="cb107-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb107-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_area_fapbm.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb107-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-9" tabindex="-1"></a></span>
<span id="cb107-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-10" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb107-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-11" tabindex="-1"></a></span>
<span id="cb107-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-12" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb107-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-13" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-14" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb107-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-15" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb107-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-16" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb107-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-17" tabindex="-1"></a>{</span>
<span id="cb107-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-18" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb107-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-19" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb107-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-20" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb107-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-21" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/surface/FAPBM/no_marine&quot;</span>, </span>
<span id="cb107-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-22" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-23" tabindex="-1"></a>  }</span>
<span id="cb107-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-24" tabindex="-1"></a></span>
<span id="cb107-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-25" tabindex="-1"></a><span class="co">#Erase the files in the temp directory </span></span>
<span id="cb107-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-26" tabindex="-1"></a></span>
<span id="cb107-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb107-27" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))  </span></code></pre></div>
<p>All protected areas in Madagascar (reported by the WDPA)</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-1" tabindex="-1"></a>tbl_area_mdg <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-2" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb108-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-3" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb108-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb108-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-5" tabindex="-1"></a>            <span class="at">tot =</span> <span class="fu">format</span>(<span class="fu">sum</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb108-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-6" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">format</span>(<span class="fu">min</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb108-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-7" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">format</span>(<span class="fu">max</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb108-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-8" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">format</span>(<span class="fu">mean</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span>
<span id="cb108-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-9" tabindex="-1"></a>            )</span>
<span id="cb108-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb108-10" tabindex="-1"></a><span class="fu">names</span>(tbl_area_mdg) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Number of PAs&quot;</span>, <span class="st">&quot;Total area (kmÂ²)&quot;</span>, <span class="st">&quot;Min. area (kmÂ²)&quot;</span>, <span class="st">&quot;Max. area (kmÂ²)&quot;</span>, <span class="st">&quot;Average area (kmÂ²)&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb109-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-2" tabindex="-1"></a></span>
<span id="cb109-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb109-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-4" tabindex="-1"></a></span>
<span id="cb109-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_area_mdg, </span>
<span id="cb109-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Statistics on non-marine protected areas in Madagascar&quot;</span>,</span>
<span id="cb109-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb109-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_area_mdg.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb109-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-9" tabindex="-1"></a></span>
<span id="cb109-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-10" tabindex="-1"></a></span>
<span id="cb109-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb109-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-12" tabindex="-1"></a></span>
<span id="cb109-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb109-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb109-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb109-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb109-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb109-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-18" tabindex="-1"></a>{</span>
<span id="cb109-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb109-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb109-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb109-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/surface/MDG/no_marine&quot;</span>, </span>
<span id="cb109-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb109-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-24" tabindex="-1"></a>  }</span>
<span id="cb109-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-25" tabindex="-1"></a></span>
<span id="cb109-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb109-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-27" tabindex="-1"></a></span>
<span id="cb109-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb109-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Madagascar without FAPBM funded protected areas.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-1" tabindex="-1"></a>tbl_area_mdg_nofapbm <span class="ot">=</span> data_wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-2" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-3" tabindex="-1"></a>  <span class="fu">filter</span>(marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb110-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(wdpaid <span class="sc">%in%</span> data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb110-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb110-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-6" tabindex="-1"></a>            <span class="at">tot =</span> <span class="fu">format</span>(<span class="fu">sum</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb110-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-7" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">format</span>(<span class="fu">min</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb110-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-8" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">format</span>(<span class="fu">max</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>),</span>
<span id="cb110-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-9" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">format</span>(<span class="fu">mean</span>(rep_area), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span>
<span id="cb110-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-10" tabindex="-1"></a>            )</span>
<span id="cb110-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb110-11" tabindex="-1"></a><span class="fu">names</span>(tbl_area_mdg_nofapbm) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Number of PAs&quot;</span>, <span class="st">&quot;Total area (kmÂ²)&quot;</span>, <span class="st">&quot;Min. area (kmÂ²)&quot;</span>, <span class="st">&quot;Max. area (kmÂ²)&quot;</span>, <span class="st">&quot;Average area (kmÂ²)&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb111-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-2" tabindex="-1"></a></span>
<span id="cb111-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb111-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-4" tabindex="-1"></a></span>
<span id="cb111-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_area_mdg_nofapbm, </span>
<span id="cb111-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-6" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Statistics on non-marine protected areas in Madagascar, not funded by the FAPBM&quot;</span>,</span>
<span id="cb111-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-7" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb111-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_area_mdg_nofapbm.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb111-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-9" tabindex="-1"></a></span>
<span id="cb111-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-10" tabindex="-1"></a></span>
<span id="cb111-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb111-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-12" tabindex="-1"></a></span>
<span id="cb111-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb111-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb111-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb111-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb111-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-18" tabindex="-1"></a>{</span>
<span id="cb111-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb111-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb111-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb111-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/surface/MDG_noFAPBM/no_marine&quot;</span>, </span>
<span id="cb111-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-24" tabindex="-1"></a>  }</span>
<span id="cb111-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-25" tabindex="-1"></a></span>
<span id="cb111-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb111-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-27" tabindex="-1"></a></span>
<span id="cb111-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb111-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
</div>
<div id="evolution-of-tree-cover-and-deforestation" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Evolution of tree cover and deforestation<a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#evolution-of-tree-cover-and-deforestation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All protected areas in Madagascar (reported by the WDPA)</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-1" tabindex="-1"></a><span class="do">##2000 tree cover </span></span>
<span id="cb112-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-2" tabindex="-1"></a>data_treecover_2000 <span class="ot">=</span> </span>
<span id="cb112-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-3" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb112-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-4" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb112-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-5" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb112-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-6" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb112-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-7" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/GFW/MDG/treecover_extent_2000__ha.csv&quot;</span>,</span>
<span id="cb112-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-8" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb112-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-9" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb112-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-10" tabindex="-1"></a></span>
<span id="cb112-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-11" tabindex="-1"></a><span class="do">##Deforestation 2001-2022</span></span>
<span id="cb112-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-12" tabindex="-1"></a>data_treeloss <span class="ot">=</span> </span>
<span id="cb112-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-13" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb112-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-14" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb112-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-15" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb112-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-16" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb112-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-17" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/GFW/MDG/treecover_loss__ha.csv&quot;</span>,</span>
<span id="cb112-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-18" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb112-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-19" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb112-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-20" tabindex="-1"></a></span>
<span id="cb112-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-21" tabindex="-1"></a>data_plot_mdg <span class="ot">=</span> data_treeloss <span class="sc">%&gt;%</span></span>
<span id="cb112-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-22" tabindex="-1"></a>  <span class="fu">left_join</span>(data_treecover_2000, <span class="at">by =</span> <span class="st">&quot;iso&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-23" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;umd_tree_cover_loss__year&quot;</span>,</span>
<span id="cb112-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-24" tabindex="-1"></a>         <span class="st">&quot;loss_ha&quot;</span> <span class="ot">=</span> <span class="st">&quot;umd_tree_cover_loss__ha&quot;</span>,</span>
<span id="cb112-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-25" tabindex="-1"></a>         <span class="st">&quot;emissions_Mg&quot;</span> <span class="ot">=</span> <span class="st">&quot;gfw_gross_emissions_co2e_all_gases__Mg&quot;</span>,</span>
<span id="cb112-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-26" tabindex="-1"></a>         <span class="st">&quot;area_ha&quot;</span> <span class="ot">=</span> <span class="st">&quot;area__ha&quot;</span>,</span>
<span id="cb112-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-27" tabindex="-1"></a>         <span class="st">&quot;treecover_2000_ha&quot;</span> <span class="ot">=</span> <span class="st">&quot;umd_tree_cover_extent_2000__ha&quot;</span> </span>
<span id="cb112-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-28" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb112-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-29" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb112-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cum_loss =</span> <span class="fu">cumsum</span>(loss_ha),</span>
<span id="cb112-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-31" tabindex="-1"></a>         <span class="at">treecover_ha_mdg =</span> treecover_2000_ha <span class="sc">-</span> cum_loss,</span>
<span id="cb112-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-32" tabindex="-1"></a>         <span class="at">treecover_rel00_mdg =</span> treecover_ha_mdg<span class="sc">/</span>treecover_2000_ha<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb112-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-33" tabindex="-1"></a></span>
<span id="cb112-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-34" tabindex="-1"></a>fig_treeloss_mdg <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data =</span> data_plot_mdg,</span>
<span id="cb112-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-35" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> treecover_rel00_mdg)) <span class="sc">%&gt;%</span></span>
<span id="cb112-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-36" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-37" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-38" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;% of 2000 tree cover&quot;</span>, </span>
<span id="cb112-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-39" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Evolution of forest cover in Madagascar&quot;</span>,</span>
<span id="cb112-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-40" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Treecover in 2000 :&quot;</span>, <span class="fu">format</span>(data_plot_mdg<span class="sc">$</span>treecover_2000_ha[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha&quot;</span>),</span>
<span id="cb112-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-41" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Data : Global Forest Watch&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-42" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb112-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-43" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb112-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-44" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb112-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-45" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb112-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-46" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb112-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-47" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb112-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-48" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb112-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-49" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb112-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-50" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb112-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-51" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb112-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb112-52" tabindex="-1"></a>fig_treeloss_mdg</span></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb113-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-2" tabindex="-1"></a></span>
<span id="cb113-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb113-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-4" tabindex="-1"></a></span>
<span id="cb113-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_treeloss_mdg.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb113-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-6" tabindex="-1"></a>       <span class="at">plot =</span>  fig_treeloss_mdg,</span>
<span id="cb113-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb113-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb113-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-9" tabindex="-1"></a></span>
<span id="cb113-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-10" tabindex="-1"></a></span>
<span id="cb113-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb113-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-12" tabindex="-1"></a></span>
<span id="cb113-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb113-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb113-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb113-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb113-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb113-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-18" tabindex="-1"></a>{</span>
<span id="cb113-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb113-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb113-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb113-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/GFW/MDG/all&quot;</span>, </span>
<span id="cb113-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb113-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-24" tabindex="-1"></a>  }</span>
<span id="cb113-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-25" tabindex="-1"></a></span>
<span id="cb113-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb113-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-27" tabindex="-1"></a></span>
<span id="cb113-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb113-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>FAPBM funded protected areas.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-1" tabindex="-1"></a><span class="co">#Filter the WDPA to non-marine PAs in MDG funded by the FAPBM</span></span>
<span id="cb114-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-2" tabindex="-1"></a>wdpa_fapbm <span class="ot">=</span> data_wdpa <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-3" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span> <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">&amp;</span> <span class="fu">st_geometry_type</span>(geom) <span class="sc">==</span> <span class="st">&quot;MULTIPOLYGON&quot;</span> <span class="sc">&amp;</span> wdpaid <span class="sc">%in%</span> <span class="fu">unique</span>(data_pa_fapbm<span class="sc">$</span>wdpaid)) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-4" tabindex="-1"></a>  <span class="fu">st_make_valid</span>() <span class="sc">%&gt;%</span></span>
<span id="cb114-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-5" tabindex="-1"></a>  <span class="fu">st_cast</span>(<span class="at">to =</span> <span class="st">&quot;POLYGON&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-6" tabindex="-1"></a>  <span class="fu">mutate</span>()</span>
<span id="cb114-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-7" tabindex="-1"></a></span>
<span id="cb114-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-8" tabindex="-1"></a><span class="co">#Download the data with the MAPME package </span></span>
<span id="cb114-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-9" tabindex="-1"></a>data.tree.fapbm <span class="ot">=</span> <span class="fu">init_portfolio</span>(wdpa_fapbm,</span>
<span id="cb114-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-10" tabindex="-1"></a>                     <span class="at">years =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb114-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-11" tabindex="-1"></a>                     <span class="at">add_resources =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-12" tabindex="-1"></a>  <span class="fu">get_resources</span>(<span class="at">resources =</span> <span class="fu">c</span>(<span class="st">&quot;gfw_treecover&quot;</span>, <span class="st">&quot;gfw_lossyear&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb114-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-13" tabindex="-1"></a>  <span class="fu">calc_indicators</span>(<span class="at">indicators =</span> <span class="st">&quot;treecover_area&quot;</span>,</span>
<span id="cb114-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-14" tabindex="-1"></a>                  <span class="at">min_size=</span><span class="dv">1</span>, <span class="co"># indicator-specific argument</span></span>
<span id="cb114-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-15" tabindex="-1"></a>                  <span class="at">min_cover=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-16" tabindex="-1"></a>  <span class="fu">unnest</span>(treecover_area) <span class="sc">%&gt;%</span></span>
<span id="cb114-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-17" tabindex="-1"></a>  <span class="fu">drop_na</span>(treecover) <span class="sc">%&gt;%</span> <span class="co">#get rid of units with NA values </span></span>
<span id="cb114-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;treecover&quot;</span>), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> <span class="co"># Round numeric columns</span></span>
<span id="cb114-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-19" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;years&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;treecover&quot;</span>, <span class="at">names_prefix =</span> <span class="st">&quot;treecover_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-20" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb114-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-21" tabindex="-1"></a>  <span class="fu">group_by</span>(wdpaid) <span class="sc">%&gt;%</span></span>
<span id="cb114-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-22" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb114-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-23" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb114-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-24" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb114-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-25" tabindex="-1"></a></span>
<span id="cb114-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-26" tabindex="-1"></a><span class="co">#Build a plotting dataset</span></span>
<span id="cb114-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-27" tabindex="-1"></a>data_plot_fapbm <span class="ot">=</span> data.tree.fapbm <span class="sc">%&gt;%</span></span>
<span id="cb114-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-28" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb114-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-29" tabindex="-1"></a>  <span class="fu">group_by</span>(wdpaid) <span class="sc">%&gt;%</span></span>
<span id="cb114-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-30" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb114-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-31" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb114-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-32" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb114-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-33" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb114-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-34" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb114-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-35" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-36" tabindex="-1"></a>  <span class="co"># mutate(across(.cols = starts_with(&quot;treecover&quot;),</span></span>
<span id="cb114-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-37" tabindex="-1"></a>  <span class="co">#                .fns = ~.x/treecover_2000*100))  %&gt;%</span></span>
<span id="cb114-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-38" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>)),</span>
<span id="cb114-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-39" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;var&quot;</span>, <span class="st">&quot;year&quot;</span>),</span>
<span id="cb114-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-40" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb114-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-41" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;treecover_ha_fapbm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-42" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">treecover_rel00_fapbm =</span> treecover_ha_fapbm<span class="sc">/</span>treecover_ha_fapbm[year <span class="sc">==</span> <span class="dv">2000</span>]<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-43" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, treecover_ha_fapbm, treecover_rel00_fapbm)) <span class="sc">%&gt;%</span></span>
<span id="cb114-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-44" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) </span>
<span id="cb114-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-45" tabindex="-1"></a>  </span>
<span id="cb114-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-46" tabindex="-1"></a></span>
<span id="cb114-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-47" tabindex="-1"></a>fig_treeloss_fapbm <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data =</span> data_plot_fapbm,</span>
<span id="cb114-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-48" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> treecover_rel00_fapbm)) <span class="sc">%&gt;%</span></span>
<span id="cb114-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-49" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-50" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-51" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;% of 2000 tree cover&quot;</span>, </span>
<span id="cb114-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-52" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Evolution of forest cover in FAPBM funded protected areas&quot;</span>,</span>
<span id="cb114-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-53" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Treecover in 2000 :&quot;</span>, <span class="fu">format</span>(data_plot_fapbm[data_plot_fapbm<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2000</span>,]<span class="sc">$</span>treecover_ha_fapbm, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha&quot;</span>),</span>
<span id="cb114-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-54" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Data : Global Forest Watch&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-55" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb114-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-56" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb114-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-57" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb114-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-58" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb114-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-59" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb114-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-60" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb114-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-61" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb114-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-62" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb114-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-63" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb114-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-64" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb114-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-65" tabindex="-1"></a>fig_treeloss_fapbm</span>
<span id="cb114-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-66" tabindex="-1"></a></span>
<span id="cb114-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-67" tabindex="-1"></a><span class="co"># aws.s3::s3write_using(</span></span>
<span id="cb114-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-68" tabindex="-1"></a><span class="co"># FUN = data.table::fwrite,</span></span>
<span id="cb114-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-69" tabindex="-1"></a><span class="co"># data.tree.fapbm,</span></span>
<span id="cb114-70"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-70" tabindex="-1"></a><span class="co"># # Mettre les options de FUN ici</span></span>
<span id="cb114-71"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-71" tabindex="-1"></a><span class="co"># object = &quot;data_tidy/GFW/MDG/FAPBM/data_treecover_2000_2022.csv&quot;,</span></span>
<span id="cb114-72"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-72" tabindex="-1"></a><span class="co"># bucket = &quot;projet-afd-eva-ap&quot;,</span></span>
<span id="cb114-73"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb114-73" tabindex="-1"></a><span class="co"># opts = list(&quot;region&quot; = &quot;&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb115-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-2" tabindex="-1"></a></span>
<span id="cb115-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb115-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-4" tabindex="-1"></a></span>
<span id="cb115-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_treeloss_fapbm.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb115-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-6" tabindex="-1"></a>       <span class="at">plot =</span>  fig_treeloss_fapbm,</span>
<span id="cb115-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb115-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb115-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-9" tabindex="-1"></a></span>
<span id="cb115-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-10" tabindex="-1"></a></span>
<span id="cb115-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb115-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-12" tabindex="-1"></a></span>
<span id="cb115-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb115-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb115-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb115-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb115-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-18" tabindex="-1"></a>{</span>
<span id="cb115-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb115-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb115-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb115-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/GFW/MDG/FAPBM&quot;</span>, </span>
<span id="cb115-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-24" tabindex="-1"></a>  }</span>
<span id="cb115-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-25" tabindex="-1"></a></span>
<span id="cb115-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb115-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-27" tabindex="-1"></a></span>
<span id="cb115-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb115-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Madagascar protected areas without FAPBM funded ones.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-1" tabindex="-1"></a>wdpa_nofapbm <span class="ot">=</span> data_wdpa <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-2" tabindex="-1"></a>  <span class="fu">filter</span>(iso3 <span class="sc">==</span> <span class="st">&quot;MDG&quot;</span> <span class="sc">&amp;</span> marine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">&amp;</span> <span class="fu">st_geometry_type</span>(geom) <span class="sc">==</span> <span class="st">&quot;MULTIPOLYGON&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span>(wdpaid <span class="sc">%in%</span> <span class="fu">unique</span>(data_pa_fapbm<span class="sc">$</span>wdpaid))) <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-3" tabindex="-1"></a>  <span class="fu">st_make_valid</span>() <span class="sc">%&gt;%</span></span>
<span id="cb116-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-4" tabindex="-1"></a>  <span class="fu">st_cast</span>(<span class="at">to =</span> <span class="st">&quot;POLYGON&quot;</span>)</span>
<span id="cb116-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-5" tabindex="-1"></a></span>
<span id="cb116-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-6" tabindex="-1"></a>data.tree.nofapbm <span class="ot">=</span> <span class="fu">init_portfolio</span>(wdpa_nofapbm,</span>
<span id="cb116-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-7" tabindex="-1"></a>                     <span class="at">years =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb116-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-8" tabindex="-1"></a>                     <span class="at">add_resources =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-9" tabindex="-1"></a>  <span class="fu">get_resources</span>(<span class="at">resources =</span> <span class="fu">c</span>(<span class="st">&quot;gfw_treecover&quot;</span>, <span class="st">&quot;gfw_lossyear&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb116-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-10" tabindex="-1"></a>  <span class="fu">calc_indicators</span>(<span class="at">indicators =</span> <span class="st">&quot;treecover_area&quot;</span>,</span>
<span id="cb116-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-11" tabindex="-1"></a>                  <span class="at">min_size=</span><span class="dv">1</span>, <span class="co"># indicator-specific argument</span></span>
<span id="cb116-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-12" tabindex="-1"></a>                  <span class="at">min_cover=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-13" tabindex="-1"></a>  <span class="fu">unnest</span>(treecover_area) <span class="sc">%&gt;%</span></span>
<span id="cb116-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-14" tabindex="-1"></a>  <span class="fu">drop_na</span>(treecover) <span class="sc">%&gt;%</span> <span class="co">#get rid of units with NA values </span></span>
<span id="cb116-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;treecover&quot;</span>), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> <span class="co"># Round numeric columns</span></span>
<span id="cb116-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-16" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;years&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;treecover&quot;</span>, <span class="at">names_prefix =</span> <span class="st">&quot;treecover_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-17" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb116-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-18" tabindex="-1"></a>  <span class="fu">group_by</span>(wdpaid) <span class="sc">%&gt;%</span></span>
<span id="cb116-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-19" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb116-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-20" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span>   </span>
<span id="cb116-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-21" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb116-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-22" tabindex="-1"></a></span>
<span id="cb116-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-23" tabindex="-1"></a>aws.s3<span class="sc">::</span><span class="fu">s3write_using</span>(</span>
<span id="cb116-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-24" tabindex="-1"></a><span class="at">FUN =</span> data.table<span class="sc">::</span>fwrite,</span>
<span id="cb116-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-25" tabindex="-1"></a>data.tree.nofapbm,</span>
<span id="cb116-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-26" tabindex="-1"></a><span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb116-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-27" tabindex="-1"></a><span class="at">object =</span> <span class="st">&quot;data_tidy/GFW/MDG/noFAPBM/data_treecover_2000_2022.csv&quot;</span>,</span>
<span id="cb116-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-28" tabindex="-1"></a><span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb116-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-29" tabindex="-1"></a><span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb116-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-30" tabindex="-1"></a></span>
<span id="cb116-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-31" tabindex="-1"></a>data_plot_nofapbm <span class="ot">=</span> data.tree.nofapbm <span class="sc">%&gt;%</span></span>
<span id="cb116-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-32" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb116-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-33" tabindex="-1"></a>  <span class="fu">group_by</span>(wdpaid) <span class="sc">%&gt;%</span></span>
<span id="cb116-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-34" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb116-35"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-35" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb116-36"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-36" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb116-37"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-37" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>),</span>
<span id="cb116-38"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-38" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb116-39"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-39" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-40"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-40" tabindex="-1"></a>  <span class="co"># mutate(across(.cols = starts_with(&quot;treecover&quot;),</span></span>
<span id="cb116-41"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-41" tabindex="-1"></a>  <span class="co">#                .fns = ~.x/treecover_2000*100))  %&gt;%</span></span>
<span id="cb116-42"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-42" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="fu">starts_with</span>(<span class="st">&quot;treecover&quot;</span>)),</span>
<span id="cb116-43"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-43" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;var&quot;</span>, <span class="st">&quot;year&quot;</span>),</span>
<span id="cb116-44"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-44" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb116-45"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-45" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;treecover_ha_nofapbm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-46"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-46" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">treecover_rel00_nofapbm =</span> treecover_ha_nofapbm<span class="sc">/</span>treecover_ha_nofapbm[year <span class="sc">==</span> <span class="dv">2000</span>]<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-47"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-47" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, treecover_ha_nofapbm, treecover_rel00_nofapbm)) <span class="sc">%&gt;%</span></span>
<span id="cb116-48"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-48" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) </span>
<span id="cb116-49"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-49" tabindex="-1"></a>  </span>
<span id="cb116-50"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-50" tabindex="-1"></a></span>
<span id="cb116-51"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-51" tabindex="-1"></a>fig_treeloss_nofapbm <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data =</span> data_plot_nofapbm,</span>
<span id="cb116-52"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-52" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> treecover_rel00_nofapbm)) <span class="sc">%&gt;%</span></span>
<span id="cb116-53"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-53" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-54"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-54" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-55"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-55" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;% of 2000 tree cover&quot;</span>, </span>
<span id="cb116-56"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-56" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Evolution of forest cover, in protected areas not FAPBM funded&quot;</span>,</span>
<span id="cb116-57"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-57" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Treecover in 2000 :&quot;</span>, <span class="fu">format</span>(data_plot_nofapbm[data_plot_nofapbm<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2000</span>,]<span class="sc">$</span>treecover_ha_nofapbm, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha&quot;</span>),</span>
<span id="cb116-58"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-58" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Data : Global Forest Watch&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-59"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-59" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb116-60"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-60" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb116-61"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-61" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb116-62"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-62" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb116-63"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-63" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb116-64"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-64" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb116-65"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-65" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb116-66"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-66" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb116-67"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-67" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb116-68"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-68" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb116-69"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb116-69" tabindex="-1"></a>fig_treeloss_nofapbm</span></code></pre></div>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb117-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-2" tabindex="-1"></a></span>
<span id="cb117-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb117-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-4" tabindex="-1"></a></span>
<span id="cb117-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_treeloss_nofapbm.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb117-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-6" tabindex="-1"></a>       <span class="at">plot =</span>  fig_treeloss_nofapbm,</span>
<span id="cb117-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb117-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb117-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-9" tabindex="-1"></a></span>
<span id="cb117-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-10" tabindex="-1"></a></span>
<span id="cb117-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb117-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-12" tabindex="-1"></a></span>
<span id="cb117-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb117-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb117-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb117-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb117-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb117-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-18" tabindex="-1"></a>{</span>
<span id="cb117-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb117-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb117-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb117-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/GFW/MDG/noFAPBM&quot;</span>, </span>
<span id="cb117-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb117-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-24" tabindex="-1"></a>  }</span>
<span id="cb117-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-25" tabindex="-1"></a></span>
<span id="cb117-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb117-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-27" tabindex="-1"></a></span>
<span id="cb117-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb117-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Plotting the evolution of forest cover in Madagascar, FAPBM funded and not FAPMB funded protected areas in the same figure.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-1" tabindex="-1"></a>data_plot_all <span class="ot">=</span> data_plot_fapbm <span class="sc">%&gt;%</span></span>
<span id="cb118-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-2" tabindex="-1"></a>  <span class="fu">left_join</span>(data_plot_nofapbm, <span class="at">by =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-3" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(data_plot_mdg, <span class="fu">c</span>(year, treecover_ha_mdg, treecover_rel00_mdg)), <span class="at">by =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">treecover_rel00_mdg =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(treecover_rel00_mdg) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">100</span>,</span>
<span id="cb118-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-5" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> treecover_rel00_mdg),</span>
<span id="cb118-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-6" tabindex="-1"></a>         <span class="at">treecover_ha_mdg =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(treecover_ha_mdg) <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">~</span> data_plot_mdg<span class="sc">$</span>treecover_2000_ha[<span class="dv">1</span>],</span>
<span id="cb118-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-7" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> treecover_ha_mdg))</span>
<span id="cb118-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-8" tabindex="-1"></a><span class="co">#CARFEUL NEED TO RENAME VARIABLES   </span></span>
<span id="cb118-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-9" tabindex="-1"></a></span>
<span id="cb118-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-10" tabindex="-1"></a>fig_treeloss_all <span class="ot">=</span>  <span class="fu">ggplot</span>(data_plot_all,</span>
<span id="cb118-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-11" tabindex="-1"></a>                           <span class="fu">aes</span>(<span class="at">x =</span> year)) <span class="sc">%&gt;%</span></span>
<span id="cb118-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-12" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_mdg, <span class="at">color =</span> <span class="st">&quot;Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-13" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_mdg, <span class="at">color =</span> <span class="st">&quot;Madagascar&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-14" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_nofapbm, <span class="at">color =</span> <span class="st">&quot;Not FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-15" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_nofapbm, <span class="at">color =</span> <span class="st">&quot;Not FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-16" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_fapbm, <span class="at">color =</span> <span class="st">&quot;FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-17" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> treecover_rel00_fapbm, <span class="at">color =</span> <span class="st">&quot;FAPBM&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-18" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Madagascar&quot;</span> <span class="ot">=</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb118-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-19" tabindex="-1"></a>                                  <span class="st">&quot;Not FAPBM&quot;</span> <span class="ot">=</span> <span class="st">&quot;#DE2D26&quot;</span>,</span>
<span id="cb118-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-20" tabindex="-1"></a>                                  <span class="st">&quot;FAPBM&quot;</span> <span class="ot">=</span> <span class="st">&quot;#31A354&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-21" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;% of 2000 tree cover&quot;</span>, </span>
<span id="cb118-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-22" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Evolution of forest cover&quot;</span>,</span>
<span id="cb118-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-23" tabindex="-1"></a>        <span class="at">caption =</span> <span class="fu">paste</span>(<span class="st">&quot;Data : Global Forest Watch</span><span class="sc">\n</span><span class="st">Treecover in 2000 :&quot;</span>, <span class="fu">format</span>(data_plot_all[data_plot_all<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2000</span>,]<span class="sc">$</span>treecover_ha_mdg, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha in Madagascar,&quot;</span>, <span class="fu">format</span>(data_plot_all[data_plot_all<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2000</span>,]<span class="sc">$</span>treecover_ha_fapbm, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha of FAPBM funded protected areas and&quot;</span>, <span class="fu">format</span>(data_plot_all[data_plot_all<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2000</span>,]<span class="sc">$</span>treecover_ha_nofapbm, <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">scientific =</span> F), <span class="st">&quot;ha of non-funded.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb118-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-24" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb118-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-25" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb118-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-26" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb118-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-27" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb118-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-28" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb118-29"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-29" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>,  </span>
<span id="cb118-30"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-30" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb118-31"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-31" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb118-32"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-32" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb118-33"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-33" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>, <span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb118-34"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb118-34" tabindex="-1"></a>fig_treeloss_all</span></code></pre></div>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb119-2"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-2" tabindex="-1"></a></span>
<span id="cb119-3"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb119-4"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-4" tabindex="-1"></a></span>
<span id="cb119-5"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_treeloss_all.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb119-6"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-6" tabindex="-1"></a>       <span class="at">plot =</span>  fig_treeloss_all,</span>
<span id="cb119-7"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb119-8"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb119-9"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-9" tabindex="-1"></a></span>
<span id="cb119-10"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-10" tabindex="-1"></a></span>
<span id="cb119-11"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-11" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb119-12"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-12" tabindex="-1"></a></span>
<span id="cb119-13"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-13" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb119-14"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-14" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb119-15"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-15" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb119-16"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-16" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb119-17"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-17" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb119-18"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-18" tabindex="-1"></a>{</span>
<span id="cb119-19"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-19" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb119-20"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-20" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb119-21"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-21" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb119-22"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-22" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/descriptive_stats/GFW/MDG&quot;</span>, </span>
<span id="cb119-23"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-23" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb119-24"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-24" tabindex="-1"></a>  }</span>
<span id="cb119-25"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-25" tabindex="-1"></a></span>
<span id="cb119-26"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-26" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb119-27"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-27" tabindex="-1"></a></span>
<span id="cb119-28"><a href="r-setup-includefalse-eval-false-knitropts_knitsetroot.dir-rprojrootfind_rstudio_root_file-2.html#cb119-28" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="miscellaneous-statistics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="matching.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vuillota/EVA-impact-aires-protegees/edit/main/01_stat_misc.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["https://github.com/vuillota/EVA-impact-aires-protegees/raw/main/01_stat_misc.Rmd"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
