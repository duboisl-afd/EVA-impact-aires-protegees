<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Projects funded by the AFD | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Projects funded by the AFD | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="vuillota/EVA-impact-aires-protegees.git" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Projects funded by the AFD | Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Antoine Vuillot" />
<meta name="author" content="Ingrid Dallmann" />
<meta name="author" content="Léa Poulin" />
<meta name="author" content="Pierre-Yves Durand" />


<meta name="date" content="2023-07-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="building-the-datasets.html"/>
<link rel="next" href="biodiversity-in-the-protected-areas.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Impact analysis of protected areas funded by the AFD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this website</a></li>
<li class="chapter" data-level="1" data-path="building-the-datasets.html"><a href="building-the-datasets.html"><i class="fa fa-check"></i><b>1</b> Building the datasets</a>
<ul>
<li class="chapter" data-level="1.1" data-path="building-the-datasets.html"><a href="building-the-datasets.html#importing-relevant-packages"><i class="fa fa-check"></i><b>1.1</b> Importing relevant packages</a></li>
<li class="chapter" data-level="1.2" data-path="building-the-datasets.html"><a href="building-the-datasets.html#datasets-for-descriptive-statistics"><i class="fa fa-check"></i><b>1.2</b> Datasets for descriptive statistics</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="building-the-datasets.html"><a href="building-the-datasets.html#cleaning-the-raw-dataset"><i class="fa fa-check"></i><b>1.2.1</b> Cleaning the raw dataset</a></li>
<li class="chapter" data-level="1.2.2" data-path="building-the-datasets.html"><a href="building-the-datasets.html#dataset-with-only-siop-variables"><i class="fa fa-check"></i><b>1.2.2</b> Dataset with only SIOP variables</a></li>
<li class="chapter" data-level="1.2.3" data-path="building-the-datasets.html"><a href="building-the-datasets.html#dataset-for-non-confidential-statistics"><i class="fa fa-check"></i><b>1.2.3</b> Dataset for non-confidential statistics</a></li>
<li class="chapter" data-level="1.2.4" data-path="building-the-datasets.html"><a href="building-the-datasets.html#dataset-for-confidential-descriptive-statistics"><i class="fa fa-check"></i><b>1.2.4</b> Dataset for confidential descriptive statistics</a></li>
<li class="chapter" data-level="1.2.5" data-path="building-the-datasets.html"><a href="building-the-datasets.html#a-polygon-dataset-without-confidential-information"><i class="fa fa-check"></i><b>1.2.5</b> A polygon dataset without confidential information</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="building-the-datasets.html"><a href="building-the-datasets.html#computing-total-areas-covered-by-pas-in-the-sample"><i class="fa fa-check"></i><b>1.3</b> Computing total areas covered by PAs in the sample</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="building-the-datasets.html"><a href="building-the-datasets.html#computations-of-polygons-area"><i class="fa fa-check"></i><b>1.3.1</b> Computations of polygons’ area</a></li>
<li class="chapter" data-level="1.3.2" data-path="building-the-datasets.html"><a href="building-the-datasets.html#computing-the-intersection-at-country-region-world-level"><i class="fa fa-check"></i><b>1.3.2</b> Computing the intersection at country, region, world level</a></li>
<li class="chapter" data-level="1.3.3" data-path="building-the-datasets.html"><a href="building-the-datasets.html#computing-total-areas-without-intersection"><i class="fa fa-check"></i><b>1.3.3</b> Computing total areas without intersection</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="building-the-datasets.html"><a href="building-the-datasets.html#old-code"><i class="fa fa-check"></i><b>1.4</b> Old code</a></li>
</ul></li>
<li class="part"><span><b>Descriptive statistics</b></span></li>
<li class="chapter" data-level="2" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html"><i class="fa fa-check"></i><b>2</b> Projects funded by the AFD</a>
<ul>
<li class="chapter" data-level="2.1" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#importing-packages"><i class="fa fa-check"></i><b>2.1</b> Importing packages</a></li>
<li class="chapter" data-level="2.2" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#importing-datasets"><i class="fa fa-check"></i><b>2.2</b> Importing datasets</a></li>
<li class="chapter" data-level="2.3" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#performing-descriptive-statistics"><i class="fa fa-check"></i><b>2.3</b> Performing descriptive statistics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#iucn-categories"><i class="fa fa-check"></i><b>2.3.1</b> IUCN categories</a></li>
<li class="chapter" data-level="2.3.2" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#ecosystems-excluding-non-referenced-pas"><i class="fa fa-check"></i><b>2.3.2</b> Ecosystems (excluding non-referenced PAs)</a></li>
<li class="chapter" data-level="2.3.3" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#distribution-of-pas-across-countries-and-regions"><i class="fa fa-check"></i><b>2.3.3</b> Distribution of PAs across countries and regions</a></li>
<li class="chapter" data-level="2.3.4" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#surface-of-pas"><i class="fa fa-check"></i><b>2.3.4</b> Surface of PAs</a></li>
<li class="chapter" data-level="2.3.5" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#temporal-evolution"><i class="fa fa-check"></i><b>2.3.5</b> Temporal evolution</a></li>
<li class="chapter" data-level="2.3.6" data-path="projects-funded-by-the-afd.html"><a href="projects-funded-by-the-afd.html#governance"><i class="fa fa-check"></i><b>2.3.6</b> Governance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html"><i class="fa fa-check"></i><b>3</b> Biodiversity in the protected areas</a>
<ul>
<li class="chapter" data-level="3.1" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#importing-packages-and-functions"><i class="fa fa-check"></i><b>3.1</b> Importing packages and functions</a></li>
<li class="chapter" data-level="3.2" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#setting-the-environment"><i class="fa fa-check"></i><b>3.2</b> Setting the environment</a></li>
<li class="chapter" data-level="3.3" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#importing-pas-datasets"><i class="fa fa-check"></i><b>3.3</b> Importing PAs datasets</a></li>
<li class="chapter" data-level="3.4" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#downloading-data-of-interests-and-compute-relevant-indicators"><i class="fa fa-check"></i><b>3.4</b> Downloading data of interests and compute relevant indicators</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#creating-the-portfolio"><i class="fa fa-check"></i><b>3.4.1</b> Creating the portfolio</a></li>
<li class="chapter" data-level="3.4.2" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#test-importing-data-from-sspcloud"><i class="fa fa-check"></i><b>3.4.2</b> TEST : importing data from SSPCloud</a></li>
<li class="chapter" data-level="3.4.3" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#compute-indicators-from-geospatial-data"><i class="fa fa-check"></i><b>3.4.3</b> Compute indicators from geospatial data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#computing-statistics"><i class="fa fa-check"></i><b>3.5</b> Computing statistics</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#forests"><i class="fa fa-check"></i><b>3.5.1</b> Forests</a></li>
<li class="chapter" data-level="3.5.2" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#mangrove"><i class="fa fa-check"></i><b>3.5.2</b> Mangrove</a></li>
<li class="chapter" data-level="3.5.3" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#emissions"><i class="fa fa-check"></i><b>3.5.3</b> Emissions</a></li>
<li class="chapter" data-level="3.5.4" data-path="biodiversity-in-the-protected-areas.html"><a href="biodiversity-in-the-protected-areas.html#biometeow"><i class="fa fa-check"></i><b>3.5.4</b> Biome/TEOW</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Impact analysis</b></span></li>
<li class="chapter" data-level="4" data-path="matching.html"><a href="matching.html"><i class="fa fa-check"></i><b>4</b> Matching</a>
<ul>
<li class="chapter" data-level="4.1" data-path="matching.html"><a href="matching.html#initial-settings"><i class="fa fa-check"></i><b>4.1</b> Initial settings</a></li>
<li class="chapter" data-level="4.2" data-path="matching.html"><a href="matching.html#matching-process"><i class="fa fa-check"></i><b>4.2</b> Matching process</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="matching.html"><a href="matching.html#pre-processing"><i class="fa fa-check"></i><b>4.2.1</b> Pre-processing</a></li>
<li class="chapter" data-level="4.2.2" data-path="matching.html"><a href="matching.html#post-processing"><i class="fa fa-check"></i><b>4.2.2</b> Post-processing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Impact analysis of protected areas funded by the AFD : an open-guide for reproductibility</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="projects-funded-by-the-afd" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Section 2</span> Projects funded by the AFD<a href="projects-funded-by-the-afd.html#projects-funded-by-the-afd" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this document are performed and plotted descriptive statistics from the datasets built in buildingDB_PA_WDPA. The following statistics are derived :</p>
<ul>
<li>Distribution of parcels among IUCN categories, at country, region and world level.</li>
<li>Distribution in terms of ecosystems</li>
<li>Distribution of PAs across countries and regions</li>
</ul>
<div id="importing-packages" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Importing packages<a href="projects-funded-by-the-afd.html#importing-packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>#<code>{r setup, include=FALSE, eval = FALSE} #knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) #</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="projects-funded-by-the-afd.html#cb13-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="projects-funded-by-the-afd.html#cb13-2" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb13-3"><a href="projects-funded-by-the-afd.html#cb13-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb13-4"><a href="projects-funded-by-the-afd.html#cb13-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-5"><a href="projects-funded-by-the-afd.html#cb13-5" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb13-6"><a href="projects-funded-by-the-afd.html#cb13-6" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb13-7"><a href="projects-funded-by-the-afd.html#cb13-7" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb13-8"><a href="projects-funded-by-the-afd.html#cb13-8" tabindex="-1"></a><span class="co">#library(readxl)</span></span>
<span id="cb13-9"><a href="projects-funded-by-the-afd.html#cb13-9" tabindex="-1"></a><span class="co">#library(splitstackshape) </span></span>
<span id="cb13-10"><a href="projects-funded-by-the-afd.html#cb13-10" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb13-11"><a href="projects-funded-by-the-afd.html#cb13-11" tabindex="-1"></a><span class="fu">library</span>(xtable)</span>
<span id="cb13-12"><a href="projects-funded-by-the-afd.html#cb13-12" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb13-13"><a href="projects-funded-by-the-afd.html#cb13-13" tabindex="-1"></a><span class="fu">library</span>(tidyterra)</span>
<span id="cb13-14"><a href="projects-funded-by-the-afd.html#cb13-14" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb13-15"><a href="projects-funded-by-the-afd.html#cb13-15" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb13-16"><a href="projects-funded-by-the-afd.html#cb13-16" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb13-17"><a href="projects-funded-by-the-afd.html#cb13-17" tabindex="-1"></a><span class="fu">library</span>(aws.s3)</span></code></pre></div>
</div>
<div id="importing-datasets" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Importing datasets<a href="projects-funded-by-the-afd.html#importing-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="projects-funded-by-the-afd.html#cb14-1" tabindex="-1"></a><span class="co">#Both datasets are imported also in UTF8 encoding, for some variables</span></span>
<span id="cb14-2"><a href="projects-funded-by-the-afd.html#cb14-2" tabindex="-1"></a><span class="do">##A first dataset with some PA on more than one row (one line per funding for instance)</span></span>
<span id="cb14-3"><a href="projects-funded-by-the-afd.html#cb14-3" tabindex="-1"></a>data_stat <span class="ot">=</span> </span>
<span id="cb14-4"><a href="projects-funded-by-the-afd.html#cb14-4" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/BDD_DesStat_nofund.csv&quot;, encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-5"><a href="projects-funded-by-the-afd.html#cb14-5" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-6"><a href="projects-funded-by-the-afd.html#cb14-6" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-7"><a href="projects-funded-by-the-afd.html#cb14-7" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-8"><a href="projects-funded-by-the-afd.html#cb14-8" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-9"><a href="projects-funded-by-the-afd.html#cb14-9" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/BDD_DesStat_nofund.csv&quot;</span>,</span>
<span id="cb14-10"><a href="projects-funded-by-the-afd.html#cb14-10" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-11"><a href="projects-funded-by-the-afd.html#cb14-11" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb14-12"><a href="projects-funded-by-the-afd.html#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="projects-funded-by-the-afd.html#cb14-13" tabindex="-1"></a><span class="do">##A second dataset with one line per PA, more suited for some statistics</span></span>
<span id="cb14-14"><a href="projects-funded-by-the-afd.html#cb14-14" tabindex="-1"></a>data_stat_nodupl <span class="ot">=</span> </span>
<span id="cb14-15"><a href="projects-funded-by-the-afd.html#cb14-15" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/BDD_DesStat_nofund_nodupl.csv&quot; , encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-16"><a href="projects-funded-by-the-afd.html#cb14-16" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-17"><a href="projects-funded-by-the-afd.html#cb14-17" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-18"><a href="projects-funded-by-the-afd.html#cb14-18" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-19"><a href="projects-funded-by-the-afd.html#cb14-19" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-20"><a href="projects-funded-by-the-afd.html#cb14-20" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/BDD_DesStat_nofund_nodupl.csv&quot;</span>,</span>
<span id="cb14-21"><a href="projects-funded-by-the-afd.html#cb14-21" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-22"><a href="projects-funded-by-the-afd.html#cb14-22" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb14-23"><a href="projects-funded-by-the-afd.html#cb14-23" tabindex="-1"></a></span>
<span id="cb14-24"><a href="projects-funded-by-the-afd.html#cb14-24" tabindex="-1"></a>pa_area_ctry <span class="ot">=</span> </span>
<span id="cb14-25"><a href="projects-funded-by-the-afd.html#cb14-25" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/area/pa_area_ctry.csv&quot;, encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-26"><a href="projects-funded-by-the-afd.html#cb14-26" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-27"><a href="projects-funded-by-the-afd.html#cb14-27" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-28"><a href="projects-funded-by-the-afd.html#cb14-28" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-29"><a href="projects-funded-by-the-afd.html#cb14-29" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-30"><a href="projects-funded-by-the-afd.html#cb14-30" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/area/pa_area_ctry.csv&quot;</span>,</span>
<span id="cb14-31"><a href="projects-funded-by-the-afd.html#cb14-31" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-32"><a href="projects-funded-by-the-afd.html#cb14-32" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb14-33"><a href="projects-funded-by-the-afd.html#cb14-33" tabindex="-1"></a></span>
<span id="cb14-34"><a href="projects-funded-by-the-afd.html#cb14-34" tabindex="-1"></a>pa_area_dr <span class="ot">=</span> </span>
<span id="cb14-35"><a href="projects-funded-by-the-afd.html#cb14-35" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/area/pa_area_dr.csv&quot;, encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-36"><a href="projects-funded-by-the-afd.html#cb14-36" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-37"><a href="projects-funded-by-the-afd.html#cb14-37" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-38"><a href="projects-funded-by-the-afd.html#cb14-38" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-39"><a href="projects-funded-by-the-afd.html#cb14-39" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-40"><a href="projects-funded-by-the-afd.html#cb14-40" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/area/pa_area_dr.csv&quot;</span>,</span>
<span id="cb14-41"><a href="projects-funded-by-the-afd.html#cb14-41" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-42"><a href="projects-funded-by-the-afd.html#cb14-42" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb14-43"><a href="projects-funded-by-the-afd.html#cb14-43" tabindex="-1"></a></span>
<span id="cb14-44"><a href="projects-funded-by-the-afd.html#cb14-44" tabindex="-1"></a>pa_area_wld <span class="ot">=</span> </span>
<span id="cb14-45"><a href="projects-funded-by-the-afd.html#cb14-45" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/area/pa_area_wld.csv&quot;, encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-46"><a href="projects-funded-by-the-afd.html#cb14-46" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-47"><a href="projects-funded-by-the-afd.html#cb14-47" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-48"><a href="projects-funded-by-the-afd.html#cb14-48" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-49"><a href="projects-funded-by-the-afd.html#cb14-49" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-50"><a href="projects-funded-by-the-afd.html#cb14-50" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/area/pa_area_wld.csv&quot;</span>,</span>
<span id="cb14-51"><a href="projects-funded-by-the-afd.html#cb14-51" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-52"><a href="projects-funded-by-the-afd.html#cb14-52" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb14-53"><a href="projects-funded-by-the-afd.html#cb14-53" tabindex="-1"></a></span>
<span id="cb14-54"><a href="projects-funded-by-the-afd.html#cb14-54" tabindex="-1"></a>pa_int_yr <span class="ot">=</span> </span>
<span id="cb14-55"><a href="projects-funded-by-the-afd.html#cb14-55" tabindex="-1"></a>  <span class="co">#fread(&quot;data_tidy/area/pa_area_dr.csv&quot;, encoding = &quot;UTF-8&quot;)</span></span>
<span id="cb14-56"><a href="projects-funded-by-the-afd.html#cb14-56" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">s3read_using</span>(</span>
<span id="cb14-57"><a href="projects-funded-by-the-afd.html#cb14-57" tabindex="-1"></a>  <span class="at">FUN =</span> data.table<span class="sc">::</span>fread,</span>
<span id="cb14-58"><a href="projects-funded-by-the-afd.html#cb14-58" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb14-59"><a href="projects-funded-by-the-afd.html#cb14-59" tabindex="-1"></a>  <span class="co"># Mettre les options de FUN ici</span></span>
<span id="cb14-60"><a href="projects-funded-by-the-afd.html#cb14-60" tabindex="-1"></a>  <span class="at">object =</span> <span class="st">&quot;data_tidy/area/pa_int_yr.csv&quot;</span>,</span>
<span id="cb14-61"><a href="projects-funded-by-the-afd.html#cb14-61" tabindex="-1"></a>  <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap&quot;</span>,</span>
<span id="cb14-62"><a href="projects-funded-by-the-afd.html#cb14-62" tabindex="-1"></a>  <span class="at">opts =</span> <span class="fu">list</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
</div>
<div id="performing-descriptive-statistics" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Performing descriptive statistics<a href="projects-funded-by-the-afd.html#performing-descriptive-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="iucn-categories" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> IUCN categories<a href="projects-funded-by-the-afd.html#iucn-categories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="share-of-pas-by-iucn-categories" class="section level4 hasAnchor" number="2.3.1.1">
<h4><span class="header-section-number">2.3.1.1</span> Share of PAs by IUCN categories<a href="projects-funded-by-the-afd.html#share-of-pas-by-iucn-categories" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="projects-funded-by-the-afd.html#cb15-1" tabindex="-1"></a><span class="co">#Building the relevant dataset</span></span>
<span id="cb15-2"><a href="projects-funded-by-the-afd.html#cb15-2" tabindex="-1"></a><span class="do">##For all PAs ..</span></span>
<span id="cb15-3"><a href="projects-funded-by-the-afd.html#cb15-3" tabindex="-1"></a>data_cat_iucn <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="projects-funded-by-the-afd.html#cb15-4" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="projects-funded-by-the-afd.html#cb15-5" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb15-6"><a href="projects-funded-by-the-afd.html#cb15-6" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="projects-funded-by-the-afd.html#cb15-7" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="projects-funded-by-the-afd.html#cb15-8" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb15-9"><a href="projects-funded-by-the-afd.html#cb15-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb15-10"><a href="projects-funded-by-the-afd.html#cb15-10" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="projects-funded-by-the-afd.html#cb15-11" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(iucn_des)) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="projects-funded-by-the-afd.html#cb15-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb15-13"><a href="projects-funded-by-the-afd.html#cb15-13" tabindex="-1"></a></span>
<span id="cb15-14"><a href="projects-funded-by-the-afd.html#cb15-14" tabindex="-1"></a></span>
<span id="cb15-15"><a href="projects-funded-by-the-afd.html#cb15-15" tabindex="-1"></a><span class="do">##... and for referenced PAs only</span></span>
<span id="cb15-16"><a href="projects-funded-by-the-afd.html#cb15-16" tabindex="-1"></a>data_cat_iucn_ref <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="projects-funded-by-the-afd.html#cb15-17" tabindex="-1"></a>  <span class="co">#Remove not referenced PAs</span></span>
<span id="cb15-18"><a href="projects-funded-by-the-afd.html#cb15-18" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="sc">!</span>(iucn_des <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Non catégorisée&quot;</span>, <span class="st">&quot;Non référencée&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-19"><a href="projects-funded-by-the-afd.html#cb15-19" tabindex="-1"></a>  <span class="fu">group_by</span>(iucn_des) <span class="sc">%&gt;%</span></span>
<span id="cb15-20"><a href="projects-funded-by-the-afd.html#cb15-20" tabindex="-1"></a>  <span class="co">#number of PAs per IUCN category</span></span>
<span id="cb15-21"><a href="projects-funded-by-the-afd.html#cb15-21" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_iucn =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-22"><a href="projects-funded-by-the-afd.html#cb15-22" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-23"><a href="projects-funded-by-the-afd.html#cb15-23" tabindex="-1"></a>  <span class="co">#Frequency of IUCN categories</span></span>
<span id="cb15-24"><a href="projects-funded-by-the-afd.html#cb15-24" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_pa =</span> <span class="fu">sum</span>(n_iucn),</span>
<span id="cb15-25"><a href="projects-funded-by-the-afd.html#cb15-25" tabindex="-1"></a>         <span class="at">freq_iucn =</span> <span class="fu">round</span>(n_iucn<span class="sc">/</span>n_pa<span class="sc">*</span><span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-26"><a href="projects-funded-by-the-afd.html#cb15-26" tabindex="-1"></a>  <span class="fu">arrange</span>(freq_iucn) <span class="sc">%&gt;%</span></span>
<span id="cb15-27"><a href="projects-funded-by-the-afd.html#cb15-27" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypos_iucn =</span> <span class="fu">cumsum</span>(freq_iucn) <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>freq_iucn) </span>
<span id="cb15-28"><a href="projects-funded-by-the-afd.html#cb15-28" tabindex="-1"></a></span>
<span id="cb15-29"><a href="projects-funded-by-the-afd.html#cb15-29" tabindex="-1"></a><span class="co">#Latex table</span></span>
<span id="cb15-30"><a href="projects-funded-by-the-afd.html#cb15-30" tabindex="-1"></a>tbl_cat_iucn <span class="ot">=</span> data_cat_iucn <span class="sc">%&gt;%</span></span>
<span id="cb15-31"><a href="projects-funded-by-the-afd.html#cb15-31" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(iucn_des, n_iucn, freq_iucn))</span>
<span id="cb15-32"><a href="projects-funded-by-the-afd.html#cb15-32" tabindex="-1"></a><span class="fu">names</span>(tbl_cat_iucn) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Catégories IUCN&quot;</span>,<span class="st">&quot;Nombre d&#39;AP&quot;</span>, <span class="st">&quot;Proportion d&#39;AP (%)&quot;</span>)</span>
<span id="cb15-33"><a href="projects-funded-by-the-afd.html#cb15-33" tabindex="-1"></a></span>
<span id="cb15-34"><a href="projects-funded-by-the-afd.html#cb15-34" tabindex="-1"></a>tbl_cat_iucn_ref <span class="ot">=</span> data_cat_iucn_ref <span class="sc">%&gt;%</span></span>
<span id="cb15-35"><a href="projects-funded-by-the-afd.html#cb15-35" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(iucn_des, n_iucn, freq_iucn))</span>
<span id="cb15-36"><a href="projects-funded-by-the-afd.html#cb15-36" tabindex="-1"></a><span class="fu">names</span>(tbl_cat_iucn_ref) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Catégories IUCN&quot;</span>,<span class="st">&quot;Nombre d&#39;AP&quot;</span>, <span class="st">&quot;Proportion d&#39;AP (%)&quot;</span>)</span>
<span id="cb15-37"><a href="projects-funded-by-the-afd.html#cb15-37" tabindex="-1"></a></span>
<span id="cb15-38"><a href="projects-funded-by-the-afd.html#cb15-38" tabindex="-1"></a></span>
<span id="cb15-39"><a href="projects-funded-by-the-afd.html#cb15-39" tabindex="-1"></a><span class="co">#Histogram including non-referenced PAs</span></span>
<span id="cb15-40"><a href="projects-funded-by-the-afd.html#cb15-40" tabindex="-1"></a>hist_cat_iucn <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn, </span>
<span id="cb15-41"><a href="projects-funded-by-the-afd.html#cb15-41" tabindex="-1"></a>                       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(iucn_des, <span class="sc">-</span>freq_iucn), </span>
<span id="cb15-42"><a href="projects-funded-by-the-afd.html#cb15-42" tabindex="-1"></a>                           <span class="at">y =</span> freq_iucn, <span class="at">fill =</span> iucn_des)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-43"><a href="projects-funded-by-the-afd.html#cb15-43" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span><span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-44"><a href="projects-funded-by-the-afd.html#cb15-44" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n_iucn, <span class="dv">1</span>), <span class="at">y =</span> freq_iucn), </span>
<span id="cb15-45"><a href="projects-funded-by-the-afd.html#cb15-45" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb15-46"><a href="projects-funded-by-the-afd.html#cb15-46" tabindex="-1"></a>            <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-47"><a href="projects-funded-by-the-afd.html#cb15-47" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par catégorie IUCN&quot;</span>,</span>
<span id="cb15-48"><a href="projects-funded-by-the-afd.html#cb15-48" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur les barres.&quot;</span>),</span>
<span id="cb15-49"><a href="projects-funded-by-the-afd.html#cb15-49" tabindex="-1"></a>          <span class="at">x =</span> <span class="st">&quot;Catégories IUCN&quot;</span>, </span>
<span id="cb15-50"><a href="projects-funded-by-the-afd.html#cb15-50" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">&quot;Nombre (%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-51"><a href="projects-funded-by-the-afd.html#cb15-51" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb15-52"><a href="projects-funded-by-the-afd.html#cb15-52" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb15-53"><a href="projects-funded-by-the-afd.html#cb15-53" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb15-54"><a href="projects-funded-by-the-afd.html#cb15-54" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">9</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb15-55"><a href="projects-funded-by-the-afd.html#cb15-55" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb15-56"><a href="projects-funded-by-the-afd.html#cb15-56" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-57"><a href="projects-funded-by-the-afd.html#cb15-57" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-58"><a href="projects-funded-by-the-afd.html#cb15-58" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-59"><a href="projects-funded-by-the-afd.html#cb15-59" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb15-60"><a href="projects-funded-by-the-afd.html#cb15-60" tabindex="-1"></a>hist_cat_iucn</span>
<span id="cb15-61"><a href="projects-funded-by-the-afd.html#cb15-61" tabindex="-1"></a></span>
<span id="cb15-62"><a href="projects-funded-by-the-afd.html#cb15-62" tabindex="-1"></a><span class="co">#Histogram excluding non-referenced PAs</span></span>
<span id="cb15-63"><a href="projects-funded-by-the-afd.html#cb15-63" tabindex="-1"></a>hist_cat_iucn_ref <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn_ref, </span>
<span id="cb15-64"><a href="projects-funded-by-the-afd.html#cb15-64" tabindex="-1"></a>                       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(iucn_des, <span class="sc">-</span>freq_iucn), </span>
<span id="cb15-65"><a href="projects-funded-by-the-afd.html#cb15-65" tabindex="-1"></a>                           <span class="at">y =</span> freq_iucn, <span class="at">fill =</span> iucn_des)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-66"><a href="projects-funded-by-the-afd.html#cb15-66" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span><span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-67"><a href="projects-funded-by-the-afd.html#cb15-67" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n_iucn, <span class="dv">1</span>), <span class="at">y =</span> freq_iucn), </span>
<span id="cb15-68"><a href="projects-funded-by-the-afd.html#cb15-68" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb15-69"><a href="projects-funded-by-the-afd.html#cb15-69" tabindex="-1"></a>            <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-70"><a href="projects-funded-by-the-afd.html#cb15-70" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par catégorie IUCN (hors AP non-répertoriées)&quot;</span>,</span>
<span id="cb15-71"><a href="projects-funded-by-the-afd.html#cb15-71" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn_ref<span class="sc">$</span>n_iucn), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur les barres.&quot;</span>),</span>
<span id="cb15-72"><a href="projects-funded-by-the-afd.html#cb15-72" tabindex="-1"></a>          <span class="at">x =</span> <span class="st">&quot;Catégories IUCN&quot;</span>, </span>
<span id="cb15-73"><a href="projects-funded-by-the-afd.html#cb15-73" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">&quot;Nombre (%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-74"><a href="projects-funded-by-the-afd.html#cb15-74" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb15-75"><a href="projects-funded-by-the-afd.html#cb15-75" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb15-76"><a href="projects-funded-by-the-afd.html#cb15-76" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb15-77"><a href="projects-funded-by-the-afd.html#cb15-77" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">9</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb15-78"><a href="projects-funded-by-the-afd.html#cb15-78" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb15-79"><a href="projects-funded-by-the-afd.html#cb15-79" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-80"><a href="projects-funded-by-the-afd.html#cb15-80" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-81"><a href="projects-funded-by-the-afd.html#cb15-81" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb15-82"><a href="projects-funded-by-the-afd.html#cb15-82" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb15-83"><a href="projects-funded-by-the-afd.html#cb15-83" tabindex="-1"></a>hist_cat_iucn_ref</span>
<span id="cb15-84"><a href="projects-funded-by-the-afd.html#cb15-84" tabindex="-1"></a></span>
<span id="cb15-85"><a href="projects-funded-by-the-afd.html#cb15-85" tabindex="-1"></a></span>
<span id="cb15-86"><a href="projects-funded-by-the-afd.html#cb15-86" tabindex="-1"></a><span class="co">#Pie chart INcluding non-referenced PAs</span></span>
<span id="cb15-87"><a href="projects-funded-by-the-afd.html#cb15-87" tabindex="-1"></a>pie_cat_iucn <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn, </span>
<span id="cb15-88"><a href="projects-funded-by-the-afd.html#cb15-88" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des)) <span class="sc">%&gt;%</span></span>
<span id="cb15-89"><a href="projects-funded-by-the-afd.html#cb15-89" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-90"><a href="projects-funded-by-the-afd.html#cb15-90" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-91"><a href="projects-funded-by-the-afd.html#cb15-91" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb15-92"><a href="projects-funded-by-the-afd.html#cb15-92" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb15-93"><a href="projects-funded-by-the-afd.html#cb15-93" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb15-94"><a href="projects-funded-by-the-afd.html#cb15-94" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-95"><a href="projects-funded-by-the-afd.html#cb15-95" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb15-96"><a href="projects-funded-by-the-afd.html#cb15-96" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb15-97"><a href="projects-funded-by-the-afd.html#cb15-97" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb15-98"><a href="projects-funded-by-the-afd.html#cb15-98" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb15-99"><a href="projects-funded-by-the-afd.html#cb15-99" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-100"><a href="projects-funded-by-the-afd.html#cb15-100" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par catégorie IUCN (%)&quot;</span>,</span>
<span id="cb15-101"><a href="projects-funded-by-the-afd.html#cb15-101" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn<span class="sc">$</span>n_iucn), <span class="st">&quot;aires protégées&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-102"><a href="projects-funded-by-the-afd.html#cb15-102" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Catégories&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-103"><a href="projects-funded-by-the-afd.html#cb15-103" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb15-104"><a href="projects-funded-by-the-afd.html#cb15-104" tabindex="-1"></a>pie_cat_iucn</span>
<span id="cb15-105"><a href="projects-funded-by-the-afd.html#cb15-105" tabindex="-1"></a></span>
<span id="cb15-106"><a href="projects-funded-by-the-afd.html#cb15-106" tabindex="-1"></a></span>
<span id="cb15-107"><a href="projects-funded-by-the-afd.html#cb15-107" tabindex="-1"></a></span>
<span id="cb15-108"><a href="projects-funded-by-the-afd.html#cb15-108" tabindex="-1"></a><span class="co">#Pie chart EXcluding non-referenced PAs</span></span>
<span id="cb15-109"><a href="projects-funded-by-the-afd.html#cb15-109" tabindex="-1"></a>pie_cat_iucn_ref <span class="ot">=</span> <span class="fu">ggplot</span>(data_cat_iucn_ref, </span>
<span id="cb15-110"><a href="projects-funded-by-the-afd.html#cb15-110" tabindex="-1"></a>                      <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq_iucn, <span class="at">fill =</span> iucn_des)) <span class="sc">%&gt;%</span></span>
<span id="cb15-111"><a href="projects-funded-by-the-afd.html#cb15-111" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-112"><a href="projects-funded-by-the-afd.html#cb15-112" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-113"><a href="projects-funded-by-the-afd.html#cb15-113" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.2</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(freq_iucn, <span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb15-114"><a href="projects-funded-by-the-afd.html#cb15-114" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb15-115"><a href="projects-funded-by-the-afd.html#cb15-115" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb15-116"><a href="projects-funded-by-the-afd.html#cb15-116" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-117"><a href="projects-funded-by-the-afd.html#cb15-117" tabindex="-1"></a>  <span class="co"># + geom_label(aes(x=1.4, label = paste0(freq_iucn, &quot;%&quot;)), </span></span>
<span id="cb15-118"><a href="projects-funded-by-the-afd.html#cb15-118" tabindex="-1"></a>  <span class="co">#              color = &quot;white&quot;, </span></span>
<span id="cb15-119"><a href="projects-funded-by-the-afd.html#cb15-119" tabindex="-1"></a>  <span class="co">#              position = position_stack(vjust = 0.7), size=2.5, </span></span>
<span id="cb15-120"><a href="projects-funded-by-the-afd.html#cb15-120" tabindex="-1"></a>  <span class="co">#              show.legend = FALSE) %&gt;%</span></span>
<span id="cb15-121"><a href="projects-funded-by-the-afd.html#cb15-121" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-122"><a href="projects-funded-by-the-afd.html#cb15-122" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par catégorie IUCN </span><span class="sc">\n</span><span class="st">hors aires non répertoriées (%)&quot;</span>,</span>
<span id="cb15-123"><a href="projects-funded-by-the-afd.html#cb15-123" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_cat_iucn_ref<span class="sc">$</span>n_iucn), <span class="st">&quot;aires protégées&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-124"><a href="projects-funded-by-the-afd.html#cb15-124" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Catégories&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-125"><a href="projects-funded-by-the-afd.html#cb15-125" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb15-126"><a href="projects-funded-by-the-afd.html#cb15-126" tabindex="-1"></a>pie_cat_iucn_ref</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="projects-funded-by-the-afd.html#cb16-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb16-2"><a href="projects-funded-by-the-afd.html#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="projects-funded-by-the-afd.html#cb16-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb16-4"><a href="projects-funded-by-the-afd.html#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="projects-funded-by-the-afd.html#cb16-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_cat_iucn.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb16-6"><a href="projects-funded-by-the-afd.html#cb16-6" tabindex="-1"></a>       <span class="at">plot =</span> hist_cat_iucn,</span>
<span id="cb16-7"><a href="projects-funded-by-the-afd.html#cb16-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb16-8"><a href="projects-funded-by-the-afd.html#cb16-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb16-9"><a href="projects-funded-by-the-afd.html#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="projects-funded-by-the-afd.html#cb16-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_cat_iucn_ref.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb16-11"><a href="projects-funded-by-the-afd.html#cb16-11" tabindex="-1"></a>       <span class="at">plot =</span> hist_cat_iucn_ref,</span>
<span id="cb16-12"><a href="projects-funded-by-the-afd.html#cb16-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb16-13"><a href="projects-funded-by-the-afd.html#cb16-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb16-14"><a href="projects-funded-by-the-afd.html#cb16-14" tabindex="-1"></a></span>
<span id="cb16-15"><a href="projects-funded-by-the-afd.html#cb16-15" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb16-16"><a href="projects-funded-by-the-afd.html#cb16-16" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn,</span>
<span id="cb16-17"><a href="projects-funded-by-the-afd.html#cb16-17" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb16-18"><a href="projects-funded-by-the-afd.html#cb16-18" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb16-19"><a href="projects-funded-by-the-afd.html#cb16-19" tabindex="-1"></a></span>
<span id="cb16-20"><a href="projects-funded-by-the-afd.html#cb16-20" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_cat_iucn_ref.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb16-21"><a href="projects-funded-by-the-afd.html#cb16-21" tabindex="-1"></a>       <span class="at">plot =</span> pie_cat_iucn_ref,</span>
<span id="cb16-22"><a href="projects-funded-by-the-afd.html#cb16-22" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb16-23"><a href="projects-funded-by-the-afd.html#cb16-23" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb16-24"><a href="projects-funded-by-the-afd.html#cb16-24" tabindex="-1"></a></span>
<span id="cb16-25"><a href="projects-funded-by-the-afd.html#cb16-25" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_cat_iucn, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb16-26"><a href="projects-funded-by-the-afd.html#cb16-26" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_cat_iucn.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb16-27"><a href="projects-funded-by-the-afd.html#cb16-27" tabindex="-1"></a></span>
<span id="cb16-28"><a href="projects-funded-by-the-afd.html#cb16-28" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_cat_iucn_ref, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb16-29"><a href="projects-funded-by-the-afd.html#cb16-29" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_cat_iucn_ref.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb16-30"><a href="projects-funded-by-the-afd.html#cb16-30" tabindex="-1"></a></span>
<span id="cb16-31"><a href="projects-funded-by-the-afd.html#cb16-31" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb16-32"><a href="projects-funded-by-the-afd.html#cb16-32" tabindex="-1"></a></span>
<span id="cb16-33"><a href="projects-funded-by-the-afd.html#cb16-33" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb16-34"><a href="projects-funded-by-the-afd.html#cb16-34" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-35"><a href="projects-funded-by-the-afd.html#cb16-35" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb16-36"><a href="projects-funded-by-the-afd.html#cb16-36" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb16-37"><a href="projects-funded-by-the-afd.html#cb16-37" tabindex="-1"></a>  {</span>
<span id="cb16-38"><a href="projects-funded-by-the-afd.html#cb16-38" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb16-39"><a href="projects-funded-by-the-afd.html#cb16-39" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb16-40"><a href="projects-funded-by-the-afd.html#cb16-40" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/IUCN&quot;</span>, </span>
<span id="cb16-41"><a href="projects-funded-by-the-afd.html#cb16-41" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-42"><a href="projects-funded-by-the-afd.html#cb16-42" tabindex="-1"></a>  }</span>
<span id="cb16-43"><a href="projects-funded-by-the-afd.html#cb16-43" tabindex="-1"></a></span>
<span id="cb16-44"><a href="projects-funded-by-the-afd.html#cb16-44" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb16-45"><a href="projects-funded-by-the-afd.html#cb16-45" tabindex="-1"></a></span>
<span id="cb16-46"><a href="projects-funded-by-the-afd.html#cb16-46" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="iucn-categories-by-countries-and-regions" class="section level4 hasAnchor" number="2.3.1.2">
<h4><span class="header-section-number">2.3.1.2</span> IUCN categories by countries and regions<a href="projects-funded-by-the-afd.html#iucn-categories-by-countries-and-regions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="projects-funded-by-the-afd.html#cb17-1" tabindex="-1"></a><span class="co">#Build the distribution of IUCN categories at country level ...</span></span>
<span id="cb17-2"><a href="projects-funded-by-the-afd.html#cb17-2" tabindex="-1"></a>data_iucn_ctry <span class="ot">=</span> <span class="fu">table</span>(data_stat_nodupl<span class="sc">$</span>iucn_des,</span>
<span id="cb17-3"><a href="projects-funded-by-the-afd.html#cb17-3" tabindex="-1"></a>                       data_stat_nodupl<span class="sc">$</span>iso3) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="projects-funded-by-the-afd.html#cb17-4" tabindex="-1"></a>  <span class="co">#Create a table with all iucn categories for each country, and compute the frequencies in percent</span></span>
<span id="cb17-5"><a href="projects-funded-by-the-afd.html#cb17-5" tabindex="-1"></a>  <span class="fu">prop.table</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="projects-funded-by-the-afd.html#cb17-6" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="projects-funded-by-the-afd.html#cb17-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Freq =</span> <span class="fu">round</span>(Freq, <span class="dv">3</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="projects-funded-by-the-afd.html#cb17-8" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Var2, <span class="at">values_from =</span> Freq) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="projects-funded-by-the-afd.html#cb17-9" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;iucn_des&quot;</span> <span class="ot">=</span> <span class="st">&quot;Var1&quot;</span>)</span>
<span id="cb17-10"><a href="projects-funded-by-the-afd.html#cb17-10" tabindex="-1"></a></span>
<span id="cb17-11"><a href="projects-funded-by-the-afd.html#cb17-11" tabindex="-1"></a><span class="co">#... and regional level</span></span>
<span id="cb17-12"><a href="projects-funded-by-the-afd.html#cb17-12" tabindex="-1"></a>data_iucn_reg <span class="ot">=</span> <span class="fu">table</span>(data_stat_nodupl<span class="sc">$</span>iucn_des,</span>
<span id="cb17-13"><a href="projects-funded-by-the-afd.html#cb17-13" tabindex="-1"></a>                       data_stat_nodupl<span class="sc">$</span>direction_regionale) <span class="sc">%&gt;%</span></span>
<span id="cb17-14"><a href="projects-funded-by-the-afd.html#cb17-14" tabindex="-1"></a>    <span class="co">#Create a table with all iucn categories for each country, and compute the frequencies in percent</span></span>
<span id="cb17-15"><a href="projects-funded-by-the-afd.html#cb17-15" tabindex="-1"></a>  <span class="fu">prop.table</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-16"><a href="projects-funded-by-the-afd.html#cb17-16" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-17"><a href="projects-funded-by-the-afd.html#cb17-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Freq =</span> <span class="fu">round</span>(Freq, <span class="dv">3</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-18"><a href="projects-funded-by-the-afd.html#cb17-18" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Var2, <span class="at">values_from =</span> Freq) <span class="sc">%&gt;%</span></span>
<span id="cb17-19"><a href="projects-funded-by-the-afd.html#cb17-19" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;iucn_des&quot;</span> <span class="ot">=</span> <span class="st">&quot;Var1&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="projects-funded-by-the-afd.html#cb18-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb18-2"><a href="projects-funded-by-the-afd.html#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="projects-funded-by-the-afd.html#cb18-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb18-4"><a href="projects-funded-by-the-afd.html#cb18-4" tabindex="-1"></a></span>
<span id="cb18-5"><a href="projects-funded-by-the-afd.html#cb18-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(data_iucn_ctry, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb18-6"><a href="projects-funded-by-the-afd.html#cb18-6" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_iucn_ctry.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb18-7"><a href="projects-funded-by-the-afd.html#cb18-7" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(data_iucn_reg, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb18-8"><a href="projects-funded-by-the-afd.html#cb18-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_iucn_reg.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb18-9"><a href="projects-funded-by-the-afd.html#cb18-9" tabindex="-1"></a></span>
<span id="cb18-10"><a href="projects-funded-by-the-afd.html#cb18-10" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb18-11"><a href="projects-funded-by-the-afd.html#cb18-11" tabindex="-1"></a></span>
<span id="cb18-12"><a href="projects-funded-by-the-afd.html#cb18-12" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb18-13"><a href="projects-funded-by-the-afd.html#cb18-13" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-14"><a href="projects-funded-by-the-afd.html#cb18-14" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb18-15"><a href="projects-funded-by-the-afd.html#cb18-15" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb18-16"><a href="projects-funded-by-the-afd.html#cb18-16" tabindex="-1"></a>  {</span>
<span id="cb18-17"><a href="projects-funded-by-the-afd.html#cb18-17" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb18-18"><a href="projects-funded-by-the-afd.html#cb18-18" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb18-19"><a href="projects-funded-by-the-afd.html#cb18-19" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/IUCN&quot;</span>, </span>
<span id="cb18-20"><a href="projects-funded-by-the-afd.html#cb18-20" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-21"><a href="projects-funded-by-the-afd.html#cb18-21" tabindex="-1"></a>  }</span>
<span id="cb18-22"><a href="projects-funded-by-the-afd.html#cb18-22" tabindex="-1"></a></span>
<span id="cb18-23"><a href="projects-funded-by-the-afd.html#cb18-23" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb18-24"><a href="projects-funded-by-the-afd.html#cb18-24" tabindex="-1"></a></span>
<span id="cb18-25"><a href="projects-funded-by-the-afd.html#cb18-25" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
<div id="ecosystems-excluding-non-referenced-pas" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Ecosystems (excluding non-referenced PAs)<a href="projects-funded-by-the-afd.html#ecosystems-excluding-non-referenced-pas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="proportion-of-pas-by-marine-or-terrestrial-areas" class="section level4 hasAnchor" number="2.3.2.1">
<h4><span class="header-section-number">2.3.2.1</span> Proportion of PAs by marine or terrestrial areas<a href="projects-funded-by-the-afd.html#proportion-of-pas-by-marine-or-terrestrial-areas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="projects-funded-by-the-afd.html#cb19-1" tabindex="-1"></a><span class="co">#Build datasets</span></span>
<span id="cb19-2"><a href="projects-funded-by-the-afd.html#cb19-2" tabindex="-1"></a>data_eco <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="projects-funded-by-the-afd.html#cb19-3" tabindex="-1"></a>  <span class="co">#subset non-referencded PAs (have NA ecosysteme)</span></span>
<span id="cb19-4"><a href="projects-funded-by-the-afd.html#cb19-4" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="fu">is.na</span>(marine) <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="projects-funded-by-the-afd.html#cb19-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marine =</span> <span class="fu">as.factor</span>(marine))</span>
<span id="cb19-6"><a href="projects-funded-by-the-afd.html#cb19-6" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_en <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb19-7"><a href="projects-funded-by-the-afd.html#cb19-7" tabindex="-1"></a>                              <span class="st">&quot;Terrestrial&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb19-8"><a href="projects-funded-by-the-afd.html#cb19-8" tabindex="-1"></a>                              <span class="st">&quot;Coastal&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb19-9"><a href="projects-funded-by-the-afd.html#cb19-9" tabindex="-1"></a>                              <span class="st">&quot;Marine&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb19-10"><a href="projects-funded-by-the-afd.html#cb19-10" tabindex="-1"></a>data_eco<span class="sc">$</span>ecosyst_fr <span class="ot">=</span> <span class="fu">fct_recode</span>(data_eco<span class="sc">$</span>marine, </span>
<span id="cb19-11"><a href="projects-funded-by-the-afd.html#cb19-11" tabindex="-1"></a>                              <span class="st">&quot;Terrestre&quot;</span><span class="ot">=</span><span class="st">&quot;0&quot;</span>, </span>
<span id="cb19-12"><a href="projects-funded-by-the-afd.html#cb19-12" tabindex="-1"></a>                              <span class="st">&quot;Côtier&quot;</span><span class="ot">=</span><span class="st">&quot;1&quot;</span>, </span>
<span id="cb19-13"><a href="projects-funded-by-the-afd.html#cb19-13" tabindex="-1"></a>                              <span class="st">&quot;Marin&quot;</span><span class="ot">=</span><span class="st">&quot;2&quot;</span>)</span>
<span id="cb19-14"><a href="projects-funded-by-the-afd.html#cb19-14" tabindex="-1"></a></span>
<span id="cb19-15"><a href="projects-funded-by-the-afd.html#cb19-15" tabindex="-1"></a>data_eco_hist <span class="ot">=</span> data_eco <span class="sc">%&gt;%</span></span>
<span id="cb19-16"><a href="projects-funded-by-the-afd.html#cb19-16" tabindex="-1"></a>  <span class="fu">group_by</span>(ecosyst_en, ecosyst_fr) <span class="sc">%&gt;%</span></span>
<span id="cb19-17"><a href="projects-funded-by-the-afd.html#cb19-17" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb19-18"><a href="projects-funded-by-the-afd.html#cb19-18" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_eco), <span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-19"><a href="projects-funded-by-the-afd.html#cb19-19" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb19-20"><a href="projects-funded-by-the-afd.html#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="projects-funded-by-the-afd.html#cb19-21" tabindex="-1"></a>tbl_eco_world_fr <span class="ot">=</span> data_eco_hist <span class="sc">%&gt;%</span></span>
<span id="cb19-22"><a href="projects-funded-by-the-afd.html#cb19-22" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(ecosyst_fr, n, freq)) <span class="sc">%&gt;%</span></span>
<span id="cb19-23"><a href="projects-funded-by-the-afd.html#cb19-23" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;Ecosystème&quot;</span> <span class="ot">=</span> <span class="st">&quot;ecosyst_fr&quot;</span>,</span>
<span id="cb19-24"><a href="projects-funded-by-the-afd.html#cb19-24" tabindex="-1"></a>         <span class="st">&quot;Nombre d&#39;AP&quot;</span> <span class="ot">=</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb19-25"><a href="projects-funded-by-the-afd.html#cb19-25" tabindex="-1"></a>         <span class="st">&quot;Proportion d&#39;AP(%)&quot;</span> <span class="ot">=</span> <span class="st">&quot;freq&quot;</span>)</span>
<span id="cb19-26"><a href="projects-funded-by-the-afd.html#cb19-26" tabindex="-1"></a></span>
<span id="cb19-27"><a href="projects-funded-by-the-afd.html#cb19-27" tabindex="-1"></a>tbl_eco_world_en <span class="ot">=</span> data_eco_hist <span class="sc">%&gt;%</span></span>
<span id="cb19-28"><a href="projects-funded-by-the-afd.html#cb19-28" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(ecosyst_en, n, freq)) <span class="sc">%&gt;%</span></span>
<span id="cb19-29"><a href="projects-funded-by-the-afd.html#cb19-29" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;Ecosystem&quot;</span> <span class="ot">=</span> <span class="st">&quot;ecosyst_en&quot;</span>,</span>
<span id="cb19-30"><a href="projects-funded-by-the-afd.html#cb19-30" tabindex="-1"></a>         <span class="st">&quot;Number of PAs&quot;</span> <span class="ot">=</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb19-31"><a href="projects-funded-by-the-afd.html#cb19-31" tabindex="-1"></a>         <span class="st">&quot;Share of PAs(%)&quot;</span> <span class="ot">=</span> <span class="st">&quot;freq&quot;</span>)</span>
<span id="cb19-32"><a href="projects-funded-by-the-afd.html#cb19-32" tabindex="-1"></a></span>
<span id="cb19-33"><a href="projects-funded-by-the-afd.html#cb19-33" tabindex="-1"></a></span>
<span id="cb19-34"><a href="projects-funded-by-the-afd.html#cb19-34" tabindex="-1"></a><span class="co">#Histogram in share (in French)</span></span>
<span id="cb19-35"><a href="projects-funded-by-the-afd.html#cb19-35" tabindex="-1"></a>hist_eco_shr_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-36"><a href="projects-funded-by-the-afd.html#cb19-36" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> ecosyst_fr, <span class="at">y =</span> freq, <span class="at">fill =</span> ecosyst_fr)) <span class="sc">%&gt;%</span></span>
<span id="cb19-37"><a href="projects-funded-by-the-afd.html#cb19-37" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-38"><a href="projects-funded-by-the-afd.html#cb19-38" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> freq), </span>
<span id="cb19-39"><a href="projects-funded-by-the-afd.html#cb19-39" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb19-40"><a href="projects-funded-by-the-afd.html#cb19-40" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-41"><a href="projects-funded-by-the-afd.html#cb19-41" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par type d&#39;écosystème </span><span class="sc">\n</span><span class="st">(hors AP non-référencées)&quot;</span>,</span>
<span id="cb19-42"><a href="projects-funded-by-the-afd.html#cb19-42" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur les barres.&quot;</span>),</span>
<span id="cb19-43"><a href="projects-funded-by-the-afd.html#cb19-43" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Type d&#39;écosystème&quot;</span>,</span>
<span id="cb19-44"><a href="projects-funded-by-the-afd.html#cb19-44" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-45"><a href="projects-funded-by-the-afd.html#cb19-45" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb19-46"><a href="projects-funded-by-the-afd.html#cb19-46" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb19-47"><a href="projects-funded-by-the-afd.html#cb19-47" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb19-48"><a href="projects-funded-by-the-afd.html#cb19-48" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb19-49"><a href="projects-funded-by-the-afd.html#cb19-49" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb19-50"><a href="projects-funded-by-the-afd.html#cb19-50" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb19-51"><a href="projects-funded-by-the-afd.html#cb19-51" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-52"><a href="projects-funded-by-the-afd.html#cb19-52" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-53"><a href="projects-funded-by-the-afd.html#cb19-53" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-54"><a href="projects-funded-by-the-afd.html#cb19-54" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb19-55"><a href="projects-funded-by-the-afd.html#cb19-55" tabindex="-1"></a>hist_eco_shr_fr</span>
<span id="cb19-56"><a href="projects-funded-by-the-afd.html#cb19-56" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb19-57"><a href="projects-funded-by-the-afd.html#cb19-57" tabindex="-1"></a></span>
<span id="cb19-58"><a href="projects-funded-by-the-afd.html#cb19-58" tabindex="-1"></a></span>
<span id="cb19-59"><a href="projects-funded-by-the-afd.html#cb19-59" tabindex="-1"></a></span>
<span id="cb19-60"><a href="projects-funded-by-the-afd.html#cb19-60" tabindex="-1"></a><span class="co">#Histogram in share (in English)</span></span>
<span id="cb19-61"><a href="projects-funded-by-the-afd.html#cb19-61" tabindex="-1"></a>hist_eco_shr_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-62"><a href="projects-funded-by-the-afd.html#cb19-62" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> ecosyst_en, <span class="at">y =</span> freq, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb19-63"><a href="projects-funded-by-the-afd.html#cb19-63" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-64"><a href="projects-funded-by-the-afd.html#cb19-64" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> freq), </span>
<span id="cb19-65"><a href="projects-funded-by-the-afd.html#cb19-65" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb19-66"><a href="projects-funded-by-the-afd.html#cb19-66" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-67"><a href="projects-funded-by-the-afd.html#cb19-67" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type </span><span class="sc">\n</span><span class="st">(excluding non-references PAs)&quot;</span>,</span>
<span id="cb19-68"><a href="projects-funded-by-the-afd.html#cb19-68" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas. Number of areas indicated above.&quot;</span>),</span>
<span id="cb19-69"><a href="projects-funded-by-the-afd.html#cb19-69" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb19-70"><a href="projects-funded-by-the-afd.html#cb19-70" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-71"><a href="projects-funded-by-the-afd.html#cb19-71" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb19-72"><a href="projects-funded-by-the-afd.html#cb19-72" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb19-73"><a href="projects-funded-by-the-afd.html#cb19-73" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb19-74"><a href="projects-funded-by-the-afd.html#cb19-74" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb19-75"><a href="projects-funded-by-the-afd.html#cb19-75" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb19-76"><a href="projects-funded-by-the-afd.html#cb19-76" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb19-77"><a href="projects-funded-by-the-afd.html#cb19-77" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-78"><a href="projects-funded-by-the-afd.html#cb19-78" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-79"><a href="projects-funded-by-the-afd.html#cb19-79" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-80"><a href="projects-funded-by-the-afd.html#cb19-80" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb19-81"><a href="projects-funded-by-the-afd.html#cb19-81" tabindex="-1"></a><span class="co">#hist_eco_shr_en</span></span>
<span id="cb19-82"><a href="projects-funded-by-the-afd.html#cb19-82" tabindex="-1"></a></span>
<span id="cb19-83"><a href="projects-funded-by-the-afd.html#cb19-83" tabindex="-1"></a></span>
<span id="cb19-84"><a href="projects-funded-by-the-afd.html#cb19-84" tabindex="-1"></a>  </span>
<span id="cb19-85"><a href="projects-funded-by-the-afd.html#cb19-85" tabindex="-1"></a><span class="co">#Histogram in number (in French)</span></span>
<span id="cb19-86"><a href="projects-funded-by-the-afd.html#cb19-86" tabindex="-1"></a>hist_eco_n_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-87"><a href="projects-funded-by-the-afd.html#cb19-87" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> ecosyst_fr, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_fr)) <span class="sc">%&gt;%</span></span>
<span id="cb19-88"><a href="projects-funded-by-the-afd.html#cb19-88" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-89"><a href="projects-funded-by-the-afd.html#cb19-89" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par type d&#39;écosystème </span><span class="sc">\n</span><span class="st">(hors AP non-référencées)&quot;</span>,</span>
<span id="cb19-90"><a href="projects-funded-by-the-afd.html#cb19-90" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;aires protégées&quot;</span>),</span>
<span id="cb19-91"><a href="projects-funded-by-the-afd.html#cb19-91" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Type d&#39;écosystème&quot;</span>,</span>
<span id="cb19-92"><a href="projects-funded-by-the-afd.html#cb19-92" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-93"><a href="projects-funded-by-the-afd.html#cb19-93" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb19-94"><a href="projects-funded-by-the-afd.html#cb19-94" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb19-95"><a href="projects-funded-by-the-afd.html#cb19-95" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb19-96"><a href="projects-funded-by-the-afd.html#cb19-96" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb19-97"><a href="projects-funded-by-the-afd.html#cb19-97" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb19-98"><a href="projects-funded-by-the-afd.html#cb19-98" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb19-99"><a href="projects-funded-by-the-afd.html#cb19-99" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-100"><a href="projects-funded-by-the-afd.html#cb19-100" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-101"><a href="projects-funded-by-the-afd.html#cb19-101" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-102"><a href="projects-funded-by-the-afd.html#cb19-102" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb19-103"><a href="projects-funded-by-the-afd.html#cb19-103" tabindex="-1"></a>hist_eco_n_fr</span>
<span id="cb19-104"><a href="projects-funded-by-the-afd.html#cb19-104" tabindex="-1"></a></span>
<span id="cb19-105"><a href="projects-funded-by-the-afd.html#cb19-105" tabindex="-1"></a></span>
<span id="cb19-106"><a href="projects-funded-by-the-afd.html#cb19-106" tabindex="-1"></a></span>
<span id="cb19-107"><a href="projects-funded-by-the-afd.html#cb19-107" tabindex="-1"></a></span>
<span id="cb19-108"><a href="projects-funded-by-the-afd.html#cb19-108" tabindex="-1"></a><span class="co">#Histogram in number (in English)</span></span>
<span id="cb19-109"><a href="projects-funded-by-the-afd.html#cb19-109" tabindex="-1"></a>hist_eco_n_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-110"><a href="projects-funded-by-the-afd.html#cb19-110" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> ecosyst_en, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb19-111"><a href="projects-funded-by-the-afd.html#cb19-111" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-112"><a href="projects-funded-by-the-afd.html#cb19-112" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type </span><span class="sc">\n</span><span class="st">(excluding non-referenced PAs)&quot;</span>,</span>
<span id="cb19-113"><a href="projects-funded-by-the-afd.html#cb19-113" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas&quot;</span>),</span>
<span id="cb19-114"><a href="projects-funded-by-the-afd.html#cb19-114" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb19-115"><a href="projects-funded-by-the-afd.html#cb19-115" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-116"><a href="projects-funded-by-the-afd.html#cb19-116" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb19-117"><a href="projects-funded-by-the-afd.html#cb19-117" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb19-118"><a href="projects-funded-by-the-afd.html#cb19-118" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb19-119"><a href="projects-funded-by-the-afd.html#cb19-119" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb19-120"><a href="projects-funded-by-the-afd.html#cb19-120" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb19-121"><a href="projects-funded-by-the-afd.html#cb19-121" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb19-122"><a href="projects-funded-by-the-afd.html#cb19-122" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-123"><a href="projects-funded-by-the-afd.html#cb19-123" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-124"><a href="projects-funded-by-the-afd.html#cb19-124" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb19-125"><a href="projects-funded-by-the-afd.html#cb19-125" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb19-126"><a href="projects-funded-by-the-afd.html#cb19-126" tabindex="-1"></a><span class="co">#hist_eco_n_en</span></span>
<span id="cb19-127"><a href="projects-funded-by-the-afd.html#cb19-127" tabindex="-1"></a></span>
<span id="cb19-128"><a href="projects-funded-by-the-afd.html#cb19-128" tabindex="-1"></a><span class="co">#Pie chart (in French)</span></span>
<span id="cb19-129"><a href="projects-funded-by-the-afd.html#cb19-129" tabindex="-1"></a>pie_eco_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-130"><a href="projects-funded-by-the-afd.html#cb19-130" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> freq, <span class="at">fill =</span> ecosyst_fr)) <span class="sc">%&gt;%</span></span>
<span id="cb19-131"><a href="projects-funded-by-the-afd.html#cb19-131" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-132"><a href="projects-funded-by-the-afd.html#cb19-132" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(freq, <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb19-133"><a href="projects-funded-by-the-afd.html#cb19-133" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb19-134"><a href="projects-funded-by-the-afd.html#cb19-134" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-135"><a href="projects-funded-by-the-afd.html#cb19-135" tabindex="-1"></a><span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-136"><a href="projects-funded-by-the-afd.html#cb19-136" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par type d&#39;écosystème </span><span class="sc">\n</span><span class="st">(hors AP non-référencées)&quot;</span>,</span>
<span id="cb19-137"><a href="projects-funded-by-the-afd.html#cb19-137" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;aires protégées&quot;</span>),</span>
<span id="cb19-138"><a href="projects-funded-by-the-afd.html#cb19-138" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Type d&#39;écosystème&quot;</span>,</span>
<span id="cb19-139"><a href="projects-funded-by-the-afd.html#cb19-139" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-140"><a href="projects-funded-by-the-afd.html#cb19-140" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Ecosystème&quot;</span>, <span class="at">palette=</span><span class="st">&quot;Paired&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-141"><a href="projects-funded-by-the-afd.html#cb19-141" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb19-142"><a href="projects-funded-by-the-afd.html#cb19-142" tabindex="-1"></a><span class="co">#pie_eco_fr</span></span>
<span id="cb19-143"><a href="projects-funded-by-the-afd.html#cb19-143" tabindex="-1"></a></span>
<span id="cb19-144"><a href="projects-funded-by-the-afd.html#cb19-144" tabindex="-1"></a></span>
<span id="cb19-145"><a href="projects-funded-by-the-afd.html#cb19-145" tabindex="-1"></a><span class="co">#Histogram in number (in English)</span></span>
<span id="cb19-146"><a href="projects-funded-by-the-afd.html#cb19-146" tabindex="-1"></a>pie_eco_en <span class="ot">=</span> <span class="fu">ggplot</span>(data_eco_hist, </span>
<span id="cb19-147"><a href="projects-funded-by-the-afd.html#cb19-147" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> ecosyst_en)) <span class="sc">%&gt;%</span></span>
<span id="cb19-148"><a href="projects-funded-by-the-afd.html#cb19-148" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-149"><a href="projects-funded-by-the-afd.html#cb19-149" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, <span class="at">label =</span> <span class="fu">paste0</span>(freq, <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb19-150"><a href="projects-funded-by-the-afd.html#cb19-150" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb19-151"><a href="projects-funded-by-the-afd.html#cb19-151" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-152"><a href="projects-funded-by-the-afd.html#cb19-152" tabindex="-1"></a><span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-153"><a href="projects-funded-by-the-afd.html#cb19-153" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion of protected areas by ecosystem type </span><span class="sc">\n</span><span class="st">(exluding non-referenced PAs)&quot;</span>,</span>
<span id="cb19-154"><a href="projects-funded-by-the-afd.html#cb19-154" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_eco_hist<span class="sc">$</span>n), <span class="st">&quot;protected areas&quot;</span>),</span>
<span id="cb19-155"><a href="projects-funded-by-the-afd.html#cb19-155" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Ecosystem type&quot;</span>,</span>
<span id="cb19-156"><a href="projects-funded-by-the-afd.html#cb19-156" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion of protected areas&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-157"><a href="projects-funded-by-the-afd.html#cb19-157" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Ecosystem&quot;</span>, <span class="at">palette=</span><span class="st">&quot;Paired&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-158"><a href="projects-funded-by-the-afd.html#cb19-158" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb19-159"><a href="projects-funded-by-the-afd.html#cb19-159" tabindex="-1"></a>pie_eco_en</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="projects-funded-by-the-afd.html#cb20-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb20-2"><a href="projects-funded-by-the-afd.html#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="projects-funded-by-the-afd.html#cb20-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb20-4"><a href="projects-funded-by-the-afd.html#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="projects-funded-by-the-afd.html#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="projects-funded-by-the-afd.html#cb20-6" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_eco_shr_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-7"><a href="projects-funded-by-the-afd.html#cb20-7" tabindex="-1"></a>       <span class="at">plot =</span> hist_eco_shr_fr,</span>
<span id="cb20-8"><a href="projects-funded-by-the-afd.html#cb20-8" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-9"><a href="projects-funded-by-the-afd.html#cb20-9" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-10"><a href="projects-funded-by-the-afd.html#cb20-10" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_eco_shr_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-11"><a href="projects-funded-by-the-afd.html#cb20-11" tabindex="-1"></a>       <span class="at">plot =</span> hist_eco_shr_en,</span>
<span id="cb20-12"><a href="projects-funded-by-the-afd.html#cb20-12" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-13"><a href="projects-funded-by-the-afd.html#cb20-13" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-14"><a href="projects-funded-by-the-afd.html#cb20-14" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_eco_n_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-15"><a href="projects-funded-by-the-afd.html#cb20-15" tabindex="-1"></a>       <span class="at">plot =</span> hist_eco_n_fr,</span>
<span id="cb20-16"><a href="projects-funded-by-the-afd.html#cb20-16" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-17"><a href="projects-funded-by-the-afd.html#cb20-17" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-18"><a href="projects-funded-by-the-afd.html#cb20-18" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_eco_n_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-19"><a href="projects-funded-by-the-afd.html#cb20-19" tabindex="-1"></a>       <span class="at">plot =</span> hist_eco_n_en,</span>
<span id="cb20-20"><a href="projects-funded-by-the-afd.html#cb20-20" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-21"><a href="projects-funded-by-the-afd.html#cb20-21" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-22"><a href="projects-funded-by-the-afd.html#cb20-22" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_eco_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-23"><a href="projects-funded-by-the-afd.html#cb20-23" tabindex="-1"></a>       <span class="at">plot =</span> pie_eco_fr,</span>
<span id="cb20-24"><a href="projects-funded-by-the-afd.html#cb20-24" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-25"><a href="projects-funded-by-the-afd.html#cb20-25" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-26"><a href="projects-funded-by-the-afd.html#cb20-26" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_eco_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb20-27"><a href="projects-funded-by-the-afd.html#cb20-27" tabindex="-1"></a>       <span class="at">plot =</span> pie_eco_en,</span>
<span id="cb20-28"><a href="projects-funded-by-the-afd.html#cb20-28" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb20-29"><a href="projects-funded-by-the-afd.html#cb20-29" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb20-30"><a href="projects-funded-by-the-afd.html#cb20-30" tabindex="-1"></a></span>
<span id="cb20-31"><a href="projects-funded-by-the-afd.html#cb20-31" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_eco_world_fr, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb20-32"><a href="projects-funded-by-the-afd.html#cb20-32" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_ecosyst_fr.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb20-33"><a href="projects-funded-by-the-afd.html#cb20-33" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_eco_world_en, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb20-34"><a href="projects-funded-by-the-afd.html#cb20-34" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_ecosyst_en.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb20-35"><a href="projects-funded-by-the-afd.html#cb20-35" tabindex="-1"></a></span>
<span id="cb20-36"><a href="projects-funded-by-the-afd.html#cb20-36" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb20-37"><a href="projects-funded-by-the-afd.html#cb20-37" tabindex="-1"></a></span>
<span id="cb20-38"><a href="projects-funded-by-the-afd.html#cb20-38" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb20-39"><a href="projects-funded-by-the-afd.html#cb20-39" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-40"><a href="projects-funded-by-the-afd.html#cb20-40" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb20-41"><a href="projects-funded-by-the-afd.html#cb20-41" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb20-42"><a href="projects-funded-by-the-afd.html#cb20-42" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb20-43"><a href="projects-funded-by-the-afd.html#cb20-43" tabindex="-1"></a>{</span>
<span id="cb20-44"><a href="projects-funded-by-the-afd.html#cb20-44" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb20-45"><a href="projects-funded-by-the-afd.html#cb20-45" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb20-46"><a href="projects-funded-by-the-afd.html#cb20-46" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb20-47"><a href="projects-funded-by-the-afd.html#cb20-47" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/ecosysteme&quot;</span>, </span>
<span id="cb20-48"><a href="projects-funded-by-the-afd.html#cb20-48" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-49"><a href="projects-funded-by-the-afd.html#cb20-49" tabindex="-1"></a>  }</span>
<span id="cb20-50"><a href="projects-funded-by-the-afd.html#cb20-50" tabindex="-1"></a></span>
<span id="cb20-51"><a href="projects-funded-by-the-afd.html#cb20-51" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb20-52"><a href="projects-funded-by-the-afd.html#cb20-52" tabindex="-1"></a></span>
<span id="cb20-53"><a href="projects-funded-by-the-afd.html#cb20-53" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
<div id="distribution-of-pas-across-countries-and-regions" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Distribution of PAs across countries and regions<a href="projects-funded-by-the-afd.html#distribution-of-pas-across-countries-and-regions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="statistics-at-country-level" class="section level4 hasAnchor" number="2.3.3.1">
<h4><span class="header-section-number">2.3.3.1</span> Statistics at country level<a href="projects-funded-by-the-afd.html#statistics-at-country-level" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="projects-funded-by-the-afd.html#cb21-1" tabindex="-1"></a>data_distrib_ctry <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="projects-funded-by-the-afd.html#cb21-2" tabindex="-1"></a>  <span class="fu">group_by</span>(pays, iso3) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="projects-funded-by-the-afd.html#cb21-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb21-4"><a href="projects-funded-by-the-afd.html#cb21-4" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_stat_nodupl), <span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="projects-funded-by-the-afd.html#cb21-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb21-6"><a href="projects-funded-by-the-afd.html#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="projects-funded-by-the-afd.html#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="projects-funded-by-the-afd.html#cb21-8" tabindex="-1"></a>data_distrib_ctry_top <span class="ot">=</span> data_distrib_ctry <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="projects-funded-by-the-afd.html#cb21-9" tabindex="-1"></a>  <span class="fu">subset</span>(freq <span class="sc">&gt;=</span> <span class="dv">5</span>)</span>
<span id="cb21-10"><a href="projects-funded-by-the-afd.html#cb21-10" tabindex="-1"></a></span>
<span id="cb21-11"><a href="projects-funded-by-the-afd.html#cb21-11" tabindex="-1"></a><span class="co">#Histogram in share (in French) for top countries</span></span>
<span id="cb21-12"><a href="projects-funded-by-the-afd.html#cb21-12" tabindex="-1"></a>hist_distrib_ctry_top_shr_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_distrib_ctry_top, </span>
<span id="cb21-13"><a href="projects-funded-by-the-afd.html#cb21-13" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(pays, <span class="sc">-</span>freq), <span class="at">y =</span> freq, <span class="at">fill =</span> pays)) <span class="sc">%&gt;%</span></span>
<span id="cb21-14"><a href="projects-funded-by-the-afd.html#cb21-14" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-15"><a href="projects-funded-by-the-afd.html#cb21-15" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> freq), </span>
<span id="cb21-16"><a href="projects-funded-by-the-afd.html#cb21-16" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb21-17"><a href="projects-funded-by-the-afd.html#cb21-17" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-18"><a href="projects-funded-by-the-afd.html#cb21-18" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Les pays abritant le plus d&#39;aires protégées&quot;</span>,</span>
<span id="cb21-19"><a href="projects-funded-by-the-afd.html#cb21-19" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_distrib_ctry<span class="sc">$</span>n), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué à la base du graphique&quot;</span>),</span>
<span id="cb21-20"><a href="projects-funded-by-the-afd.html#cb21-20" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Pays&quot;</span>,</span>
<span id="cb21-21"><a href="projects-funded-by-the-afd.html#cb21-21" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-22"><a href="projects-funded-by-the-afd.html#cb21-22" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb21-23"><a href="projects-funded-by-the-afd.html#cb21-23" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb21-24"><a href="projects-funded-by-the-afd.html#cb21-24" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb21-25"><a href="projects-funded-by-the-afd.html#cb21-25" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb21-26"><a href="projects-funded-by-the-afd.html#cb21-26" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb21-27"><a href="projects-funded-by-the-afd.html#cb21-27" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb21-28"><a href="projects-funded-by-the-afd.html#cb21-28" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-29"><a href="projects-funded-by-the-afd.html#cb21-29" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-30"><a href="projects-funded-by-the-afd.html#cb21-30" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-31"><a href="projects-funded-by-the-afd.html#cb21-31" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb21-32"><a href="projects-funded-by-the-afd.html#cb21-32" tabindex="-1"></a>hist_distrib_ctry_top_shr_fr</span>
<span id="cb21-33"><a href="projects-funded-by-the-afd.html#cb21-33" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb21-34"><a href="projects-funded-by-the-afd.html#cb21-34" tabindex="-1"></a></span>
<span id="cb21-35"><a href="projects-funded-by-the-afd.html#cb21-35" tabindex="-1"></a></span>
<span id="cb21-36"><a href="projects-funded-by-the-afd.html#cb21-36" tabindex="-1"></a><span class="co">#Histogram in number (in French)</span></span>
<span id="cb21-37"><a href="projects-funded-by-the-afd.html#cb21-37" tabindex="-1"></a>hist_distrib_ctry_n_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_distrib_ctry, </span>
<span id="cb21-38"><a href="projects-funded-by-the-afd.html#cb21-38" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(pays, <span class="sc">-</span>n), <span class="at">y =</span> n, <span class="at">fill =</span> pays)) <span class="sc">%&gt;%</span></span>
<span id="cb21-39"><a href="projects-funded-by-the-afd.html#cb21-39" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-40"><a href="projects-funded-by-the-afd.html#cb21-40" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> n), </span>
<span id="cb21-41"><a href="projects-funded-by-the-afd.html#cb21-41" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb21-42"><a href="projects-funded-by-the-afd.html#cb21-42" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-43"><a href="projects-funded-by-the-afd.html#cb21-43" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par pays&quot;</span>,</span>
<span id="cb21-44"><a href="projects-funded-by-the-afd.html#cb21-44" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_distrib_ctry<span class="sc">$</span>n), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur chaque barre&quot;</span>),</span>
<span id="cb21-45"><a href="projects-funded-by-the-afd.html#cb21-45" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Pays&quot;</span>,</span>
<span id="cb21-46"><a href="projects-funded-by-the-afd.html#cb21-46" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-47"><a href="projects-funded-by-the-afd.html#cb21-47" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb21-48"><a href="projects-funded-by-the-afd.html#cb21-48" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb21-49"><a href="projects-funded-by-the-afd.html#cb21-49" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb21-50"><a href="projects-funded-by-the-afd.html#cb21-50" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb21-51"><a href="projects-funded-by-the-afd.html#cb21-51" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb21-52"><a href="projects-funded-by-the-afd.html#cb21-52" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb21-53"><a href="projects-funded-by-the-afd.html#cb21-53" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-54"><a href="projects-funded-by-the-afd.html#cb21-54" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-55"><a href="projects-funded-by-the-afd.html#cb21-55" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb21-56"><a href="projects-funded-by-the-afd.html#cb21-56" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb21-57"><a href="projects-funded-by-the-afd.html#cb21-57" tabindex="-1"></a>hist_distrib_ctry_n_fr</span>
<span id="cb21-58"><a href="projects-funded-by-the-afd.html#cb21-58" tabindex="-1"></a><span class="co"># </span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="projects-funded-by-the-afd.html#cb22-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb22-2"><a href="projects-funded-by-the-afd.html#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="projects-funded-by-the-afd.html#cb22-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb22-4"><a href="projects-funded-by-the-afd.html#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="projects-funded-by-the-afd.html#cb22-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_distrib_ctry_top_shr_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb22-6"><a href="projects-funded-by-the-afd.html#cb22-6" tabindex="-1"></a>       <span class="at">plot =</span> hist_distrib_ctry_top_shr_fr,</span>
<span id="cb22-7"><a href="projects-funded-by-the-afd.html#cb22-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb22-8"><a href="projects-funded-by-the-afd.html#cb22-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb22-9"><a href="projects-funded-by-the-afd.html#cb22-9" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_distrib_ctry_n_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb22-10"><a href="projects-funded-by-the-afd.html#cb22-10" tabindex="-1"></a>       <span class="at">plot =</span> hist_distrib_ctry_n_fr,</span>
<span id="cb22-11"><a href="projects-funded-by-the-afd.html#cb22-11" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb22-12"><a href="projects-funded-by-the-afd.html#cb22-12" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb22-13"><a href="projects-funded-by-the-afd.html#cb22-13" tabindex="-1"></a></span>
<span id="cb22-14"><a href="projects-funded-by-the-afd.html#cb22-14" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb22-15"><a href="projects-funded-by-the-afd.html#cb22-15" tabindex="-1"></a></span>
<span id="cb22-16"><a href="projects-funded-by-the-afd.html#cb22-16" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb22-17"><a href="projects-funded-by-the-afd.html#cb22-17" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-18"><a href="projects-funded-by-the-afd.html#cb22-18" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb22-19"><a href="projects-funded-by-the-afd.html#cb22-19" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb22-20"><a href="projects-funded-by-the-afd.html#cb22-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb22-21"><a href="projects-funded-by-the-afd.html#cb22-21" tabindex="-1"></a>{</span>
<span id="cb22-22"><a href="projects-funded-by-the-afd.html#cb22-22" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb22-23"><a href="projects-funded-by-the-afd.html#cb22-23" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb22-24"><a href="projects-funded-by-the-afd.html#cb22-24" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb22-25"><a href="projects-funded-by-the-afd.html#cb22-25" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/distribution&quot;</span>, </span>
<span id="cb22-26"><a href="projects-funded-by-the-afd.html#cb22-26" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-27"><a href="projects-funded-by-the-afd.html#cb22-27" tabindex="-1"></a>  }</span>
<span id="cb22-28"><a href="projects-funded-by-the-afd.html#cb22-28" tabindex="-1"></a></span>
<span id="cb22-29"><a href="projects-funded-by-the-afd.html#cb22-29" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb22-30"><a href="projects-funded-by-the-afd.html#cb22-30" tabindex="-1"></a></span>
<span id="cb22-31"><a href="projects-funded-by-the-afd.html#cb22-31" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="statistics-at-region-level" class="section level4 hasAnchor" number="2.3.3.2">
<h4><span class="header-section-number">2.3.3.2</span> Statistics at region level<a href="projects-funded-by-the-afd.html#statistics-at-region-level" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="projects-funded-by-the-afd.html#cb23-1" tabindex="-1"></a>data_distrib_reg <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="projects-funded-by-the-afd.html#cb23-2" tabindex="-1"></a>  <span class="fu">group_by</span>(direction_regionale) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="projects-funded-by-the-afd.html#cb23-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb23-4"><a href="projects-funded-by-the-afd.html#cb23-4" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_stat_nodupl), <span class="dv">3</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="projects-funded-by-the-afd.html#cb23-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="projects-funded-by-the-afd.html#cb23-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">gsub</span>(<span class="st">&quot;Dr &quot;</span>, <span class="st">&quot;&quot;</span>, direction_regionale),</span>
<span id="cb23-7"><a href="projects-funded-by-the-afd.html#cb23-7" tabindex="-1"></a>         <span class="at">.after =</span> <span class="st">&quot;direction_regionale&quot;</span>)</span>
<span id="cb23-8"><a href="projects-funded-by-the-afd.html#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="projects-funded-by-the-afd.html#cb23-9" tabindex="-1"></a></span>
<span id="cb23-10"><a href="projects-funded-by-the-afd.html#cb23-10" tabindex="-1"></a>data_distrib_reg_top <span class="ot">=</span> data_distrib_reg <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="projects-funded-by-the-afd.html#cb23-11" tabindex="-1"></a>  <span class="fu">subset</span>(freq <span class="sc">&gt;=</span> <span class="dv">5</span>)</span>
<span id="cb23-12"><a href="projects-funded-by-the-afd.html#cb23-12" tabindex="-1"></a></span>
<span id="cb23-13"><a href="projects-funded-by-the-afd.html#cb23-13" tabindex="-1"></a><span class="co">#Histogram in share (in French) for top countries</span></span>
<span id="cb23-14"><a href="projects-funded-by-the-afd.html#cb23-14" tabindex="-1"></a>hist_distrib_reg_top_shr_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_distrib_reg_top, </span>
<span id="cb23-15"><a href="projects-funded-by-the-afd.html#cb23-15" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(region, <span class="sc">-</span>freq), <span class="at">y =</span> freq, <span class="at">fill =</span> region)) <span class="sc">%&gt;%</span></span>
<span id="cb23-16"><a href="projects-funded-by-the-afd.html#cb23-16" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-17"><a href="projects-funded-by-the-afd.html#cb23-17" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> freq), </span>
<span id="cb23-18"><a href="projects-funded-by-the-afd.html#cb23-18" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb23-19"><a href="projects-funded-by-the-afd.html#cb23-19" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="projects-funded-by-the-afd.html#cb23-20" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Les directions régionales finançant le plus d&#39;aires protégées&quot;</span>,</span>
<span id="cb23-21"><a href="projects-funded-by-the-afd.html#cb23-21" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_distrib_reg<span class="sc">$</span>n), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur chaque barre.&quot;</span>),</span>
<span id="cb23-22"><a href="projects-funded-by-the-afd.html#cb23-22" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Direction régionale&quot;</span>,</span>
<span id="cb23-23"><a href="projects-funded-by-the-afd.html#cb23-23" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-24"><a href="projects-funded-by-the-afd.html#cb23-24" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb23-25"><a href="projects-funded-by-the-afd.html#cb23-25" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb23-26"><a href="projects-funded-by-the-afd.html#cb23-26" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb23-27"><a href="projects-funded-by-the-afd.html#cb23-27" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb23-28"><a href="projects-funded-by-the-afd.html#cb23-28" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb23-29"><a href="projects-funded-by-the-afd.html#cb23-29" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb23-30"><a href="projects-funded-by-the-afd.html#cb23-30" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-31"><a href="projects-funded-by-the-afd.html#cb23-31" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-32"><a href="projects-funded-by-the-afd.html#cb23-32" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-33"><a href="projects-funded-by-the-afd.html#cb23-33" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb23-34"><a href="projects-funded-by-the-afd.html#cb23-34" tabindex="-1"></a>hist_distrib_reg_top_shr_fr</span>
<span id="cb23-35"><a href="projects-funded-by-the-afd.html#cb23-35" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-36"><a href="projects-funded-by-the-afd.html#cb23-36" tabindex="-1"></a></span>
<span id="cb23-37"><a href="projects-funded-by-the-afd.html#cb23-37" tabindex="-1"></a></span>
<span id="cb23-38"><a href="projects-funded-by-the-afd.html#cb23-38" tabindex="-1"></a><span class="co">#Histogram in number (in French)</span></span>
<span id="cb23-39"><a href="projects-funded-by-the-afd.html#cb23-39" tabindex="-1"></a>hist_distrib_reg_n_fr <span class="ot">=</span> <span class="fu">ggplot</span>(data_distrib_reg, </span>
<span id="cb23-40"><a href="projects-funded-by-the-afd.html#cb23-40" tabindex="-1"></a>                     <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(direction_regionale, <span class="sc">-</span>n), <span class="at">y =</span> n, <span class="at">fill =</span> direction_regionale)) <span class="sc">%&gt;%</span></span>
<span id="cb23-41"><a href="projects-funded-by-the-afd.html#cb23-41" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.50</span>, <span class="at">fill=</span> <span class="st">&quot;#3182BD&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-42"><a href="projects-funded-by-the-afd.html#cb23-42" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(n, <span class="dv">1</span>), <span class="at">y =</span> n), </span>
<span id="cb23-43"><a href="projects-funded-by-the-afd.html#cb23-43" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb23-44"><a href="projects-funded-by-the-afd.html#cb23-44" tabindex="-1"></a>        <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-45"><a href="projects-funded-by-the-afd.html#cb23-45" tabindex="-1"></a><span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proportion d&#39;aires protégées par région&quot;</span>,</span>
<span id="cb23-46"><a href="projects-funded-by-the-afd.html#cb23-46" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_distrib_ctry<span class="sc">$</span>n), <span class="st">&quot;aires protégées. Nombre d&#39;aires indiqué sur chaque barre.&quot;</span>),</span>
<span id="cb23-47"><a href="projects-funded-by-the-afd.html#cb23-47" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Direction régionale&quot;</span>,</span>
<span id="cb23-48"><a href="projects-funded-by-the-afd.html#cb23-48" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Proportion d&#39;aires protégées(%)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-49"><a href="projects-funded-by-the-afd.html#cb23-49" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb23-50"><a href="projects-funded-by-the-afd.html#cb23-50" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb23-51"><a href="projects-funded-by-the-afd.html#cb23-51" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb23-52"><a href="projects-funded-by-the-afd.html#cb23-52" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb23-53"><a href="projects-funded-by-the-afd.html#cb23-53" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb23-54"><a href="projects-funded-by-the-afd.html#cb23-54" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb23-55"><a href="projects-funded-by-the-afd.html#cb23-55" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-56"><a href="projects-funded-by-the-afd.html#cb23-56" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-57"><a href="projects-funded-by-the-afd.html#cb23-57" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb23-58"><a href="projects-funded-by-the-afd.html#cb23-58" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb23-59"><a href="projects-funded-by-the-afd.html#cb23-59" tabindex="-1"></a>hist_distrib_reg_n_fr</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="projects-funded-by-the-afd.html#cb24-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb24-2"><a href="projects-funded-by-the-afd.html#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="projects-funded-by-the-afd.html#cb24-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb24-4"><a href="projects-funded-by-the-afd.html#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="projects-funded-by-the-afd.html#cb24-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_distrib_reg_top_shr_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb24-6"><a href="projects-funded-by-the-afd.html#cb24-6" tabindex="-1"></a>       <span class="at">plot =</span> hist_distrib_reg_top_shr_fr,</span>
<span id="cb24-7"><a href="projects-funded-by-the-afd.html#cb24-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb24-8"><a href="projects-funded-by-the-afd.html#cb24-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb24-9"><a href="projects-funded-by-the-afd.html#cb24-9" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;hist_distrib_reg_n_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb24-10"><a href="projects-funded-by-the-afd.html#cb24-10" tabindex="-1"></a>       <span class="at">plot =</span> hist_distrib_reg_n_fr,</span>
<span id="cb24-11"><a href="projects-funded-by-the-afd.html#cb24-11" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb24-12"><a href="projects-funded-by-the-afd.html#cb24-12" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb24-13"><a href="projects-funded-by-the-afd.html#cb24-13" tabindex="-1"></a></span>
<span id="cb24-14"><a href="projects-funded-by-the-afd.html#cb24-14" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb24-15"><a href="projects-funded-by-the-afd.html#cb24-15" tabindex="-1"></a></span>
<span id="cb24-16"><a href="projects-funded-by-the-afd.html#cb24-16" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb24-17"><a href="projects-funded-by-the-afd.html#cb24-17" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-18"><a href="projects-funded-by-the-afd.html#cb24-18" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb24-19"><a href="projects-funded-by-the-afd.html#cb24-19" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb24-20"><a href="projects-funded-by-the-afd.html#cb24-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb24-21"><a href="projects-funded-by-the-afd.html#cb24-21" tabindex="-1"></a>{</span>
<span id="cb24-22"><a href="projects-funded-by-the-afd.html#cb24-22" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb24-23"><a href="projects-funded-by-the-afd.html#cb24-23" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb24-24"><a href="projects-funded-by-the-afd.html#cb24-24" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb24-25"><a href="projects-funded-by-the-afd.html#cb24-25" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/distribution&quot;</span>, </span>
<span id="cb24-26"><a href="projects-funded-by-the-afd.html#cb24-26" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-27"><a href="projects-funded-by-the-afd.html#cb24-27" tabindex="-1"></a>  }</span>
<span id="cb24-28"><a href="projects-funded-by-the-afd.html#cb24-28" tabindex="-1"></a></span>
<span id="cb24-29"><a href="projects-funded-by-the-afd.html#cb24-29" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb24-30"><a href="projects-funded-by-the-afd.html#cb24-30" tabindex="-1"></a></span>
<span id="cb24-31"><a href="projects-funded-by-the-afd.html#cb24-31" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
<div id="surface-of-pas" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Surface of PAs<a href="projects-funded-by-the-afd.html#surface-of-pas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="distribution-of-surfaces" class="section level4 hasAnchor" number="2.3.4.1">
<h4><span class="header-section-number">2.3.4.1</span> Distribution of surfaces<a href="projects-funded-by-the-afd.html#distribution-of-surfaces" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="projects-funded-by-the-afd.html#cb25-1" tabindex="-1"></a>tbl_distrib_area_no0 <span class="ot">=</span> <span class="fu">summary</span>(</span>
<span id="cb25-2"><a href="projects-funded-by-the-afd.html#cb25-2" tabindex="-1"></a>  <span class="fu">filter</span>(data_stat_nodupl, superficie <span class="sc">!=</span> <span class="dv">0</span>)<span class="sc">$</span>superficie) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="projects-funded-by-the-afd.html#cb25-3" tabindex="-1"></a>  <span class="fu">format</span>(<span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">big.mark =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="projects-funded-by-the-afd.html#cb25-4" tabindex="-1"></a>  <span class="fu">as.array</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="projects-funded-by-the-afd.html#cb25-5" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="projects-funded-by-the-afd.html#cb25-6" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="projects-funded-by-the-afd.html#cb25-7" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;1st Qu.&quot;</span>,<span class="st">&quot;3rd Qu.&quot;</span>))</span></code></pre></div>
</div>
<div id="average-surface-in-countries-and-regions" class="section level4 hasAnchor" number="2.3.4.2">
<h4><span class="header-section-number">2.3.4.2</span> Average surface in countries and regions<a href="projects-funded-by-the-afd.html#average-surface-in-countries-and-regions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="projects-funded-by-the-afd.html#cb26-1" tabindex="-1"></a><span class="co">#Distribution of PA WITH SURFACE &gt;0 across countries and regions</span></span>
<span id="cb26-2"><a href="projects-funded-by-the-afd.html#cb26-2" tabindex="-1"></a><span class="do">##Country</span></span>
<span id="cb26-3"><a href="projects-funded-by-the-afd.html#cb26-3" tabindex="-1"></a>data_distrib_no0_ctry <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="projects-funded-by-the-afd.html#cb26-4" tabindex="-1"></a>  <span class="fu">filter</span>(superficie <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="projects-funded-by-the-afd.html#cb26-5" tabindex="-1"></a>  <span class="fu">group_by</span>(iso3, pays) <span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="projects-funded-by-the-afd.html#cb26-6" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb26-7"><a href="projects-funded-by-the-afd.html#cb26-7" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_stat_nodupl), <span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="projects-funded-by-the-afd.html#cb26-8" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb26-9"><a href="projects-funded-by-the-afd.html#cb26-9" tabindex="-1"></a></span>
<span id="cb26-10"><a href="projects-funded-by-the-afd.html#cb26-10" tabindex="-1"></a><span class="do">##Region</span></span>
<span id="cb26-11"><a href="projects-funded-by-the-afd.html#cb26-11" tabindex="-1"></a>data_distrib_no0_dr <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb26-12"><a href="projects-funded-by-the-afd.html#cb26-12" tabindex="-1"></a>  <span class="fu">filter</span>(superficie <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-13"><a href="projects-funded-by-the-afd.html#cb26-13" tabindex="-1"></a>  <span class="fu">group_by</span>(direction_regionale) <span class="sc">%&gt;%</span></span>
<span id="cb26-14"><a href="projects-funded-by-the-afd.html#cb26-14" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb26-15"><a href="projects-funded-by-the-afd.html#cb26-15" tabindex="-1"></a>            <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">nrow</span>(data_stat_nodupl), <span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-16"><a href="projects-funded-by-the-afd.html#cb26-16" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-17"><a href="projects-funded-by-the-afd.html#cb26-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">gsub</span>(<span class="st">&quot;Dr &quot;</span>, <span class="st">&quot;&quot;</span>, direction_regionale),</span>
<span id="cb26-18"><a href="projects-funded-by-the-afd.html#cb26-18" tabindex="-1"></a>         <span class="at">.after =</span> <span class="st">&quot;direction_regionale&quot;</span>)</span>
<span id="cb26-19"><a href="projects-funded-by-the-afd.html#cb26-19" tabindex="-1"></a></span>
<span id="cb26-20"><a href="projects-funded-by-the-afd.html#cb26-20" tabindex="-1"></a><span class="co">#By country..</span></span>
<span id="cb26-21"><a href="projects-funded-by-the-afd.html#cb26-21" tabindex="-1"></a>tbl_area_avg_ctry <span class="ot">=</span> data_distrib_no0_ctry <span class="sc">%&gt;%</span></span>
<span id="cb26-22"><a href="projects-funded-by-the-afd.html#cb26-22" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>freq) <span class="sc">%&gt;%</span></span>
<span id="cb26-23"><a href="projects-funded-by-the-afd.html#cb26-23" tabindex="-1"></a>  <span class="fu">left_join</span>(pa_area_ctry, <span class="at">by =</span> <span class="st">&quot;iso3&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-24"><a href="projects-funded-by-the-afd.html#cb26-24" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(iso3, sprfc_tot_km2, tot_area_int)) <span class="sc">%&gt;%</span></span>
<span id="cb26-25"><a href="projects-funded-by-the-afd.html#cb26-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sprfc_avg_noint_km2 =</span> <span class="fu">format</span>(sprfc_tot_noint_km2<span class="sc">/</span>n, <span class="at">big.mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb26-26"><a href="projects-funded-by-the-afd.html#cb26-26" tabindex="-1"></a>         <span class="at">sprfc_tot_noint_km2 =</span> <span class="fu">format</span>(sprfc_tot_noint_km2, <span class="at">big.mark  =</span> <span class="st">&quot; &quot;</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb26-27"><a href="projects-funded-by-the-afd.html#cb26-27" tabindex="-1"></a>         )</span>
<span id="cb26-28"><a href="projects-funded-by-the-afd.html#cb26-28" tabindex="-1"></a><span class="fu">names</span>(tbl_area_avg_ctry) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Pays&quot;</span>, <span class="st">&quot;Nombre d&#39;AP&quot;</span>, <span class="st">&quot;Superficie totale (km2)&quot;</span>, <span class="st">&quot;Superficie moyenne (km2)&quot;</span>)</span>
<span id="cb26-29"><a href="projects-funded-by-the-afd.html#cb26-29" tabindex="-1"></a></span>
<span id="cb26-30"><a href="projects-funded-by-the-afd.html#cb26-30" tabindex="-1"></a><span class="co">#By region</span></span>
<span id="cb26-31"><a href="projects-funded-by-the-afd.html#cb26-31" tabindex="-1"></a>tbl_area_avg_dr <span class="ot">=</span> data_distrib_no0_dr <span class="sc">%&gt;%</span></span>
<span id="cb26-32"><a href="projects-funded-by-the-afd.html#cb26-32" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>freq) <span class="sc">%&gt;%</span></span>
<span id="cb26-33"><a href="projects-funded-by-the-afd.html#cb26-33" tabindex="-1"></a>  <span class="fu">left_join</span>(pa_area_dr, <span class="at">by =</span> <span class="st">&quot;direction_regionale&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-34"><a href="projects-funded-by-the-afd.html#cb26-34" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(sprfc_tot_km2, tot_area_int, direction_regionale)) <span class="sc">%&gt;%</span></span>
<span id="cb26-35"><a href="projects-funded-by-the-afd.html#cb26-35" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sprfc_avg_noint_km2 =</span> <span class="fu">format</span>(sprfc_tot_noint_km2<span class="sc">/</span>n, <span class="at">big.mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb26-36"><a href="projects-funded-by-the-afd.html#cb26-36" tabindex="-1"></a>         <span class="at">sprfc_tot_noint_km2 =</span> <span class="fu">format</span>(sprfc_tot_noint_km2, <span class="at">big.mark  =</span> <span class="st">&quot; &quot;</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb26-37"><a href="projects-funded-by-the-afd.html#cb26-37" tabindex="-1"></a>         )</span>
<span id="cb26-38"><a href="projects-funded-by-the-afd.html#cb26-38" tabindex="-1"></a><span class="fu">names</span>(tbl_area_avg_dr) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Direction régionale&quot;</span>, <span class="st">&quot;Nombre d&#39;AP&quot;</span>, <span class="st">&quot;Superficie totale (km2)&quot;</span>, <span class="st">&quot;Superficie moyenne (km2)&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="projects-funded-by-the-afd.html#cb27-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb27-2"><a href="projects-funded-by-the-afd.html#cb27-2" tabindex="-1"></a></span>
<span id="cb27-3"><a href="projects-funded-by-the-afd.html#cb27-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb27-4"><a href="projects-funded-by-the-afd.html#cb27-4" tabindex="-1"></a></span>
<span id="cb27-5"><a href="projects-funded-by-the-afd.html#cb27-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_distrib_area_no0, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb27-6"><a href="projects-funded-by-the-afd.html#cb27-6" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_distrib_area_no0.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb27-7"><a href="projects-funded-by-the-afd.html#cb27-7" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_area_avg_ctry, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb27-8"><a href="projects-funded-by-the-afd.html#cb27-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_area_avg_ctry.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb27-9"><a href="projects-funded-by-the-afd.html#cb27-9" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_area_avg_dr, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>), </span>
<span id="cb27-10"><a href="projects-funded-by-the-afd.html#cb27-10" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_area_avg_dr.tex&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>))</span>
<span id="cb27-11"><a href="projects-funded-by-the-afd.html#cb27-11" tabindex="-1"></a></span>
<span id="cb27-12"><a href="projects-funded-by-the-afd.html#cb27-12" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb27-13"><a href="projects-funded-by-the-afd.html#cb27-13" tabindex="-1"></a></span>
<span id="cb27-14"><a href="projects-funded-by-the-afd.html#cb27-14" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb27-15"><a href="projects-funded-by-the-afd.html#cb27-15" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-16"><a href="projects-funded-by-the-afd.html#cb27-16" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb27-17"><a href="projects-funded-by-the-afd.html#cb27-17" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb27-18"><a href="projects-funded-by-the-afd.html#cb27-18" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb27-19"><a href="projects-funded-by-the-afd.html#cb27-19" tabindex="-1"></a>{</span>
<span id="cb27-20"><a href="projects-funded-by-the-afd.html#cb27-20" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb27-21"><a href="projects-funded-by-the-afd.html#cb27-21" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb27-22"><a href="projects-funded-by-the-afd.html#cb27-22" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb27-23"><a href="projects-funded-by-the-afd.html#cb27-23" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/surface&quot;</span>, </span>
<span id="cb27-24"><a href="projects-funded-by-the-afd.html#cb27-24" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-25"><a href="projects-funded-by-the-afd.html#cb27-25" tabindex="-1"></a>  }</span>
<span id="cb27-26"><a href="projects-funded-by-the-afd.html#cb27-26" tabindex="-1"></a></span>
<span id="cb27-27"><a href="projects-funded-by-the-afd.html#cb27-27" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb27-28"><a href="projects-funded-by-the-afd.html#cb27-28" tabindex="-1"></a></span>
<span id="cb27-29"><a href="projects-funded-by-the-afd.html#cb27-29" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
<div id="temporal-evolution" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Temporal evolution<a href="projects-funded-by-the-afd.html#temporal-evolution" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section is plotted the evolution in the number and surafe of PAs over time (cumulated number/surface and number/surface of PAs funded by year).</p>
<div id="number-of-pas" class="section level4 hasAnchor" number="2.3.5.1">
<h4><span class="header-section-number">2.3.5.1</span> Number of PAs<a href="projects-funded-by-the-afd.html#number-of-pas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="projects-funded-by-the-afd.html#cb28-1" tabindex="-1"></a>data_time_range <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">annee =</span> </span>
<span id="cb28-2"><a href="projects-funded-by-the-afd.html#cb28-2" tabindex="-1"></a>                              <span class="fu">c</span>(<span class="fu">min</span>(data_stat_nodupl<span class="sc">$</span>annee_octroi)<span class="sc">:</span><span class="fu">max</span>(data_stat_nodupl<span class="sc">$</span>annee_octroi))</span>
<span id="cb28-3"><a href="projects-funded-by-the-afd.html#cb28-3" tabindex="-1"></a>)</span>
<span id="cb28-4"><a href="projects-funded-by-the-afd.html#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="projects-funded-by-the-afd.html#cb28-5" tabindex="-1"></a></span>
<span id="cb28-6"><a href="projects-funded-by-the-afd.html#cb28-6" tabindex="-1"></a>data_time_n <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="projects-funded-by-the-afd.html#cb28-7" tabindex="-1"></a>  <span class="fu">group_by</span>(annee_octroi) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="projects-funded-by-the-afd.html#cb28-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb28-9"><a href="projects-funded-by-the-afd.html#cb28-9" tabindex="-1"></a>  <span class="fu">full_join</span>(data_time_range, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;annee_octroi&quot;</span> <span class="ot">=</span> <span class="st">&quot;annee&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-10"><a href="projects-funded-by-the-afd.html#cb28-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(n)<span class="sc">~</span><span class="dv">0</span>, <span class="cn">TRUE</span><span class="sc">~</span>n)) <span class="sc">%&gt;%</span></span>
<span id="cb28-11"><a href="projects-funded-by-the-afd.html#cb28-11" tabindex="-1"></a>  <span class="fu">arrange</span>(annee_octroi) <span class="sc">%&gt;%</span></span>
<span id="cb28-12"><a href="projects-funded-by-the-afd.html#cb28-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_cum =</span> <span class="fu">cumsum</span>(n)) </span>
<span id="cb28-13"><a href="projects-funded-by-the-afd.html#cb28-13" tabindex="-1"></a></span>
<span id="cb28-14"><a href="projects-funded-by-the-afd.html#cb28-14" tabindex="-1"></a><span class="co">#Number of PAs funded by year </span></span>
<span id="cb28-15"><a href="projects-funded-by-the-afd.html#cb28-15" tabindex="-1"></a>fig_n_pa <span class="ot">=</span> <span class="fu">ggplot</span>(data_time_n,</span>
<span id="cb28-16"><a href="projects-funded-by-the-afd.html#cb28-16" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(annee_octroi), <span class="at">y =</span> n)) <span class="sc">%&gt;%</span></span>
<span id="cb28-17"><a href="projects-funded-by-the-afd.html#cb28-17" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">fill =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-18"><a href="projects-funded-by-the-afd.html#cb28-18" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> n, <span class="at">label =</span> <span class="fu">ifelse</span>(n <span class="sc">==</span> <span class="dv">0</span>, <span class="cn">NA</span>, n)), </span>
<span id="cb28-19"><a href="projects-funded-by-the-afd.html#cb28-19" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-20"><a href="projects-funded-by-the-afd.html#cb28-20" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Nombre d&#39;aires protégées appuyées par année&quot;</span>,</span>
<span id="cb28-21"><a href="projects-funded-by-the-afd.html#cb28-21" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_time_n<span class="sc">$</span>n), <span class="st">&quot;aires protégées&quot;</span>),</span>
<span id="cb28-22"><a href="projects-funded-by-the-afd.html#cb28-22" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb28-23"><a href="projects-funded-by-the-afd.html#cb28-23" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Nombre d&#39;aires protégées&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-24"><a href="projects-funded-by-the-afd.html#cb28-24" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb28-25"><a href="projects-funded-by-the-afd.html#cb28-25" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb28-26"><a href="projects-funded-by-the-afd.html#cb28-26" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb28-27"><a href="projects-funded-by-the-afd.html#cb28-27" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb28-28"><a href="projects-funded-by-the-afd.html#cb28-28" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb28-29"><a href="projects-funded-by-the-afd.html#cb28-29" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb28-30"><a href="projects-funded-by-the-afd.html#cb28-30" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-31"><a href="projects-funded-by-the-afd.html#cb28-31" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-32"><a href="projects-funded-by-the-afd.html#cb28-32" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-33"><a href="projects-funded-by-the-afd.html#cb28-33" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb28-34"><a href="projects-funded-by-the-afd.html#cb28-34" tabindex="-1"></a>fig_n_pa</span>
<span id="cb28-35"><a href="projects-funded-by-the-afd.html#cb28-35" tabindex="-1"></a></span>
<span id="cb28-36"><a href="projects-funded-by-the-afd.html#cb28-36" tabindex="-1"></a></span>
<span id="cb28-37"><a href="projects-funded-by-the-afd.html#cb28-37" tabindex="-1"></a></span>
<span id="cb28-38"><a href="projects-funded-by-the-afd.html#cb28-38" tabindex="-1"></a><span class="co">#Cumulative number over time</span></span>
<span id="cb28-39"><a href="projects-funded-by-the-afd.html#cb28-39" tabindex="-1"></a>fig_ncum_pa <span class="ot">=</span> <span class="fu">ggplot</span>(data_time_n,</span>
<span id="cb28-40"><a href="projects-funded-by-the-afd.html#cb28-40" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(annee_octroi), <span class="at">y =</span> n_cum)) <span class="sc">%&gt;%</span></span>
<span id="cb28-41"><a href="projects-funded-by-the-afd.html#cb28-41" tabindex="-1"></a>  <span class="co"># + geom_point(color = &quot;#3182BD&quot;, size = 1.5) %&gt;%</span></span>
<span id="cb28-42"><a href="projects-funded-by-the-afd.html#cb28-42" tabindex="-1"></a>  <span class="co"># + geom_line(color = &quot;#3182BD&quot;, size = 1) %&gt;% </span></span>
<span id="cb28-43"><a href="projects-funded-by-the-afd.html#cb28-43" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">fill =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-44"><a href="projects-funded-by-the-afd.html#cb28-44" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> n_cum, <span class="at">label =</span> n_cum), </span>
<span id="cb28-45"><a href="projects-funded-by-the-afd.html#cb28-45" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-46"><a href="projects-funded-by-the-afd.html#cb28-46" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Evolution cumulée du nombre d&#39;aires protégées appuyées par l&#39;AFD&quot;</span>,</span>
<span id="cb28-47"><a href="projects-funded-by-the-afd.html#cb28-47" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_time_n<span class="sc">$</span>n), <span class="st">&quot;aires protégées&quot;</span>),</span>
<span id="cb28-48"><a href="projects-funded-by-the-afd.html#cb28-48" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb28-49"><a href="projects-funded-by-the-afd.html#cb28-49" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Nombre d&#39;aires protégées&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-50"><a href="projects-funded-by-the-afd.html#cb28-50" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb28-51"><a href="projects-funded-by-the-afd.html#cb28-51" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb28-52"><a href="projects-funded-by-the-afd.html#cb28-52" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb28-53"><a href="projects-funded-by-the-afd.html#cb28-53" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb28-54"><a href="projects-funded-by-the-afd.html#cb28-54" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb28-55"><a href="projects-funded-by-the-afd.html#cb28-55" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb28-56"><a href="projects-funded-by-the-afd.html#cb28-56" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-57"><a href="projects-funded-by-the-afd.html#cb28-57" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-58"><a href="projects-funded-by-the-afd.html#cb28-58" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb28-59"><a href="projects-funded-by-the-afd.html#cb28-59" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb28-60"><a href="projects-funded-by-the-afd.html#cb28-60" tabindex="-1"></a>fig_ncum_pa</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="projects-funded-by-the-afd.html#cb29-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb29-2"><a href="projects-funded-by-the-afd.html#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="projects-funded-by-the-afd.html#cb29-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb29-4"><a href="projects-funded-by-the-afd.html#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="projects-funded-by-the-afd.html#cb29-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_n_pa.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb29-6"><a href="projects-funded-by-the-afd.html#cb29-6" tabindex="-1"></a>       fig_n_pa,</span>
<span id="cb29-7"><a href="projects-funded-by-the-afd.html#cb29-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb29-8"><a href="projects-funded-by-the-afd.html#cb29-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb29-9"><a href="projects-funded-by-the-afd.html#cb29-9" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_ncum_pa.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb29-10"><a href="projects-funded-by-the-afd.html#cb29-10" tabindex="-1"></a>       fig_ncum_pa,</span>
<span id="cb29-11"><a href="projects-funded-by-the-afd.html#cb29-11" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb29-12"><a href="projects-funded-by-the-afd.html#cb29-12" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb29-13"><a href="projects-funded-by-the-afd.html#cb29-13" tabindex="-1"></a></span>
<span id="cb29-14"><a href="projects-funded-by-the-afd.html#cb29-14" tabindex="-1"></a></span>
<span id="cb29-15"><a href="projects-funded-by-the-afd.html#cb29-15" tabindex="-1"></a></span>
<span id="cb29-16"><a href="projects-funded-by-the-afd.html#cb29-16" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb29-17"><a href="projects-funded-by-the-afd.html#cb29-17" tabindex="-1"></a></span>
<span id="cb29-18"><a href="projects-funded-by-the-afd.html#cb29-18" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb29-19"><a href="projects-funded-by-the-afd.html#cb29-19" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-20"><a href="projects-funded-by-the-afd.html#cb29-20" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb29-21"><a href="projects-funded-by-the-afd.html#cb29-21" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb29-22"><a href="projects-funded-by-the-afd.html#cb29-22" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb29-23"><a href="projects-funded-by-the-afd.html#cb29-23" tabindex="-1"></a>{</span>
<span id="cb29-24"><a href="projects-funded-by-the-afd.html#cb29-24" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb29-25"><a href="projects-funded-by-the-afd.html#cb29-25" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb29-26"><a href="projects-funded-by-the-afd.html#cb29-26" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb29-27"><a href="projects-funded-by-the-afd.html#cb29-27" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/time_evolution&quot;</span>, </span>
<span id="cb29-28"><a href="projects-funded-by-the-afd.html#cb29-28" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-29"><a href="projects-funded-by-the-afd.html#cb29-29" tabindex="-1"></a>  }</span>
<span id="cb29-30"><a href="projects-funded-by-the-afd.html#cb29-30" tabindex="-1"></a></span>
<span id="cb29-31"><a href="projects-funded-by-the-afd.html#cb29-31" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb29-32"><a href="projects-funded-by-the-afd.html#cb29-32" tabindex="-1"></a></span>
<span id="cb29-33"><a href="projects-funded-by-the-afd.html#cb29-33" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="surface-of-pas-1" class="section level4 hasAnchor" number="2.3.5.2">
<h4><span class="header-section-number">2.3.5.2</span> Surface of PAs<a href="projects-funded-by-the-afd.html#surface-of-pas-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="projects-funded-by-the-afd.html#cb30-1" tabindex="-1"></a>data_time_range <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">annee =</span> </span>
<span id="cb30-2"><a href="projects-funded-by-the-afd.html#cb30-2" tabindex="-1"></a>                              <span class="fu">c</span>(<span class="fu">min</span>(data_stat_nodupl<span class="sc">$</span>annee_octroi)<span class="sc">:</span><span class="fu">max</span>(data_stat_nodupl<span class="sc">$</span>annee_octroi))</span>
<span id="cb30-3"><a href="projects-funded-by-the-afd.html#cb30-3" tabindex="-1"></a>)</span>
<span id="cb30-4"><a href="projects-funded-by-the-afd.html#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="projects-funded-by-the-afd.html#cb30-5" tabindex="-1"></a></span>
<span id="cb30-6"><a href="projects-funded-by-the-afd.html#cb30-6" tabindex="-1"></a>data_time_area <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="projects-funded-by-the-afd.html#cb30-7" tabindex="-1"></a>  <span class="fu">group_by</span>(annee_octroi) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="projects-funded-by-the-afd.html#cb30-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">tot_area_km2 =</span> <span class="fu">sum</span>(superficie)) <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="projects-funded-by-the-afd.html#cb30-9" tabindex="-1"></a>  <span class="fu">left_join</span>(pa_int_yr, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;annee_octroi&quot;</span> <span class="ot">=</span> <span class="st">&quot;annee_int&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-10"><a href="projects-funded-by-the-afd.html#cb30-10" tabindex="-1"></a>  <span class="fu">full_join</span>(data_time_range, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;annee_octroi&quot;</span> <span class="ot">=</span> <span class="st">&quot;annee&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="projects-funded-by-the-afd.html#cb30-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tot_area_km2 =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(tot_area_km2)<span class="sc">~</span><span class="dv">0</span>, <span class="cn">TRUE</span><span class="sc">~</span>tot_area_km2),</span>
<span id="cb30-12"><a href="projects-funded-by-the-afd.html#cb30-12" tabindex="-1"></a>         <span class="at">tot_int_km2 =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(tot_int_km2)<span class="sc">~</span><span class="dv">0</span>, <span class="cn">TRUE</span><span class="sc">~</span>tot_int_km2),</span>
<span id="cb30-13"><a href="projects-funded-by-the-afd.html#cb30-13" tabindex="-1"></a>         <span class="at">tot_area_noint_km2 =</span> tot_area_km2 <span class="sc">-</span> tot_int_km2) <span class="sc">%&gt;%</span></span>
<span id="cb30-14"><a href="projects-funded-by-the-afd.html#cb30-14" tabindex="-1"></a>  <span class="fu">arrange</span>(annee_octroi)</span>
<span id="cb30-15"><a href="projects-funded-by-the-afd.html#cb30-15" tabindex="-1"></a></span>
<span id="cb30-16"><a href="projects-funded-by-the-afd.html#cb30-16" tabindex="-1"></a><span class="co">#Evolution of area over time</span></span>
<span id="cb30-17"><a href="projects-funded-by-the-afd.html#cb30-17" tabindex="-1"></a>fig_area_pa <span class="ot">=</span> <span class="fu">ggplot</span>(data_time_area,</span>
<span id="cb30-18"><a href="projects-funded-by-the-afd.html#cb30-18" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(annee_octroi), <span class="at">y =</span> tot_area_noint_km2)) <span class="sc">%&gt;%</span></span>
<span id="cb30-19"><a href="projects-funded-by-the-afd.html#cb30-19" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">fill =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-20"><a href="projects-funded-by-the-afd.html#cb30-20" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> tot_area_noint_km2, </span>
<span id="cb30-21"><a href="projects-funded-by-the-afd.html#cb30-21" tabindex="-1"></a>                  <span class="at">label =</span> <span class="fu">ifelse</span>(tot_area_noint_km2 <span class="sc">!=</span> <span class="dv">0</span>,</span>
<span id="cb30-22"><a href="projects-funded-by-the-afd.html#cb30-22" tabindex="-1"></a>                                 <span class="fu">format</span>(tot_area_noint_km2, </span>
<span id="cb30-23"><a href="projects-funded-by-the-afd.html#cb30-23" tabindex="-1"></a>                                        <span class="at">digits =</span> <span class="dv">2</span>, </span>
<span id="cb30-24"><a href="projects-funded-by-the-afd.html#cb30-24" tabindex="-1"></a>                                        <span class="at">scientific =</span> <span class="cn">TRUE</span>),</span>
<span id="cb30-25"><a href="projects-funded-by-the-afd.html#cb30-25" tabindex="-1"></a>                                 <span class="cn">NA</span>)), </span>
<span id="cb30-26"><a href="projects-funded-by-the-afd.html#cb30-26" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-27"><a href="projects-funded-by-the-afd.html#cb30-27" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Evolution de la superficie des aires protégées&quot;</span>,</span>
<span id="cb30-28"><a href="projects-funded-by-the-afd.html#cb30-28" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_time_n<span class="sc">$</span>n), <span class="st">&quot;aires protégées couvrant&quot;</span>, <span class="fu">format</span>(<span class="fu">sum</span>(data_time_area<span class="sc">$</span>tot_area_noint_km2), <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">big.mark =</span> <span class="st">&quot; &quot;</span>), <span class="st">&quot;km2&quot;</span>),</span>
<span id="cb30-29"><a href="projects-funded-by-the-afd.html#cb30-29" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb30-30"><a href="projects-funded-by-the-afd.html#cb30-30" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Superficie (km2)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-31"><a href="projects-funded-by-the-afd.html#cb30-31" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb30-32"><a href="projects-funded-by-the-afd.html#cb30-32" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb30-33"><a href="projects-funded-by-the-afd.html#cb30-33" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb30-34"><a href="projects-funded-by-the-afd.html#cb30-34" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb30-35"><a href="projects-funded-by-the-afd.html#cb30-35" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb30-36"><a href="projects-funded-by-the-afd.html#cb30-36" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb30-37"><a href="projects-funded-by-the-afd.html#cb30-37" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-38"><a href="projects-funded-by-the-afd.html#cb30-38" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-39"><a href="projects-funded-by-the-afd.html#cb30-39" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-40"><a href="projects-funded-by-the-afd.html#cb30-40" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb30-41"><a href="projects-funded-by-the-afd.html#cb30-41" tabindex="-1"></a>fig_area_pa</span>
<span id="cb30-42"><a href="projects-funded-by-the-afd.html#cb30-42" tabindex="-1"></a></span>
<span id="cb30-43"><a href="projects-funded-by-the-afd.html#cb30-43" tabindex="-1"></a></span>
<span id="cb30-44"><a href="projects-funded-by-the-afd.html#cb30-44" tabindex="-1"></a></span>
<span id="cb30-45"><a href="projects-funded-by-the-afd.html#cb30-45" tabindex="-1"></a><span class="co">#Cumulative area over time</span></span>
<span id="cb30-46"><a href="projects-funded-by-the-afd.html#cb30-46" tabindex="-1"></a>fig_area_cum_pa <span class="ot">=</span> <span class="fu">ggplot</span>(data_time_area,</span>
<span id="cb30-47"><a href="projects-funded-by-the-afd.html#cb30-47" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(annee_octroi),</span>
<span id="cb30-48"><a href="projects-funded-by-the-afd.html#cb30-48" tabindex="-1"></a>                      <span class="at">y =</span> <span class="fu">cumsum</span>(tot_area_noint_km2))) <span class="sc">%&gt;%</span></span>
<span id="cb30-49"><a href="projects-funded-by-the-afd.html#cb30-49" tabindex="-1"></a>  <span class="co"># + geom_point(color = &quot;#3182BD&quot;, size = 1.5) %&gt;%</span></span>
<span id="cb30-50"><a href="projects-funded-by-the-afd.html#cb30-50" tabindex="-1"></a>  <span class="co"># + geom_line(color = &quot;#3182BD&quot;, size = 1) %&gt;% </span></span>
<span id="cb30-51"><a href="projects-funded-by-the-afd.html#cb30-51" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">fill =</span> <span class="st">&quot;#3182BD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-52"><a href="projects-funded-by-the-afd.html#cb30-52" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">cumsum</span>(tot_area_noint_km2), </span>
<span id="cb30-53"><a href="projects-funded-by-the-afd.html#cb30-53" tabindex="-1"></a>                  <span class="at">label =</span> <span class="fu">format</span>(<span class="fu">cumsum</span>(tot_area_noint_km2), </span>
<span id="cb30-54"><a href="projects-funded-by-the-afd.html#cb30-54" tabindex="-1"></a>                                 <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb30-55"><a href="projects-funded-by-the-afd.html#cb30-55" tabindex="-1"></a>                                 <span class="at">scientific =</span> <span class="cn">TRUE</span>)), </span>
<span id="cb30-56"><a href="projects-funded-by-the-afd.html#cb30-56" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-57"><a href="projects-funded-by-the-afd.html#cb30-57" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Evolution cumulée de la superficie des aires protégées&quot;</span>,</span>
<span id="cb30-58"><a href="projects-funded-by-the-afd.html#cb30-58" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_time_n<span class="sc">$</span>n), <span class="st">&quot;aires protégées couvrant&quot;</span>, <span class="fu">format</span>(<span class="fu">sum</span>(data_time_area<span class="sc">$</span>tot_area_noint_km2), <span class="at">digits =</span> <span class="dv">1</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">big.mark =</span> <span class="st">&quot; &quot;</span>), <span class="st">&quot;km2&quot;</span>),</span>
<span id="cb30-59"><a href="projects-funded-by-the-afd.html#cb30-59" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb30-60"><a href="projects-funded-by-the-afd.html#cb30-60" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Superficie (km2)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-61"><a href="projects-funded-by-the-afd.html#cb30-61" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb30-62"><a href="projects-funded-by-the-afd.html#cb30-62" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb30-63"><a href="projects-funded-by-the-afd.html#cb30-63" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb30-64"><a href="projects-funded-by-the-afd.html#cb30-64" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> .<span class="dv">6</span>),</span>
<span id="cb30-65"><a href="projects-funded-by-the-afd.html#cb30-65" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb30-66"><a href="projects-funded-by-the-afd.html#cb30-66" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;white&#39;</span>, </span>
<span id="cb30-67"><a href="projects-funded-by-the-afd.html#cb30-67" tabindex="-1"></a>                                      <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-68"><a href="projects-funded-by-the-afd.html#cb30-68" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-69"><a href="projects-funded-by-the-afd.html#cb30-69" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;grey90&#39;</span>, <span class="at">linetype =</span> <span class="st">&#39;solid&#39;</span>),</span>
<span id="cb30-70"><a href="projects-funded-by-the-afd.html#cb30-70" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&#39;grey50&#39;</span>, <span class="at">size =</span> <span class="fl">8.5</span>, <span class="at">face =</span> <span class="st">&#39;plain&#39;</span>))</span>
<span id="cb30-71"><a href="projects-funded-by-the-afd.html#cb30-71" tabindex="-1"></a>fig_area_cum_pa</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="projects-funded-by-the-afd.html#cb31-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb31-2"><a href="projects-funded-by-the-afd.html#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="projects-funded-by-the-afd.html#cb31-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb31-4"><a href="projects-funded-by-the-afd.html#cb31-4" tabindex="-1"></a></span>
<span id="cb31-5"><a href="projects-funded-by-the-afd.html#cb31-5" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_area_pa.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb31-6"><a href="projects-funded-by-the-afd.html#cb31-6" tabindex="-1"></a>       fig_area_pa,</span>
<span id="cb31-7"><a href="projects-funded-by-the-afd.html#cb31-7" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb31-8"><a href="projects-funded-by-the-afd.html#cb31-8" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb31-9"><a href="projects-funded-by-the-afd.html#cb31-9" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;fig_area_cum_pa.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb31-10"><a href="projects-funded-by-the-afd.html#cb31-10" tabindex="-1"></a>       fig_area_cum_pa,</span>
<span id="cb31-11"><a href="projects-funded-by-the-afd.html#cb31-11" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb31-12"><a href="projects-funded-by-the-afd.html#cb31-12" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb31-13"><a href="projects-funded-by-the-afd.html#cb31-13" tabindex="-1"></a></span>
<span id="cb31-14"><a href="projects-funded-by-the-afd.html#cb31-14" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb31-15"><a href="projects-funded-by-the-afd.html#cb31-15" tabindex="-1"></a></span>
<span id="cb31-16"><a href="projects-funded-by-the-afd.html#cb31-16" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb31-17"><a href="projects-funded-by-the-afd.html#cb31-17" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-18"><a href="projects-funded-by-the-afd.html#cb31-18" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb31-19"><a href="projects-funded-by-the-afd.html#cb31-19" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb31-20"><a href="projects-funded-by-the-afd.html#cb31-20" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb31-21"><a href="projects-funded-by-the-afd.html#cb31-21" tabindex="-1"></a>{</span>
<span id="cb31-22"><a href="projects-funded-by-the-afd.html#cb31-22" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb31-23"><a href="projects-funded-by-the-afd.html#cb31-23" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb31-24"><a href="projects-funded-by-the-afd.html#cb31-24" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb31-25"><a href="projects-funded-by-the-afd.html#cb31-25" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/time_evolution&quot;</span>, </span>
<span id="cb31-26"><a href="projects-funded-by-the-afd.html#cb31-26" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-27"><a href="projects-funded-by-the-afd.html#cb31-27" tabindex="-1"></a>  }</span>
<span id="cb31-28"><a href="projects-funded-by-the-afd.html#cb31-28" tabindex="-1"></a></span>
<span id="cb31-29"><a href="projects-funded-by-the-afd.html#cb31-29" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb31-30"><a href="projects-funded-by-the-afd.html#cb31-30" tabindex="-1"></a></span>
<span id="cb31-31"><a href="projects-funded-by-the-afd.html#cb31-31" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
</div>
<div id="governance" class="section level3 hasAnchor" number="2.3.6">
<h3><span class="header-section-number">2.3.6</span> Governance<a href="projects-funded-by-the-afd.html#governance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is plotted the distribution of PAs across governance type.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="projects-funded-by-the-afd.html#cb32-1" tabindex="-1"></a><span class="co">#Table of the governance type distribution</span></span>
<span id="cb32-2"><a href="projects-funded-by-the-afd.html#cb32-2" tabindex="-1"></a><span class="do">##English version</span></span>
<span id="cb32-3"><a href="projects-funded-by-the-afd.html#cb32-3" tabindex="-1"></a>data_gov_en <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="projects-funded-by-the-afd.html#cb32-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(gov_type <span class="sc">==</span> <span class="st">&quot;&quot;</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb32-5"><a href="projects-funded-by-the-afd.html#cb32-5" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="projects-funded-by-the-afd.html#cb32-6" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="projects-funded-by-the-afd.html#cb32-7" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="projects-funded-by-the-afd.html#cb32-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb32-9"><a href="projects-funded-by-the-afd.html#cb32-9" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-10"><a href="projects-funded-by-the-afd.html#cb32-10" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="projects-funded-by-the-afd.html#cb32-11" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb32-12"><a href="projects-funded-by-the-afd.html#cb32-12" tabindex="-1"></a></span>
<span id="cb32-13"><a href="projects-funded-by-the-afd.html#cb32-13" tabindex="-1"></a>tbl_gov_en <span class="ot">=</span> data_gov_en</span>
<span id="cb32-14"><a href="projects-funded-by-the-afd.html#cb32-14" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb32-15"><a href="projects-funded-by-the-afd.html#cb32-15" tabindex="-1"></a></span>
<span id="cb32-16"><a href="projects-funded-by-the-afd.html#cb32-16" tabindex="-1"></a></span>
<span id="cb32-17"><a href="projects-funded-by-the-afd.html#cb32-17" tabindex="-1"></a><span class="do">##French Version</span></span>
<span id="cb32-18"><a href="projects-funded-by-the-afd.html#cb32-18" tabindex="-1"></a>data_gov_fr <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb32-19"><a href="projects-funded-by-the-afd.html#cb32-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(gov_type <span class="sc">==</span> <span class="st">&quot;&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non référencée&quot;</span>,</span>
<span id="cb32-20"><a href="projects-funded-by-the-afd.html#cb32-20" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Collaborative governance&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gouvernance collaborative&quot;</span>,</span>
<span id="cb32-21"><a href="projects-funded-by-the-afd.html#cb32-21" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence, fédérale ou nationale&quot;</span>,</span>
<span id="cb32-22"><a href="projects-funded-by-the-afd.html#cb32-22" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence, fédérale ou nationale&quot;</span>,</span>
<span id="cb32-23"><a href="projects-funded-by-the-afd.html#cb32-23" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Government-delegated management&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gestion déléguée par le gouvernement&quot;</span>,</span>
<span id="cb32-24"><a href="projects-funded-by-the-afd.html#cb32-24" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Indigenous peoples&quot;</span> <span class="sc">~</span> <span class="st">&quot;Peuples indigènes&quot;</span>,</span>
<span id="cb32-25"><a href="projects-funded-by-the-afd.html#cb32-25" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Joint governance&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gouvernance conjointe&quot;</span>,</span>
<span id="cb32-26"><a href="projects-funded-by-the-afd.html#cb32-26" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Local communities&quot;</span> <span class="sc">~</span> <span class="st">&quot;Communautés locales&quot;</span>,</span>
<span id="cb32-27"><a href="projects-funded-by-the-afd.html#cb32-27" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Non-profit organisations&quot;</span> <span class="sc">~</span> <span class="st">&quot;Organisations non-lucratives&quot;</span>,</span>
<span id="cb32-28"><a href="projects-funded-by-the-afd.html#cb32-28" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non rapportée&quot;</span>,</span>
<span id="cb32-29"><a href="projects-funded-by-the-afd.html#cb32-29" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Sub-national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence sous-nationale&quot;</span>,</span>
<span id="cb32-30"><a href="projects-funded-by-the-afd.html#cb32-30" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-31"><a href="projects-funded-by-the-afd.html#cb32-31" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb32-32"><a href="projects-funded-by-the-afd.html#cb32-32" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb32-33"><a href="projects-funded-by-the-afd.html#cb32-33" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb32-34"><a href="projects-funded-by-the-afd.html#cb32-34" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-35"><a href="projects-funded-by-the-afd.html#cb32-35" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb32-36"><a href="projects-funded-by-the-afd.html#cb32-36" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb32-37"><a href="projects-funded-by-the-afd.html#cb32-37" tabindex="-1"></a></span>
<span id="cb32-38"><a href="projects-funded-by-the-afd.html#cb32-38" tabindex="-1"></a>tbl_gov_fr <span class="ot">=</span> data_gov_fr</span>
<span id="cb32-39"><a href="projects-funded-by-the-afd.html#cb32-39" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_fr) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Gouvernance&quot;</span>,<span class="st">&quot;Nombre d&#39;AP&quot;</span>,<span class="st">&quot;Proportion (%)&quot;</span>)</span>
<span id="cb32-40"><a href="projects-funded-by-the-afd.html#cb32-40" tabindex="-1"></a></span>
<span id="cb32-41"><a href="projects-funded-by-the-afd.html#cb32-41" tabindex="-1"></a></span>
<span id="cb32-42"><a href="projects-funded-by-the-afd.html#cb32-42" tabindex="-1"></a></span>
<span id="cb32-43"><a href="projects-funded-by-the-afd.html#cb32-43" tabindex="-1"></a><span class="co">#PAs with nureported or unreferenced governance types are removed</span></span>
<span id="cb32-44"><a href="projects-funded-by-the-afd.html#cb32-44" tabindex="-1"></a><span class="do">##Tables</span></span>
<span id="cb32-45"><a href="projects-funded-by-the-afd.html#cb32-45" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb32-46"><a href="projects-funded-by-the-afd.html#cb32-46" tabindex="-1"></a>data_gov_knwn_en <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb32-47"><a href="projects-funded-by-the-afd.html#cb32-47" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(gov_type <span class="sc">==</span> <span class="st">&quot;&quot;</span> <span class="sc">~</span> <span class="st">&quot;Not referenced&quot;</span>,</span>
<span id="cb32-48"><a href="projects-funded-by-the-afd.html#cb32-48" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-49"><a href="projects-funded-by-the-afd.html#cb32-49" tabindex="-1"></a>  <span class="fu">filter</span>(gov_type <span class="sc">!=</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">&amp;</span> gov_type <span class="sc">!=</span> <span class="st">&quot;Not referenced&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-50"><a href="projects-funded-by-the-afd.html#cb32-50" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb32-51"><a href="projects-funded-by-the-afd.html#cb32-51" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb32-52"><a href="projects-funded-by-the-afd.html#cb32-52" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb32-53"><a href="projects-funded-by-the-afd.html#cb32-53" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-54"><a href="projects-funded-by-the-afd.html#cb32-54" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb32-55"><a href="projects-funded-by-the-afd.html#cb32-55" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb32-56"><a href="projects-funded-by-the-afd.html#cb32-56" tabindex="-1"></a></span>
<span id="cb32-57"><a href="projects-funded-by-the-afd.html#cb32-57" tabindex="-1"></a>tbl_gov_knwn_en <span class="ot">=</span> data_gov_knwn_en</span>
<span id="cb32-58"><a href="projects-funded-by-the-afd.html#cb32-58" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_knwn_en) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Governance&quot;</span>,<span class="st">&quot;Number of PAs&quot;</span>,<span class="st">&quot;Share of PAs (%)&quot;</span>)</span>
<span id="cb32-59"><a href="projects-funded-by-the-afd.html#cb32-59" tabindex="-1"></a></span>
<span id="cb32-60"><a href="projects-funded-by-the-afd.html#cb32-60" tabindex="-1"></a><span class="do">###French</span></span>
<span id="cb32-61"><a href="projects-funded-by-the-afd.html#cb32-61" tabindex="-1"></a>data_gov_knwn_fr <span class="ot">=</span> data_stat_nodupl <span class="sc">%&gt;%</span></span>
<span id="cb32-62"><a href="projects-funded-by-the-afd.html#cb32-62" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gov_type =</span> <span class="fu">case_when</span>(gov_type <span class="sc">==</span> <span class="st">&quot;&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non référencée&quot;</span>,</span>
<span id="cb32-63"><a href="projects-funded-by-the-afd.html#cb32-63" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Collaborative governance&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gouvernance collaborative&quot;</span>,</span>
<span id="cb32-64"><a href="projects-funded-by-the-afd.html#cb32-64" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence, fédérale ou nationale&quot;</span>,</span>
<span id="cb32-65"><a href="projects-funded-by-the-afd.html#cb32-65" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Federal or national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence, fédérale ou nationale&quot;</span>,</span>
<span id="cb32-66"><a href="projects-funded-by-the-afd.html#cb32-66" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Government-delegated management&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gestion déléguée par le gouvernement&quot;</span>,</span>
<span id="cb32-67"><a href="projects-funded-by-the-afd.html#cb32-67" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Indigenous peoples&quot;</span> <span class="sc">~</span> <span class="st">&quot;Peuples indigènes&quot;</span>,</span>
<span id="cb32-68"><a href="projects-funded-by-the-afd.html#cb32-68" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Joint governance&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gouvernance conjointe&quot;</span>,</span>
<span id="cb32-69"><a href="projects-funded-by-the-afd.html#cb32-69" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Local communities&quot;</span> <span class="sc">~</span> <span class="st">&quot;Communautés locales&quot;</span>,</span>
<span id="cb32-70"><a href="projects-funded-by-the-afd.html#cb32-70" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Non-profit organisations&quot;</span> <span class="sc">~</span> <span class="st">&quot;Organisations non-lucratives&quot;</span>,</span>
<span id="cb32-71"><a href="projects-funded-by-the-afd.html#cb32-71" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Not Reported&quot;</span> <span class="sc">~</span> <span class="st">&quot;Non rapportée&quot;</span>,</span>
<span id="cb32-72"><a href="projects-funded-by-the-afd.html#cb32-72" tabindex="-1"></a>                              gov_type <span class="sc">==</span> <span class="st">&quot;Sub-national ministry or agency&quot;</span> <span class="sc">~</span> <span class="st">&quot;Ministère ou agence sous-nationale&quot;</span>,</span>
<span id="cb32-73"><a href="projects-funded-by-the-afd.html#cb32-73" tabindex="-1"></a>                              <span class="cn">TRUE</span> <span class="sc">~</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-74"><a href="projects-funded-by-the-afd.html#cb32-74" tabindex="-1"></a>  <span class="fu">filter</span>(gov_type <span class="sc">!=</span> <span class="st">&quot;Non référencée&quot;</span> <span class="sc">&amp;</span> gov_type <span class="sc">!=</span> <span class="st">&quot;Non rapportée&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-75"><a href="projects-funded-by-the-afd.html#cb32-75" tabindex="-1"></a>  <span class="fu">group_by</span>(gov_type) <span class="sc">%&gt;%</span></span>
<span id="cb32-76"><a href="projects-funded-by-the-afd.html#cb32-76" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb32-77"><a href="projects-funded-by-the-afd.html#cb32-77" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n),</span>
<span id="cb32-78"><a href="projects-funded-by-the-afd.html#cb32-78" tabindex="-1"></a>         <span class="at">freq =</span> <span class="fu">round</span>(n<span class="sc">/</span>n_tot<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-79"><a href="projects-funded-by-the-afd.html#cb32-79" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_tot) <span class="sc">%&gt;%</span></span>
<span id="cb32-80"><a href="projects-funded-by-the-afd.html#cb32-80" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>freq)</span>
<span id="cb32-81"><a href="projects-funded-by-the-afd.html#cb32-81" tabindex="-1"></a></span>
<span id="cb32-82"><a href="projects-funded-by-the-afd.html#cb32-82" tabindex="-1"></a>tbl_gov_knwn_fr <span class="ot">=</span> data_gov_knwn_fr</span>
<span id="cb32-83"><a href="projects-funded-by-the-afd.html#cb32-83" tabindex="-1"></a><span class="fu">names</span>(tbl_gov_knwn_fr) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Gouvernance&quot;</span>,<span class="st">&quot;Nombre d&#39;AP&quot;</span>,<span class="st">&quot;Proportion (%)&quot;</span>)</span>
<span id="cb32-84"><a href="projects-funded-by-the-afd.html#cb32-84" tabindex="-1"></a> </span>
<span id="cb32-85"><a href="projects-funded-by-the-afd.html#cb32-85" tabindex="-1"></a></span>
<span id="cb32-86"><a href="projects-funded-by-the-afd.html#cb32-86" tabindex="-1"></a><span class="do">##Pie charts</span></span>
<span id="cb32-87"><a href="projects-funded-by-the-afd.html#cb32-87" tabindex="-1"></a><span class="do">###English</span></span>
<span id="cb32-88"><a href="projects-funded-by-the-afd.html#cb32-88" tabindex="-1"></a>pie_gov_knwn_en <span class="ot">=</span> </span>
<span id="cb32-89"><a href="projects-funded-by-the-afd.html#cb32-89" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_gov_knwn_en, </span>
<span id="cb32-90"><a href="projects-funded-by-the-afd.html#cb32-90" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq, <span class="at">fill=</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-91"><a href="projects-funded-by-the-afd.html#cb32-91" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-92"><a href="projects-funded-by-the-afd.html#cb32-92" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, </span>
<span id="cb32-93"><a href="projects-funded-by-the-afd.html#cb32-93" tabindex="-1"></a>                   <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(freq, <span class="at">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb32-94"><a href="projects-funded-by-the-afd.html#cb32-94" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb32-95"><a href="projects-funded-by-the-afd.html#cb32-95" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb32-96"><a href="projects-funded-by-the-afd.html#cb32-96" tabindex="-1"></a>               <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-97"><a href="projects-funded-by-the-afd.html#cb32-97" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-98"><a href="projects-funded-by-the-afd.html#cb32-98" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Governance type of PAs, except not referenced/reported PAs&quot;</span>,</span>
<span id="cb32-99"><a href="projects-funded-by-the-afd.html#cb32-99" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Sample :&quot;</span>, <span class="fu">sum</span>(data_gov_knwn_en<span class="sc">$</span>n), <span class="st">&quot;PAs&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-100"><a href="projects-funded-by-the-afd.html#cb32-100" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Governance&quot;</span>, <span class="at">palette=</span><span class="st">&quot;Paired&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-101"><a href="projects-funded-by-the-afd.html#cb32-101" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb32-102"><a href="projects-funded-by-the-afd.html#cb32-102" tabindex="-1"></a></span>
<span id="cb32-103"><a href="projects-funded-by-the-afd.html#cb32-103" tabindex="-1"></a></span>
<span id="cb32-104"><a href="projects-funded-by-the-afd.html#cb32-104" tabindex="-1"></a></span>
<span id="cb32-105"><a href="projects-funded-by-the-afd.html#cb32-105" tabindex="-1"></a><span class="do">###French</span></span>
<span id="cb32-106"><a href="projects-funded-by-the-afd.html#cb32-106" tabindex="-1"></a>pie_gov_knwn_fr <span class="ot">=</span></span>
<span id="cb32-107"><a href="projects-funded-by-the-afd.html#cb32-107" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_gov_knwn_fr, </span>
<span id="cb32-108"><a href="projects-funded-by-the-afd.html#cb32-108" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> freq, <span class="at">fill=</span> gov_type)) <span class="sc">%&gt;%</span></span>
<span id="cb32-109"><a href="projects-funded-by-the-afd.html#cb32-109" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-110"><a href="projects-funded-by-the-afd.html#cb32-110" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fl">1.3</span>, </span>
<span id="cb32-111"><a href="projects-funded-by-the-afd.html#cb32-111" tabindex="-1"></a>                   <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(freq, <span class="at">digits =</span> <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)), </span>
<span id="cb32-112"><a href="projects-funded-by-the-afd.html#cb32-112" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb32-113"><a href="projects-funded-by-the-afd.html#cb32-113" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.55</span>), </span>
<span id="cb32-114"><a href="projects-funded-by-the-afd.html#cb32-114" tabindex="-1"></a>               <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-115"><a href="projects-funded-by-the-afd.html#cb32-115" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="at">start=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-116"><a href="projects-funded-by-the-afd.html#cb32-116" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Gouvernance, hors aires protégées avec une gouvernance </span><span class="sc">\n</span><span class="st">non-rapportée/référencée&quot;</span>,</span>
<span id="cb32-117"><a href="projects-funded-by-the-afd.html#cb32-117" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Echantillon :&quot;</span>, <span class="fu">sum</span>(data_gov_knwn_fr<span class="sc">$</span>n), <span class="st">&quot;aires protégées&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-118"><a href="projects-funded-by-the-afd.html#cb32-118" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Gouvernance&quot;</span>, <span class="at">palette=</span><span class="st">&quot;Paired&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-119"><a href="projects-funded-by-the-afd.html#cb32-119" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb32-120"><a href="projects-funded-by-the-afd.html#cb32-120" tabindex="-1"></a>pie_gov_knwn_fr</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="projects-funded-by-the-afd.html#cb33-1" tabindex="-1"></a><span class="co">#Saving figures</span></span>
<span id="cb33-2"><a href="projects-funded-by-the-afd.html#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="projects-funded-by-the-afd.html#cb33-3" tabindex="-1"></a>tmp <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;fig&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb33-4"><a href="projects-funded-by-the-afd.html#cb33-4" tabindex="-1"></a></span>
<span id="cb33-5"><a href="projects-funded-by-the-afd.html#cb33-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_en, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb33-6"><a href="projects-funded-by-the-afd.html#cb33-6" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_en.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb33-7"><a href="projects-funded-by-the-afd.html#cb33-7" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_fr, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb33-8"><a href="projects-funded-by-the-afd.html#cb33-8" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_fr.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb33-9"><a href="projects-funded-by-the-afd.html#cb33-9" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_knwn_en, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb33-10"><a href="projects-funded-by-the-afd.html#cb33-10" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_knwn_en.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb33-11"><a href="projects-funded-by-the-afd.html#cb33-11" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">xtable</span>(tbl_gov_knwn_fr, <span class="at">type =</span> <span class="st">&quot;latex&quot;</span>),</span>
<span id="cb33-12"><a href="projects-funded-by-the-afd.html#cb33-12" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">paste</span>(tmp, <span class="st">&quot;tbl_gov_knwn_fr.tex&quot;</span>, <span class="at">sep  =</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb33-13"><a href="projects-funded-by-the-afd.html#cb33-13" tabindex="-1"></a></span>
<span id="cb33-14"><a href="projects-funded-by-the-afd.html#cb33-14" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot; pie_gov_knwn_en.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb33-15"><a href="projects-funded-by-the-afd.html#cb33-15" tabindex="-1"></a>       <span class="at">plot =</span>  pie_gov_knwn_en,</span>
<span id="cb33-16"><a href="projects-funded-by-the-afd.html#cb33-16" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb33-17"><a href="projects-funded-by-the-afd.html#cb33-17" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb33-18"><a href="projects-funded-by-the-afd.html#cb33-18" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste</span>(tmp, <span class="st">&quot;pie_gov_knwn_fr.png&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb33-19"><a href="projects-funded-by-the-afd.html#cb33-19" tabindex="-1"></a>       <span class="at">plot =</span> pie_gov_knwn_fr,</span>
<span id="cb33-20"><a href="projects-funded-by-the-afd.html#cb33-20" tabindex="-1"></a>       <span class="at">device =</span> <span class="st">&quot;png&quot;</span>,</span>
<span id="cb33-21"><a href="projects-funded-by-the-afd.html#cb33-21" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb33-22"><a href="projects-funded-by-the-afd.html#cb33-22" tabindex="-1"></a></span>
<span id="cb33-23"><a href="projects-funded-by-the-afd.html#cb33-23" tabindex="-1"></a><span class="co">#Export to S3 storage</span></span>
<span id="cb33-24"><a href="projects-funded-by-the-afd.html#cb33-24" tabindex="-1"></a></span>
<span id="cb33-25"><a href="projects-funded-by-the-afd.html#cb33-25" tabindex="-1"></a><span class="do">##List of files to save in the temp folder</span></span>
<span id="cb33-26"><a href="projects-funded-by-the-afd.html#cb33-26" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-27"><a href="projects-funded-by-the-afd.html#cb33-27" tabindex="-1"></a><span class="do">##Add each file in the bucket (same foler for every file in the temp)</span></span>
<span id="cb33-28"><a href="projects-funded-by-the-afd.html#cb33-28" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb33-29"><a href="projects-funded-by-the-afd.html#cb33-29" tabindex="-1"></a><span class="cf">for</span>(f <span class="cf">in</span> files) </span>
<span id="cb33-30"><a href="projects-funded-by-the-afd.html#cb33-30" tabindex="-1"></a>{</span>
<span id="cb33-31"><a href="projects-funded-by-the-afd.html#cb33-31" tabindex="-1"></a>  count <span class="ot">=</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb33-32"><a href="projects-funded-by-the-afd.html#cb33-32" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Uploading file&quot;</span>, <span class="fu">paste0</span>(count, <span class="st">&quot;/&quot;</span>, <span class="fu">length</span>(files), <span class="st">&quot; &#39;&quot;</span>, f, <span class="st">&quot;&#39;&quot;</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb33-33"><a href="projects-funded-by-the-afd.html#cb33-33" tabindex="-1"></a>  aws.s3<span class="sc">::</span><span class="fu">put_object</span>(<span class="at">file =</span> f, </span>
<span id="cb33-34"><a href="projects-funded-by-the-afd.html#cb33-34" tabindex="-1"></a>                     <span class="at">bucket =</span> <span class="st">&quot;projet-afd-eva-ap/DesStat/gouvernance&quot;</span>, </span>
<span id="cb33-35"><a href="projects-funded-by-the-afd.html#cb33-35" tabindex="-1"></a>                     <span class="at">region =</span> <span class="st">&quot;&quot;</span>, <span class="at">show_progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-36"><a href="projects-funded-by-the-afd.html#cb33-36" tabindex="-1"></a>  }</span>
<span id="cb33-37"><a href="projects-funded-by-the-afd.html#cb33-37" tabindex="-1"></a></span>
<span id="cb33-38"><a href="projects-funded-by-the-afd.html#cb33-38" tabindex="-1"></a><span class="co">#Erase the files in the temp directory</span></span>
<span id="cb33-39"><a href="projects-funded-by-the-afd.html#cb33-39" tabindex="-1"></a></span>
<span id="cb33-40"><a href="projects-funded-by-the-afd.html#cb33-40" tabindex="-1"></a><span class="fu">do.call</span>(file.remove, <span class="fu">list</span>(<span class="fu">list.files</span>(tmp, <span class="at">full.names =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="building-the-datasets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="biodiversity-in-the-protected-areas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vuillota/EVA-impact-aires-protegees/edit/main/01_stat_project.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["https://github.com/vuillota/EVA-impact-aires-protegees/raw/main/01_stat_project.Rmd"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
